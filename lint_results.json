
> wonky-sprout-os@0.0.0 lint
> eslint . --ext .ts,.tsx --report-unused-disable-directives --max-warnings=0 --no-ignore --format json

[{"filePath":"C:\\wonky-sprout-os\\AIBriefing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\AICommunicationCoachModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\AIConsentModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\AICorrelationAnalysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\AllChecklists.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\ArchiveLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\BrainDumpModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\ChecklistItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\CriticalTasks.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\GameMasterDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\GardenView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\SopVault.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\TodaysAgenda.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\UserSopView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\WeeklyReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\WonkyAIModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\WonkyAISetupGuide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\checklist-data.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\componentMap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AICommunicationCoach.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isPiiModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'piiMatches' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handlePiiConfirm' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":58,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":74},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handlePiiCancel' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":76,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":91},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isConsentModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":93,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":111},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleConfirm' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":113,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":126},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleCancel' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":128,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":140},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'dontShowAgain' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":142,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":155},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setDontShowAgain' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":26,"column":157,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":173},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3059,3062],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3059,3062],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":45,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":45,"endColumn":26}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport useSafeAI from '../hooks/useSafeAI';\r\nimport useAIPromptSafety from '../hooks/useAIPromptSafety';\r\nimport ContentCard from './ContentCard';\r\n\r\nconst AICommunicationCoach: React.FC = () => {\r\n    const [originalText, setOriginalText] = useState('');\r\n    const [translatedText, setTranslatedText] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const systemInstruction = `You are an expert communication coach specializing in translating direct, neurodivergent communication styles (like Autism/ADHD) into language that is clear, collaborative, and less likely to be misinterpreted by a neurotypical co-parent. Your goal is to preserve the core facts and intent of the message while rephrasing it to be constructive and low-conflict.\r\n\r\n    **Core Directives:**\r\n    1.  **Preserve Facts:** The essential information (who, what, where, when, why) must remain unchanged.\r\n    2.  **Remove Bluntness:** Replace declarative, demand-like statements with collaborative suggestions or questions.\r\n    3.  **Add 'I' Statements:** Reframe accusations or frustrations into statements about personal feelings or observations (e.g., \"You're always late\" becomes \"I feel stressed when pickup times are missed because it disrupts our evening schedule.\").\r\n    4.  **Inject Collaboration:** Use phrases like \"How can we work together on this?\", \"What are your thoughts on...?\", or \"Would it be possible to...\".\r\n    5.  **Assume Good Intent:** Frame the translated message as if the user and co-parent are a team solving a logistical problem for the benefit of their children.\r\n    6.  **Keep it Concise:** Do not add excessive fluff. The goal is clarity and reduced conflict, not a corporate email.\r\n\r\n    **Example Translation:**\r\n    -   **Original:** \"Bash's soccer cleats don't fit. You need to buy him new ones before Friday's game.\"\r\n    -   **Translated:** \"Hey, I noticed Bash's soccer cleats seem too small for him. With the game on Friday, could we coordinate on getting him a new pair? Let me know what works best for you.\"`;\r\n\r\n    const { checkAndExecute, isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel, isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain } = useAIPromptSafety();\r\n    const { generate } = useSafeAI();\r\n\r\n    const handleTranslate = async () => {\r\n        if (!originalText.trim()) {\r\n            setError(\"Input message cannot be empty. Define the communication objective.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        setTranslatedText('');\r\n\r\n        try {\r\n            await checkAndExecute(originalText, async (safePrompt) => {\r\n                const result = await generate(safePrompt, { model: 'gemini-2.5-flash', config: { systemInstruction }, skipPromptSafety: true });\r\n                setTranslatedText(result?.text || (result?.json ? JSON.stringify(result.json, null, 2) : ''));\r\n            });\r\n        } catch (e: any) {\r\n            setError(`Error: ${e.message || 'Failed to communicate with the AI model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n    \r\n    const handleCopy = () => {\r\n        navigator.clipboard.writeText(translatedText);\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"AI Communication Coach\" titleClassName=\"text-accent-blue text-xl\">\r\n             <p className=\"text-md text-text-light text-opacity-80 mb-4\">\r\n                Write your direct, factual message below. The AI will translate it into a collaborative, low-conflict format for your co-parent.\r\n            </p>\r\n            {error && (\r\n              <div role=\"alert\" className=\"bg-red-800 bg-opacity-30 border border-red-700 text-red-400 p-3 rounded-md mb-4 text-sm\">\r\n                <p className=\"font-semibold\">System Error:</p>\r\n                <p>{error}</p>\r\n              </div>\r\n            )}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div className=\"space-y-2\">\r\n                    <label htmlFor=\"original-text\" className=\"font-semibold text-accent-teal\">Your Direct Message:</label>\r\n                    <textarea\r\n                        id=\"original-text\"\r\n                        value={originalText}\r\n                        onChange={(e) => setOriginalText(e.target.value)}\r\n                        rows={6}\r\n                        className=\"w-full p-3 bg-gray-800 border border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue\"\r\n                        placeholder=\"e.g., Willow's dentist appointment is Tuesday at 3pm. You have to take her.\"\r\n                        disabled={loading}\r\n                    />\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                    <label htmlFor=\"translated-text\" className=\"font-semibold text-accent-green\">Translated Message:</label>\r\n                    <textarea\r\n                        id=\"translated-text\"\r\n                        value={loading ? \"Translating...\" : translatedText}\r\n                        readOnly\r\n                        rows={6}\r\n                        className=\"w-full p-3 bg-gray-900 border border-gray-700 rounded-md text-text-light placeholder-gray-500\"\r\n                        placeholder=\"Translation will appear here...\"\r\n                    />\r\n                </div>\r\n            </div>\r\n            <div className=\"mt-4 flex justify-end items-center space-x-4\">\r\n                 {translatedText && !loading && (\r\n                    <button onClick={handleCopy} className=\"px-4 py-2 bg-gray-600 text-text-light rounded-md hover:bg-gray-500 transition-colors font-semibold\">Copy</button>\r\n                 )}\r\n                 <button\r\n                    onClick={handleTranslate}\r\n                    disabled={loading}\r\n                    className=\"px-6 py-2 bg-accent-blue text-background-dark rounded-md hover:bg-blue-400 transition-colors duration-200 font-semibold disabled:bg-gray-600 disabled:cursor-not-allowed\"\r\n                >\r\n                    {loading ? (\r\n                        <span className=\"flex items-center\">\r\n                            <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                            </svg>\r\n                            Translating...\r\n                        </span>\r\n                    ) : (\r\n                        'Translate'\r\n                    )}\r\n                </button>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default AICommunicationCoach;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AIConsentModal.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":22,"column":141,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1016,1144],"text":"This feature uses generative AI to process your input. To provide a response, your prompt data will be sent to Google&apos;s servers."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1016,1144],"text":"This feature uses generative AI to process your input. To provide a response, your prompt data will be sent to Google&lsquo;s servers."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1016,1144],"text":"This feature uses generative AI to process your input. To provide a response, your prompt data will be sent to Google&#39;s servers."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1016,1144],"text":"This feature uses generative AI to process your input. To provide a response, your prompt data will be sent to Google&rsquo;s servers."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":34,"column":51,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1952,1973],"text":"Don&apos;t show this again"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1952,1973],"text":"Don&lsquo;t show this again"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1952,1973],"text":"Don&#39;t show this again"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1952,1973],"text":"Don&rsquo;t show this again"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ninterface AIConsentModalProps {\r\n    onConfirm: () => void;\r\n    onCancel: () => void;\r\n    dontShowAgain: boolean;\r\n    setDontShowAgain: (value: boolean) => void;\r\n}\r\n\r\nimport { Modal } from './Modal';\r\nimport { Button } from './Button';\r\n\r\nconst AIConsentModal: React.FC<AIConsentModalProps> = ({ onConfirm, onCancel, dontShowAgain, setDontShowAgain }) => {\r\n    return (\r\n        <Modal isOpen={true} onClose={onCancel} ariaLabelledBy=\"consent-modal-title\" preventBackgroundClick={true}>\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-8 border border-gray-700 w-full max-w-lg m-4\">\r\n                <header className=\"flex justify-between items-center mb-6\">\r\n                    <h2 data-testid=\"ai-consent-title\" id=\"consent-modal-title\" className=\"text-3xl font-extrabold text-accent-blue\">AI Feature Consent</h2>\r\n                </header>\r\n                \r\n                <div className=\"space-y-4 text-text-light text-opacity-90\">\r\n                    <p>This feature uses generative AI to process your input. To provide a response, your prompt data will be sent to Google's servers.</p>\r\n                    <p><strong>Data Privacy Notice:</strong> Please review your input and remove any sensitive or personal information before proceeding. Do not include anything you would not want a human reviewer to see.</p>\r\n                </div>\r\n                \r\n                <div className=\"mt-6 pt-4 border-t border-gray-700\">\r\n                    <label className=\"flex items-center text-sm\">\r\n                        <input\r\n                            type=\"checkbox\"\r\n                            checked={dontShowAgain}\r\n                            onChange={(e) => setDontShowAgain(e.target.checked)}\r\n                            className=\"h-4 w-4 rounded bg-gray-700 text-accent-blue focus:ring-accent-blue\"\r\n                        />\r\n                        <span className=\"ml-2\">Don't show this again</span>\r\n                    </label>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-4 mt-6\">\r\n                    <Button data-testid=\"ai-consent-cancel\" variant=\"secondary\" onClick={onCancel}>Cancel</Button>\r\n                    <Button data-testid=\"ai-consent-acknowledge\" variant=\"primary\" onClick={onConfirm} autoFocus>Acknowledge & Proceed</Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default AIConsentModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AISafetyProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AccessibilitySafetyProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AchievementTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ActionableCue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AllChecklists.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'importChecklists' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":44}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport ContentCard from './ContentCard';\r\nimport { ALL_CHECKLIST_DATA, ChecklistSectionData } from '../checklist-data.tsx';\r\nimport { QuickJump } from './QuickJump';\r\nimport { exportChecklists, importChecklists } from '../src/utils/importExport';\r\n\r\nconst AllChecklists: React.FC = () => {\r\n  const groupedBySource = ALL_CHECKLIST_DATA.reduce<Record<string, ChecklistSectionData[]>>((acc, section) => {\r\n    const source = section.sourceDocument;\r\n    if (!acc[source]) {\r\n      acc[source] = [];\r\n    }\r\n    acc[source].push(section);\r\n    return acc;\r\n  }, {});\r\n\r\n  const sourceToId = (source: string) => `checklist-group-${source.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`;\r\n  \r\n  const quickJumpSections = Object.keys(groupedBySource).map(source => ({\r\n    id: sourceToId(source),\r\n    title: source,\r\n  }));\r\n\r\n  const handlePrint = () => {\r\n    window.print();\r\n  };\r\n\r\n  const renderSection = (section: ChecklistSectionData, level: number = 0): React.ReactNode => {\r\n    const titleClass = level === 0 ? \"text-accent-teal text-xl\" : \"text-accent-blue text-lg\";\r\n    const containerClass = level > 0 ? \"border-l-4 border-gray-700 pl-4 mt-4\" : \"\";\r\n\r\n    return (\r\n      <ContentCard \r\n        key={section.id} \r\n        title={section.title} \r\n        showHeader={true} \r\n        titleClassName={titleClass}\r\n        className={containerClass}\r\n      >\r\n        {section.items && (\r\n          <ul className=\"list-none\">\r\n            {section.items.map(item => (\r\n              <ChecklistItem\r\n                key={item.id}\r\n                id={item.id}\r\n                gemAwardId={item.gemAwardId}\r\n                gemRecipient={item.gemRecipient}\r\n                achievementAwardId={item.achievementAwardId}\r\n                large={item.large}\r\n              >\r\n                {item.label}\r\n              </ChecklistItem>\r\n            ))}\r\n          </ul>\r\n        )}\r\n        {section.subSections && (\r\n          <div className=\"space-y-4\">\r\n            {section.subSections.map(subSection => renderSection(subSection, level + 1))}\r\n          </div>\r\n        )}\r\n      </ContentCard>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10 relative\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Master Checklist Control</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80 max-w-3xl mx-auto\">\r\n          An aggregated, editable, and printable view of every checklist across the Wonky Sprout OS. Use this for comprehensive reviews or offline execution.\r\n        </p>\r\n        <button\r\n          onClick={handlePrint}\r\n          className=\"no-print absolute top-0 right-0 mt-2 px-6 py-3 bg-accent-blue text-background-dark rounded-md hover:bg-blue-400 transition-colors duration-200 font-semibold flex items-center\"\r\n          aria-label=\"Print all checklists\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fillRule=\"evenodd\" d=\"M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          Print\r\n        </button>\r\n        <button\r\n          onClick={() => {\r\n            const exported = exportChecklists(ALL_CHECKLIST_DATA);\r\n            if (navigator.clipboard) navigator.clipboard.writeText(exported);\r\n            alert('Checklist JSON copied to clipboard.');\r\n          }}\r\n          className=\"no-print absolute top-0 right-40 mt-2 px-6 py-3 bg-transparent text-accent-teal rounded-md hover:bg-white/5 transition-colors duration-200 font-semibold flex items-center\"\r\n          aria-label=\"Export all checklists\"\r\n        >Export Checklists</button>\r\n      </header>\r\n\r\n      <QuickJump sections={quickJumpSections} />\r\n\r\n      <div className=\"printable-content space-y-8\">\r\n        {Object.entries(groupedBySource).map(([sourceDocument, sections]) => (\r\n          <section key={sourceDocument} id={sourceToId(sourceDocument)}>\r\n            <ContentCard title={sourceDocument} titleClassName=\"text-accent-blue text-3xl\">\r\n              <div className=\"space-y-6\">\r\n                {sections.map(section => renderSection(section))}\r\n              </div>\r\n            </ContentCard>\r\n          </section>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { AllChecklists };\r\nexport default AllChecklists;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ArchiveLog.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":64,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":67,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[493,496],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[493,496],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[607,610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[607,610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":20,"column":49,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":20,"endColumn":52,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[865,868],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[865,868],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1257,1260],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1257,1260],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1274,1277],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1274,1277],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":51,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":54,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1335,1338],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1335,1338],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":84,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":87,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3689,3692],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3689,3692],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":99,"column":56,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":99,"endColumn":59,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4985,4988],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4985,4988],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from './ContentCard.js';\r\n\r\n\r\nconst ArchiveLog = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { projects, objectives, knowledgeVaultEntries } = appState;\r\n    const [activeTab, setActiveTab] = useState('projects');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const archivedProjects = useMemo(() => projects.filter((p: any) => p.isArchived), [projects]);\r\n    const archivedKnowledge = useMemo(() => knowledgeVaultEntries.filter((k: any) => k.isArchived), [knowledgeVaultEntries]);\r\n    \r\n    const filteredKnowledge = useMemo(() => {\r\n        if (!searchTerm) return archivedKnowledge;\r\n        const lowerSearch = searchTerm.toLowerCase();\r\n        return archivedKnowledge.filter((entry: any) => \r\n            entry.title.toLowerCase().includes(lowerSearch) ||\r\n            entry.content.toLowerCase().includes(lowerSearch) ||\r\n            entry.tags.some((tag: string) => tag.toLowerCase().includes(lowerSearch))\r\n        );\r\n    }, [searchTerm, archivedKnowledge]);\r\n\r\n    const projectsByObjective = useMemo(() => {\r\n        return archivedProjects.reduce((acc: Record<string, any[]>, project: any) => {\r\n            const objective = objectives.find((o: any) => o.id === project.objectiveId);\r\n            const objectiveTitle = objective ? objective.title : 'Uncategorized';\r\n            if (!acc[objectiveTitle]) {\r\n                acc[objectiveTitle] = [];\r\n            }\r\n            acc[objectiveTitle].push(project);\r\n            return acc;\r\n        }, {});\r\n    }, [archivedProjects, objectives]);\r\n\r\n    const handleUnarchiveKnowledge = (id: string) => {\r\n        dispatch({ type: 'UNARCHIVE_KNOWLEDGE_ENTRY', payload: id });\r\n    };\r\n\r\n    const TabButton = ({ label, target, count }: { label: string, target: string, count: number }) => (\r\n        <button\r\n            onClick={() => setActiveTab(target)}\r\n            className={`px-4 py-2 text-lg font-semibold rounded-t-md transition-colors w-1/2 ${\r\n                activeTab === target\r\n                    ? 'bg-card-dark border-b-2 border-accent-blue text-accent-blue'\r\n                    : 'bg-gray-800 text-gray-400 hover:bg-gray-700'\r\n            }`}\r\n        >\r\n            {label} ({count})\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">≡ƒÅå Accomplishments & Archive</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80 max-w-3xl mx-auto\">\r\n                    A historical log of your completed projects and archived knowledge. Review your progress.\r\n                </p>\r\n            </header>\r\n\r\n            <div className=\"flex border-b border-gray-700 mb-6\">\r\n                <TabButton label=\"Completed Projects\" target=\"projects\" count={archivedProjects.length} />\r\n                <TabButton label=\"Archived Knowledge\" target=\"knowledge\" count={archivedKnowledge.length} />\r\n            </div>\r\n\r\n            {activeTab === 'projects' && (\r\n                <div className=\"space-y-6\">\r\n                    {Object.entries(projectsByObjective).map(([objectiveTitle, projects]) => (\r\n                        <ContentCard key={objectiveTitle} title={`≡ƒÄ» ${objectiveTitle}`}>\r\n                            <div className=\"space-y-3\">\r\n                                {/* FIX: Add Array.isArray check to satisfy TypeScript's type inference for Object.entries values. */}\r\n                                {Array.isArray(projects) && projects.map((project: any) => (\r\n                                    <div key={project.id} className=\"p-3 bg-gray-800 rounded-md\">\r\n                                        <p className=\"font-semibold text-accent-green\">Γ£à {project.title}</p>\r\n                                        <p className=\"text-xs text-gray-400 mt-1\">Completed & Archived</p>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </ContentCard>\r\n                    ))}\r\n                    {archivedProjects.length === 0 && <p className=\"text-center text-gray-500\">No projects have been completed and archived yet.</p>}\r\n                </div>\r\n            )}\r\n            \r\n            {activeTab === 'knowledge' && (\r\n                <div>\r\n                    <input\r\n                        type=\"search\"\r\n                        placeholder=\"Search archived knowledge...\"\r\n                        value={searchTerm}\r\n                        onChange={e => setSearchTerm(e.target.value)}\r\n                        className=\"w-full p-3 bg-gray-800 border-2 border-gray-700 rounded-md mb-4\"\r\n                    />\r\n                    <div className=\"space-y-3 max-h-[60vh] overflow-y-auto pr-2\">\r\n                        {filteredKnowledge.map((entry: any) => (\r\n                            <details key={entry.id} className=\"p-3 bg-gray-800 rounded-md border border-gray-700 group\">\r\n                                <summary className=\"cursor-pointer font-bold text-accent-teal\">{entry.title}</summary>\r\n                                <div className=\"pt-2 mt-2 border-t border-gray-600\">\r\n                                    <p className=\"whitespace-pre-wrap text-sm mb-2\">{entry.content}</p>\r\n                                    <div className=\"flex justify-end\">\r\n                                        <button onClick={() => handleUnarchiveKnowledge(entry.id)} className=\"text-xs font-semibold text-accent-blue hover:underline\">\r\n                                            Restore to Vault\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </details>\r\n                        ))}\r\n                         {archivedKnowledge.length === 0 && <p className=\"text-center text-gray-500\">No knowledge entries have been archived yet.</p>}\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ArchiveLog;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\AuthScreen.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useAppState' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":21},{"ruleId":"react/prop-types","severity":2,"message":"'error' is missing in props validation","line":54,"column":29,"nodeType":"Property","messageId":"missingPropType","endLine":54,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'error.title' is missing in props validation","line":62,"column":73,"nodeType":"Identifier","messageId":"missingPropType","endLine":62,"endColumn":78},{"ruleId":"react/prop-types","severity":2,"message":"'error.analysis' is missing in props validation","line":64,"column":78,"nodeType":"Identifier","messageId":"missingPropType","endLine":64,"endColumn":86},{"ruleId":"react/prop-types","severity":2,"message":"'error.rootCause' is missing in props validation","line":65,"column":80,"nodeType":"Identifier","messageId":"missingPropType","endLine":65,"endColumn":89},{"ruleId":"react/prop-types","severity":2,"message":"'error.correctiveAction' is missing in props validation","line":66,"column":87,"nodeType":"Identifier","messageId":"missingPropType","endLine":66,"endColumn":103},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":153,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7358,7435],"text":" A simplified dashboard for a child&apos;s routines.\r\n                            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7358,7435],"text":" A simplified dashboard for a child&lsquo;s routines.\r\n                            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7358,7435],"text":" A simplified dashboard for a child&#39;s routines.\r\n                            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7358,7435],"text":" A simplified dashboard for a child&rsquo;s routines.\r\n                            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\nimport { auth, db } from '../firebase.js';\r\nimport { defaultUserState } from '../defaultStates.js';\r\n\r\n\r\n\r\nconst getAuthDiagnostic = (errorMessage) => {\r\n    if (errorMessage.includes('auth/invalid-credential')) {\r\n        return {\r\n            title: 'AUTHENTICATION FAILURE',\r\n            analysis: 'Credentials rejected by authentication server.',\r\n            rootCause: 'Invalid email or password combination.',\r\n            correctiveAction: 'Verify credentials and re-attempt. Check for typos.',\r\n        };\r\n    }\r\n    if (errorMessage.includes('auth/email-already-in-use')) {\r\n        return {\r\n            title: 'ACCOUNT PROVISIONING FAILURE',\r\n            analysis: 'The provided identity (email) is already registered in the system.',\r\n            rootCause: 'An account with this email address already exists.',\r\n            correctiveAction: 'Proceed to the login screen to access the existing account.',\r\n        };\r\n    }\r\n    if (errorMessage.includes('auth/weak-password')) {\r\n        return {\r\n            title: 'SECURITY PROTOCOL VIOLATION',\r\n            analysis: 'Submitted password does not meet minimum system security requirements.',\r\n            rootCause: 'Password must be at least 6 characters long.',\r\n            correctiveAction: 'Provide a stronger password and re-attempt account creation.',\r\n        };\r\n    }\r\n    if (errorMessage.includes('auth/invalid-email')) {\r\n        return {\r\n            title: 'INPUT VALIDATION FAILURE',\r\n            analysis: 'The provided identity (email) does not conform to a valid format.',\r\n            rootCause: 'The email address is not valid.',\r\n            correctiveAction: 'Correct the email format and re-attempt.',\r\n        };\r\n    }\r\n    // Fallback for other errors\r\n    return {\r\n        title: 'UNKNOWN SYSTEM ERROR',\r\n        analysis: 'An unexpected fault occurred during the authentication process.',\r\n        rootCause: 'Could not establish a secure connection or process the request.',\r\n        correctiveAction: 'Check your network connection and try again. If the problem persists, the service may be temporarily unavailable.',\r\n    };\r\n};\r\n\r\nconst AuthErrorDisplay = ({ error }) => (\r\n    <div role=\"alert\" className=\"p-4 bg-red-900/30 border-2 border-accent-warning/50 rounded-lg mb-4 text-sm animate-pulse-slow\">\r\n        <h3 className=\"font-bold text-lg text-accent-warning flex items-center gap-2\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n            NON-CONFORMING CONDITION REPORT\r\n        </h3>\r\n        <p className=\"text-yellow-400/80 text-xs font-mono mb-3\">{error.title}</p>\r\n        <div className=\"space-y-2 border-l-2 border-accent-warning/30 pl-3\">\r\n            <p><strong className=\"text-yellow-300\">Analysis:</strong> {error.analysis}</p>\r\n            <p><strong className=\"text-yellow-300\">Root Cause:</strong> {error.rootCause}</p>\r\n            <p><strong className=\"text-yellow-300\">Corrective Action:</strong> {error.correctiveAction}</p>\r\n        </div>\r\n    </div>\r\n);\r\n\r\n\r\nconst AuthScreen = () => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [authError, setAuthError] = useState(null);\r\n    const [isCreating, setIsCreating] = useState(false);\r\n\r\n    // Form state\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [newUserType, setNewUserType] = useState('william');\r\n\r\n\r\n    const handleLogin = async (loginEmail, loginPass) => {\r\n        setLoading(true);\r\n        setAuthError(null);\r\n        try {\r\n            await auth.signInWithEmailAndPassword(loginEmail, loginPass);\r\n            // onAuthStateChanged in context will handle the rest\r\n        } catch (e) {\r\n            setAuthError(getAuthDiagnostic(e.message));\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCreateUser = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setAuthError(null);\r\n        try {\r\n            const userCredential = await auth.createUserWithEmailAndPassword(email, password);\r\n            const newUser = userCredential.user;\r\n            \r\n            // Create the initial user state in the database\r\n            const initialState = {\r\n                ...defaultUserState,\r\n                dashboardType: newUserType,\r\n                view: 'garden-view', // All new users start at the Garden View\r\n            };\r\n            \r\n            await db.setDoc(newUser.uid, initialState);\r\n            // Login will be handled by onAuthStateChanged\r\n            \r\n        } catch (e) {\r\n            setAuthError(getAuthDiagnostic(e.message));\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-3xl mx-auto py-12 px-4\">\r\n            <header className=\"text-center mb-12\">\r\n                <h1 className=\"text-5xl md:text-6xl font-extrabold text-accent-teal mb-6\">≡ƒî▒ Wonky Sprout OS</h1>\r\n                <p className=\"text-xl md:text-2xl text-text-light text-opacity-90 max-w-2xl mx-auto\">\r\n                    An engineering solution for neurodivergent life management.\r\n                </p>\r\n            </header>\r\n\r\n            <section className=\"max-w-sm mx-auto p-6 bg-card-dark rounded-lg border border-gray-700\">\r\n                 <h2 className=\"text-2xl font-bold text-center mb-6\">{isCreating ? 'Create a New Sprout' : 'Login'}</h2>\r\n                \r\n                {authError && <AuthErrorDisplay error={authError} />}\r\n                \r\n                <form onSubmit={handleCreateUser} className=\"space-y-4\">\r\n                    {isCreating && (\r\n                        <div>\r\n                            <label htmlFor=\"sprout-type\" className=\"block text-sm font-medium text-gray-300 mb-1\">Sprout Type:</label>\r\n                            <select\r\n                                id=\"sprout-type\"\r\n                                value={newUserType}\r\n                                onChange={e => setNewUserType(e.target.value)}\r\n                                className=\"w-full p-3 bg-gray-800 border border-gray-600 rounded\"\r\n                            >\r\n                                <option value=\"william\">Personal Sprout (Default)</option>\r\n                                <option value=\"co-parenting\">Co-Parenting Sprout</option>\r\n                                <option value=\"willow\">Kid Sprout (Willow style)</option>\r\n                                <option value=\"sebastian\">Kid Sprout (Bash style)</option>\r\n                            </select>\r\n                            <p className=\"text-xs text-gray-400 mt-2\">\r\n                                <strong>Personal:</strong> Full-featured OS for an individual.\r\n                                <br/>\r\n                                <strong>Co-Parenting:</strong> A shared hub for managing kid logistics.\r\n                                <br/>\r\n                                <strong>Kid Sprout:</strong> A simplified dashboard for a child's routines.\r\n                            </p>\r\n                        </div>\r\n                    )}\r\n                    <input\r\n                        type=\"email\"\r\n                        value={email}\r\n                        onChange={e => setEmail(e.target.value)}\r\n                        placeholder=\"Email Address\"\r\n                        className=\"w-full p-3 bg-gray-800 border border-gray-600 rounded\"\r\n                        required\r\n                    />\r\n                    <input\r\n                        type=\"password\"\r\n                        value={password}\r\n                        onChange={e => setPassword(e.target.value)}\r\n                        placeholder=\"Password\"\r\n                        className=\"w-full p-3 bg-gray-800 border border-gray-600 rounded\"\r\n                        required\r\n                    />\r\n\r\n                    {isCreating ? (\r\n                         <button type=\"submit\" disabled={loading} className=\"w-full p-3 bg-accent-green text-background-dark font-bold rounded disabled:bg-gray-600\">\r\n                            {loading ? 'Planting...' : 'Create Sprout'}\r\n                        </button>\r\n                    ) : (\r\n                         <button type=\"button\" onClick={() => handleLogin(email, password)} disabled={loading} className=\"w-full p-3 bg-accent-blue text-background-dark font-bold rounded disabled:bg-gray-600\">\r\n                            {loading ? 'Logging In...' : 'Login'}\r\n                        </button>\r\n                    )}\r\n\r\n                </form>\r\n\r\n                 <div className=\"text-center mt-6\">\r\n                    <button\r\n                        onClick={() => { setIsCreating(!isCreating); setAuthError(null); }}\r\n                        className=\"text-sm text-accent-green font-semibold hover:underline\"\r\n                    >\r\n                        {isCreating ? 'Already have a Sprout? Login' : \"Don't have a Sprout? Create one\"}\r\n                    </button>\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AuthScreen;\r\nexport { AuthScreen };","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\BashsCorner.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":16,"column":90,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[645,661],"text":"≡ƒªû Bash&apos;s Corner"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[645,661],"text":"≡ƒªû Bash&lsquo;s Corner"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[645,661],"text":"≡ƒªû Bash&#39;s Corner"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[645,661],"text":"≡ƒªû Bash&rsquo;s Corner"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport GemCollector from './GemCollector';\r\nimport ContentCard from './ContentCard';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst BashsCorner: React.FC = () => {\r\n  const { appState } = useAppState();\r\n  const { collectedGems } = appState;\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === \"Bash's Corner\");\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">≡ƒªû Bash's Corner</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-90 mt-2 font-semibold\">Purpose: Make your weeks predictable, fun, and safe. You know what happens next.</p>\r\n      </header>\r\n      \r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        <div className=\"space-y-8\">\r\n            {protocolData.map(section => (\r\n                <ContentCard key={section.id} title={section.title}>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n                        {section.subSections?.map(subSection => (\r\n                            <div key={subSection.id}>\r\n                                <h3 className=\"text-xl font-semibold text-accent-blue mb-2\">{subSection.title}</h3>\r\n                                <ul className=\"list-none space-y-2\">\r\n                                    {subSection.items?.map(item => (\r\n                                        <ChecklistItem key={item.id} {...item}>{item.label}</ChecklistItem>\r\n                                    ))}\r\n                                </ul>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </ContentCard>\r\n            ))}\r\n        </div>\r\n\r\n        <div className=\"space-y-8\">\r\n           <GemCollector name=\"Sebastian\" collectedGems={collectedGems.sebastian || []} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BashsCorner;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\BubbleShieldProtocol.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":35,"column":156,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as &quot;wants\" is a non-conforming condition."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as &ldquo;wants\" is a non-conforming condition."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as &#34;wants\" is a non-conforming condition."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as &rdquo;wants\" is a non-conforming condition."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":35,"column":162,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as \"wants&quot; is a non-conforming condition."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as \"wants&ldquo; is a non-conforming condition."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as \"wants&#34; is a non-conforming condition."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1734,1861],"text":"This hardware is required to maintain stable executive function. Treating these items as \"wants&rdquo; is a non-conforming condition."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst BubbleShieldProtocol: React.FC = () => {\r\n    const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Bubble Shield Protocol');\r\n    \r\n    const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">MLP-007: Bubble Shield Hardware Protocol</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80 font-semibold\">\r\n                    (Mandatory Sensory Fix)\r\n                </p>\r\n            </header>\r\n            \r\n            <QuickJump sections={sections} />\r\n\r\n            <div className=\"space-y-6\">\r\n                {protocolData.map(section => (\r\n                    <ContentCard key={section.id} title={section.title}>\r\n                        <p className=\"text-lg text-text-light text-opacity-90 mb-4\">{section.description}</p>\r\n                        <ul className=\"list-none space-y-2\">\r\n                            {section.items?.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n                        </ul>\r\n                    </ContentCard>\r\n                ))}\r\n            </div>\r\n             <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n                <p className=\"text-xl font-bold text-accent-blue\">This hardware is required to maintain stable executive function. Treating these items as \"wants\" is a non-conforming condition.</p>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport { BubbleShieldProtocol };\r\nexport default BubbleShieldProtocol;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Button.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'className' is missing in props validation","line":20,"column":60,"nodeType":"Property","messageId":"missingPropType","endLine":20,"endColumn":74}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\ntype ButtonProps = React.ButtonHTMLAttributes<HTMLButtonElement> & {\r\n  variant?: 'primary' | 'secondary' | 'danger';\r\n  size?: 'sm' | 'md';\r\n};\r\n\r\nconst base = 'btn';\r\nconst variantClass = {\r\n  primary: 'btn-primary',\r\n  secondary: 'btn-secondary',\r\n  danger: 'btn-danger',\r\n};\r\n\r\nconst sizeClass = {\r\n  sm: 'btn-sm',\r\n  md: '',\r\n};\r\n\r\nexport const Button = ({ variant = 'primary', size = 'md', className = '', ...props }: ButtonProps) => {\r\n  return <button {...props} className={`${base} ${variantClass[variant]} ${sizeClass[size]} ${className}`} />;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ChecklistCard.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'section' is missing in props validation","line":5,"column":26,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":33},{"ruleId":"react/prop-types","severity":2,"message":"'section.title' is missing in props validation","line":8,"column":70,"nodeType":"Identifier","messageId":"missingPropType","endLine":8,"endColumn":75},{"ruleId":"react/prop-types","severity":2,"message":"'section.parentTitle' is missing in props validation","line":9,"column":64,"nodeType":"Identifier","messageId":"missingPropType","endLine":9,"endColumn":75},{"ruleId":"react/prop-types","severity":2,"message":"'section.items' is missing in props validation","line":10,"column":22,"nodeType":"Identifier","messageId":"missingPropType","endLine":10,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'section.items' is missing in props validation","line":12,"column":30,"nodeType":"Identifier","messageId":"missingPropType","endLine":12,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'section.items.map' is missing in props validation","line":12,"column":36,"nodeType":"Identifier","messageId":"missingPropType","endLine":12,"endColumn":39}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport ChecklistItem from './ChecklistItem.js';\r\n\r\nconst ChecklistCard = ({ section }) => {\r\n    return (\r\n        <div className=\"bg-card-dark rounded-lg shadow-md p-4 border border-gray-700 flex flex-col h-full\">\r\n            <h3 className=\"font-bold text-accent-teal mb-2\">{section.title}</h3>\r\n            <p className=\"text-xs text-gray-400 mb-3\">{section.parentTitle}</p>\r\n            {section.items && (\r\n                <ul className=\"list-none space-y-1\">\r\n                    {section.items.map(item => (\r\n                        <ChecklistItem\r\n                            key={item.id}\r\n                            id={item.id}\r\n                            gemAwardId={item.gemAwardId}\r\n                            gemRecipient={item.gemRecipient}\r\n                            achievementAwardId={item.achievementAwardId}\r\n                        >\r\n                            {item.label}\r\n                        </ChecklistItem>\r\n                    ))}\r\n                </ul>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport { ChecklistCard };\r\nexport default ChecklistCard;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ChecklistItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ClassicWillyProtocol.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":16,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[697,739],"text":"&quot;classicwilly\" Execution Protocol (CW-SOP)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[697,739],"text":"&ldquo;classicwilly\" Execution Protocol (CW-SOP)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[697,739],"text":"&#34;classicwilly\" Execution Protocol (CW-SOP)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[697,739],"text":"&rdquo;classicwilly\" Execution Protocol (CW-SOP)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":16,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[697,739],"text":"\"classicwilly&quot; Execution Protocol (CW-SOP)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[697,739],"text":"\"classicwilly&ldquo; Execution Protocol (CW-SOP)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[697,739],"text":"\"classicwilly&#34; Execution Protocol (CW-SOP)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[697,739],"text":"\"classicwilly&rdquo; Execution Protocol (CW-SOP)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":72,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[846,1004],"text":" To define the operational mode for &quot;classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for &ldquo;classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[846,1004],"text":" To define the operational mode for &#34;classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for &rdquo;classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly&quot; when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly&ldquo; when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly&#34; when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly&rdquo; when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":160,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection &quot;structure\" is required.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection &ldquo;structure\" is required.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection &#34;structure\" is required.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection &rdquo;structure\" is required.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":170,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure&quot; is required.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure&ldquo; is required.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure&#34; is required.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[846,1004],"text":" To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure&rdquo; is required.\r\n        "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst ClassicWillyProtocol: React.FC = () => {\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Classicwilly Protocol');\r\n  \r\n  const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">\"classicwilly\" Execution Protocol (CW-SOP)</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          <strong>Purpose:</strong> To define the operational mode for \"classicwilly\" when a non-conforming condition has been identified and 11/10-perfection \"structure\" is required.\r\n        </p>\r\n      </header>\r\n\r\n      <QuickJump sections={sections} />\r\n\r\n      <div className=\"space-y-6\">\r\n        {protocolData.map(section => (\r\n          <ContentCard key={section.id} title={section.title}>\r\n            {section.description && <p className=\"text-lg text-text-light text-opacity-90 mb-4\">{section.description}</p>}\r\n            {section.items && (\r\n              <ul className=\"list-none space-y-2 text-lg\">\r\n                {section.items.map(item => (\r\n                  <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>\r\n                ))}\r\n              </ul>\r\n            )}\r\n          </ContentCard>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { ClassicWillyProtocol };\r\nexport default ClassicWillyProtocol;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CoParentingCommunicationProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CoParentingDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CoParentingDashboardBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CoParentingProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Cockpit.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CockpitNavigation.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CockpitProfileBuilderModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":6,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":6,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[158,161],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[158,161],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":27,"column":77,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":27,"endColumn":80,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[996,999],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[996,999],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":61,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":64,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1063,1066],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1063,1066],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\ninterface Props {\r\n  onClose: () => void;\r\n  existing?: any;\r\n}\r\n\r\nconst CockpitProfileBuilderModal: React.FC<Props> = ({ onClose, existing }) => {\r\n  const { appState, dispatch } = useAppState();\r\n  const [name, setName] = useState(existing?.name || '');\r\n  const [persona, setPersona] = useState(existing?.persona || appState?.dashboardType || 'william');\r\n  const [audio, setAudio] = useState(existing?.audio || 'brown_noise');\r\n  const [oral, setOral] = useState(existing?.oral || 'chew');\r\n  const [visual, setVisual] = useState(existing?.visual || 'sunglasses');\r\n\r\n  const handleSave = () => {\r\n    const payload = {\r\n      id: existing?.id || `ps-${Date.now()}`,\r\n      name,\r\n      persona,\r\n      audio,\r\n      oral,\r\n      visual,\r\n      createdAt: existing?.createdAt || new Date().toISOString(),\r\n    };\r\n    if (existing?.id) dispatch({ type: 'UPDATE_PROFILE_STACK', payload } as any);\r\n    else dispatch({ type: 'ADD_PROFILE_STACK', payload } as any);\r\n    // Apply automatically\r\n    dispatch({ type: 'APPLY_PROFILE_STACK', payload: payload.id });\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div role=\"dialog\" aria-modal=\"true\" data-testid=\"cockpit-modal\" className=\"fixed inset-0 flex items-center justify-center z-30\">\r\n      <div className=\"bg-black/40 absolute inset-0\" onClick={onClose}></div>\r\n      <div className=\"bg-sanctuary-card p-4 rounded shadow z-40 w-[min(800px,95%)]\">\r\n        <h2 className=\"text-xl font-bold mb-2\">Profile Builder</h2>\r\n        <div className=\"grid grid-cols-2 gap-4\">\r\n          <label className=\"space-y-1\">\r\n            <div className=\"text-sm text-slate-400\">Name</div>\r\n            <input data-testid=\"cockpit-name-input\" className=\"w-full p-2 border rounded\" value={name} onChange={(e) => setName(e.target.value)} />\r\n          </label>\r\n          <label className=\"space-y-1\">\r\n            <div className=\"text-sm text-slate-400\">Persona</div>\r\n            <select data-testid=\"cockpit-persona-select\" className=\"w-full p-2 border rounded\" value={persona} onChange={(e) => setPersona(e.target.value)}>\r\n              <option value=\"william\">William (Admin)</option>\r\n              <option value=\"willow\">Willow</option>\r\n              <option value=\"sebastian\">Sebastian</option>\r\n            </select>\r\n          </label>\r\n          <label className=\"space-y-1\">\r\n            <div className=\"text-sm text-slate-400\">Audio</div>\r\n            <select data-testid=\"cockpit-audio-select\" className=\"w-full p-2 border rounded\" value={audio} onChange={(e) => setAudio(e.target.value)}>\r\n              <option value=\"brown_noise\">Brown Noise</option>\r\n              <option value=\"edm\">EDM</option>\r\n              <option value=\"silence\">Silence</option>\r\n            </select>\r\n          </label>\r\n          <label className=\"space-y-1\">\r\n            <div className=\"text-sm text-slate-400\">Oral</div>\r\n            <select data-testid=\"cockpit-oral-select\" className=\"w-full p-2 border rounded\" value={oral} onChange={(e) => setOral(e.target.value)}>\r\n              <option value=\"chew\">Chew</option>\r\n              <option value=\"crunch\">Crunch</option>\r\n              <option value=\"suck\">Suck</option>\r\n            </select>\r\n          </label>\r\n          <label className=\"col-span-2 space-y-1\">\r\n            <div className=\"text-sm text-slate-400\">Visual</div>\r\n            <select data-testid=\"cockpit-visual-select\" className=\"w-full p-2 border rounded\" value={visual} onChange={(e) => setVisual(e.target.value)}>\r\n              <option value=\"sunglasses\">Sunglasses</option>\r\n              <option value=\"dim_lights\">Dim Lights</option>\r\n              <option value=\"blackout\">Blackout</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n        <div className=\"mt-4 flex justify-end gap-2\">\r\n          <button data-testid=\"cockpit-cancel\" onClick={onClose} className=\"px-3 py-1 border rounded\">Cancel</button>\r\n          <button data-testid=\"cockpit-save-apply\" onClick={handleSave} className=\"px-3 py-1 bg-sanctuary-accent text-white rounded\">Save & Apply</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CockpitProfileBuilderModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CommandCenter.clean.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'appState' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":14,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":14,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '@components/ContentCard';\r\nimport EssentialsTrackerModule from \"@components/modules/EssentialsTrackerModule\";\r\nimport KidsTrackerModule from \"@components/modules/KidsTrackerModule\";\r\nimport { WorkspaceLaunchpadModule } from \"@components/modules/WorkspaceLaunchpadModule\";\r\nimport CriticalTasks from \"@components/modules/william/daily-command/CriticalTasks\";\r\nimport WonkyAIModule from \"@components/modules/WonkyAIModule\";\r\nimport AchievementTrackerModule from \"@components/modules/AchievementTrackerModule\";\r\nimport DayProgressBarModule from '@components/modules/DayProgressBarModule';\r\nimport StatusTrackerModule from '@components/modules/StatusTrackerModule';\r\nimport { GroundingRose } from '@components/GroundingRose';\r\nconst CommandCenter: React.FC = () => {\r\n    const { appState, dispatch } = useAppState();\r\n\r\n    const handleTestAirlock = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        dispatch?.({ type: 'SET_SAVED_CONTEXT', payload: { view: 'command-center', dashboardType: 'william' } });\r\n        dispatch?.({ type: 'SET_CONTEXT_RESTORE_MODAL_OPEN', payload: true });\r\n    };\r\n\r\n    return (\r\n    <div className=\"p-6 max-w-7xl mx-auto space-y-8 pb-24\">\r\n        \r\n        {/* Header (Top) */}\r\n        <header className=\"mb-8 text-center\">\r\n            <h1 data-testid=\"command-center-title\" className=\"text-3xl font-bold text-primary-400 mb-2 pt-4\">\r\n                The Cockpit\r\n            </h1>\r\n            <p className=\"text-text-muted\">\r\n                Systems Online. Frequency Tuned. Welcome back, Pilot.\r\n            </p>\r\n        </header>\r\n\r\n        {/* --- ROW 1: DAY PROGRESS & GROUNDING (Existing) --- */}\r\n        <div className=\"grid grid-cols-1 gap-6\">\r\n            <ContentCard showHeader={false}>\r\n                <h2 className=\"text-xl font-semibold text-primary-300 mb-4\">Day Progress</h2>\r\n                <DayProgressBarModule />\r\n            </ContentCard>\r\n\r\n            <ContentCard showHeader={false} className=\"flex flex-col items-center justify-center space-y-6\">\r\n                <p className=\"text-text-muted text-sm\">\r\n                    Take a moment to ground yourself. Feel the connection.\r\n                </p>\r\n                <GroundingRose />\r\n            </ContentCard>\r\n        </div>\r\n\r\n        {/* --- ROW 2: STATUS TRACKERS (Missing in UI) --- */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            {/* The modules are rendered here in parallel */}\r\n            <StatusTrackerModule />\r\n            {/* <EssentialsTrackerModule /> */}\r\n            {/* <KidsTrackerModule /> */}\r\n            <EssentialsTrackerModule />\r\n            <KidsTrackerModule />\r\n        </div>\r\n\r\n        {/* --- ROW 3: WORK & CRITICAL TASKS (Missing in UI) --- */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <ContentCard title=\"≡ƒÜÇ Workspace Launchpad\">\r\n                <WorkspaceLaunchpadModule />\r\n                {/* Note: The Test Airlock and Apothecary buttons will go here */}\r\n                <div className=\"mt-4 flex gap-2\">\r\n                    <button \r\n                        data-testid=\"test-airlock-btn\"\r\n                        type=\"button\"\r\n                        className=\"px-6 py-3 bg-red-600 text-white font-bold rounded shadow-lg transition-all active:scale-95\"\r\n                        onClick={handleTestAirlock}\r\n                    >\r\n                        ≡ƒ¢æ Test Airlock Protocol\r\n                    </button>\r\n                    <button \r\n                        type=\"button\"\r\n                        className=\"px-6 py-3 bg-indigo-600 text-white font-bold rounded shadow-lg transition-all active:scale-95\"\r\n                        onClick={() => dispatch({ type: 'SET_VIEW', payload: 'bio-hacks' })}\r\n                    >\r\n                        ≡ƒÆè The Apothecary\r\n                    </button>\r\n                </div>\r\n            </ContentCard>\r\n            {/* <CriticalTasks /> */}\r\n            <CriticalTasks />\r\n        </div>\r\n\r\n        {/* --- ROW 4: AI & ACHIEVEMENT --- */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            {/* <WonkyAIModule /> */}\r\n            {/* <AchievementTrackerModule /> */}\r\n            <WonkyAIModule />\r\n            <AchievementTrackerModule />\r\n        </div>\r\n        \r\n    </div>\r\n  );\r\n};\r\n\r\nexport { CommandCenter };\r\nexport default CommandCenter;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CommandCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CommandCenterSetupSop.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":58,"column":117,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2596,2729],"text":"The Command Center is not about having the best gear. It&apos;s about eliminating every friction point between your brain and your output."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2596,2729],"text":"The Command Center is not about having the best gear. It&lsquo;s about eliminating every friction point between your brain and your output."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2596,2729],"text":"The Command Center is not about having the best gear. It&#39;s about eliminating every friction point between your brain and your output."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2596,2729],"text":"The Command Center is not about having the best gear. It&rsquo;s about eliminating every friction point between your brain and your output."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA, ChecklistSectionData } from '../checklist-data.tsx';\r\n\r\nconst CommandCenterSetupSop: React.FC = () => {\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Command Center Setup SOP');\r\n\r\n  const sections = protocolData.map(section => ({\r\n    id: section.id,\r\n    title: section.title,\r\n  }));\r\n  \r\n  const renderSubSections = (subSections: ChecklistSectionData[], grid: boolean = false) => {\r\n    const containerClass = grid ? 'grid md:grid-cols-2 gap-6' : '';\r\n    return (\r\n      <div className={containerClass}>\r\n        {subSections.map(subSection => (\r\n          <ContentCard key={subSection.id} title={subSection.title} titleClassName=\"text-accent-teal text-xl\" className=\"mb-4\">\r\n            <ul className=\"list-none space-y-2 text-lg\">\r\n              {subSection.items?.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n            </ul>\r\n          </ContentCard>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">COMMAND CENTER SETUP SOP (CCS-SOP)</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Define the complete equipment, software, and spatial requirements for the neurodivergent-optimized Command Center.\r\n        </p>\r\n      </header>\r\n\r\n      <QuickJump sections={sections} />\r\n\r\n      <div className=\"space-y-6\">\r\n        {protocolData.map(section => (\r\n          <section key={section.id} id={section.id}>\r\n            <ContentCard title={section.title}>\r\n              {section.description && <p className=\"text-lg text-text-light text-opacity-90 mb-4\">{section.description}</p>}\r\n              {section.items && (\r\n                <ul className=\"list-none space-y-2 text-lg\">\r\n                  {section.items.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n                </ul>\r\n              )}\r\n              {section.subSections && renderSubSections(section.subSections, section.id === 'ccs-setup')}\r\n            </ContentCard>\r\n          </section>\r\n        ))}\r\n        \r\n        <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n          <p className=\"text-xl font-bold text-accent-blue\">The Command Center is not about having the best gear. It's about eliminating every friction point between your brain and your output.</p>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommandCenterSetupSop;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\CommandPalette.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'type' is missing in props validation","line":7,"column":23,"nodeType":"Property","messageId":"missingPropType","endLine":7,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":21,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":21,"endColumn":11},{"ruleId":"react/prop-types","severity":2,"message":"'searchTerm' is missing in props validation","line":22,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":22,"endColumn":15},{"ruleId":"react/prop-types","severity":2,"message":"'setSearchTerm' is missing in props validation","line":23,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":23,"endColumn":18},{"ruleId":"react/prop-types","severity":2,"message":"'results' is missing in props validation","line":24,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":24,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'selectedIndex' is missing in props validation","line":25,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":25,"endColumn":18},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":26,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":26,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'onSelect' is missing in props validation","line":27,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":27,"endColumn":13},{"ruleId":"react/prop-types","severity":2,"message":"'results.length' is missing in props validation","line":77,"column":30,"nodeType":"Identifier","messageId":"missingPropType","endLine":77,"endColumn":36},{"ruleId":"react/prop-types","severity":2,"message":"'results.map' is missing in props validation","line":78,"column":33,"nodeType":"Identifier","messageId":"missingPropType","endLine":78,"endColumn":36}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React, { useRef, useEffect } from 'react';\r\n\r\n\r\nconst ResultIcon = ({ type }) => {\r\n    const icons = {\r\n        action: 'ΓÜí∩╕Å',\r\n        view: '≡ƒûÑ∩╕Å',\r\n        sop: '≡ƒôä',\r\n        task: 'Γ£à',\r\n        knowledge: '≡ƒºá',\r\n        objective: '≡ƒÄ»',\r\n        project: '≡ƒÅù∩╕Å',\r\n    };\r\n    return <span className=\"text-xl mr-3\">{icons[type] || 'Γ₧í∩╕Å'}</span>;\r\n};\r\n\r\nexport const CommandPalette = ({\r\n    isOpen,\r\n    searchTerm,\r\n    setSearchTerm,\r\n    results,\r\n    selectedIndex,\r\n    onClose,\r\n    onSelect,\r\n}) => {\r\n    const inputRef = useRef(null);\r\n    const resultsRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            inputRef.current?.focus();\r\n        }\r\n    }, [isOpen]);\r\n\r\n    useEffect(() => {\r\n        if (resultsRef.current) {\r\n            const selectedElement = resultsRef.current.children[selectedIndex];\r\n            if (selectedElement) {\r\n                selectedElement.scrollIntoView({ block: 'nearest' });\r\n            }\r\n        }\r\n    }, [selectedIndex]);\r\n\r\n    if (!isOpen) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-start justify-center pt-20\"\r\n            onClick={onClose}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n        >\r\n            <div\r\n                className=\"bg-card-dark rounded-lg shadow-2xl border border-gray-700 w-full max-w-2xl mx-4\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <div className=\"relative\">\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        placeholder=\"Search Flight Protocols, tasks, views, or run a command...\"\r\n                        data-testid=\"command-palette-input\"\r\n                        className=\"w-full p-4 bg-transparent text-lg text-text-light placeholder-gray-500 focus:outline-none border-b border-gray-700\"\r\n                    />\r\n                    <div className=\"absolute top-1/2 right-4 -translate-y-1/2 text-sm text-gray-500 hidden sm:block\">\r\n                        <kbd className=\"px-2 py-1.5 border border-gray-600 rounded\">Esc</kbd> to close\r\n                    </div>\r\n                </div>\r\n                <div ref={resultsRef} className=\"max-h-96 overflow-y-auto\">\r\n                    {results.length > 0 ? (\r\n                        results.map((result, index) => (\r\n                            <button\r\n                                key={result.id}\r\n                                data-testid={`command-palette-item-${result.id}`}\r\n                                onClick={() => onSelect(result)}\r\n                                className={`w-full text-left p-4 flex items-center transition-colors ${\r\n                                    selectedIndex === index ? 'bg-accent-blue/20' : 'hover:bg-gray-700/50'\r\n                                }`}\r\n                            >\r\n                                <ResultIcon type={result.type} />\r\n                                <div>\r\n                                    <p className=\"font-semibold text-text-light\">{result.title}</p>\r\n                                    {result.description && (\r\n                                        <p className=\"text-sm text-gray-400\">{result.description}</p>\r\n                                    )}\r\n                                </div>\r\n                            </button>\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"p-6 text-center text-gray-500\">No results found.</p>\r\n                    )}\r\n                </div>\r\n                 <div className=\"p-2 bg-gray-800 text-xs text-center text-gray-500 border-t border-gray-700\">\r\n                    Use <kbd className=\"px-1.5 py-1 border border-gray-600 rounded\">Γåæ</kbd> <kbd className=\"px-1.5 py-1 border border-gray-600 rounded\">Γåô</kbd> to navigate and <kbd className=\"px-1.5 py-1 border border-gray-600 rounded\">Enter</kbd> to select.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ContentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ContextSwitchCaptureModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ContextSwitchRestoreModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":13,"column":65,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":13,"endColumn":68,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[458,461],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[458,461],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":23,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":23,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[962,965],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[962,965],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1088,1091],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1088,1091],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1487,1490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1487,1490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleRestore' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":86,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":86,"endColumn":24}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\nconst DEFAULT_DECOMPRESS_SECONDS = 60;\r\nconst PHYSICAL_TASKS = [\r\n    '10 Heavy Chews (Proprioception)',\r\n    '10 Wall Pushups (Heavy Work)',\r\n    'Deep squeeze (Self-hug, 10s)',\r\n    'Blow into hand (Vagal Nerve Reset)'\r\n];\r\n\r\nconst ContextSwitchRestoreModal: React.FC = () => {\r\n    const { appState, dispatch, isTestMode } = useAppState() as any;\r\n    const { isContextRestoreModalOpen, savedContext } = appState || {};\r\n    const DECOMPRESS_SECONDS = isTestMode ? 3 : DEFAULT_DECOMPRESS_SECONDS;\r\n\r\n    // --- RESTORED HOOKS (CRASH ZONE 1) ---\r\n    const [decompressTime, setDecompressTime] = useState(DECOMPRESS_SECONDS);\r\n    const [isTaskCompleted, setIsTaskCompleted] = useState(false);\r\n    const [currentTask, setCurrentTask] = useState('');\r\n    // Diagnostic mount flag used by E2E tests\r\n    useEffect(() => {\r\n        try { (window as any).__WONKY_CONTEXT_RESTORE_MODAL_MOUNTED__ = true; } catch { /* ignore */ }\r\n        return () => { try { delete (window as any).__WONKY_CONTEXT_RESTORE_MODAL_MOUNTED__; } catch { /* ignore */ } };\r\n    }, []);\r\n\r\n    // Debug init log removed ΓÇö keep the mounted flag for E2E detection.\r\n\r\n    // CRITICAL GUARD - DO NOT REMOVE (keeps component safe at mount time)\r\n    if (!isContextRestoreModalOpen || !savedContext) return null;\r\n\r\n    // --- LOGIC: TIMER EFFECT (ENABLED) ---\r\n    useEffect(() => {\r\n        let timer: any = null;\r\n        if (isContextRestoreModalOpen && decompressTime > 0) {\r\n            timer = setTimeout(() => setDecompressTime(t => Math.max(0, t - 1)), 1000);\r\n        }\r\n        return () => { if (timer) clearTimeout(timer); };\r\n    }, [decompressTime, isContextRestoreModalOpen]);\r\n\r\n    // Initialize a current physical task when the modal opens\r\n    useEffect(() => {\r\n        if (isContextRestoreModalOpen && PHYSICAL_TASKS.length > 0) {\r\n            setCurrentTask(PHYSICAL_TASKS[0]);\r\n            setIsTaskCompleted(false);\r\n            setDecompressTime(DECOMPRESS_SECONDS);\r\n        }\r\n    }, [isContextRestoreModalOpen]);\r\n\r\n    // Calculate progress percentage for styling\r\n    // (already declared later; keep only a single declaration below)\r\n\r\n    // Avoid inline style for width: we inject a stylesheet rule dynamically\r\n    // to update the progress bar width without using inline styles.\r\n\r\n    // Calculate progress percentage for styling\r\n    const progressPercentage = Math.round(((DECOMPRESS_SECONDS - decompressTime) / DECOMPRESS_SECONDS) * 100);\r\n\r\n    // Avoid inline style for width: create a dynamic CSS rule to set the width\r\n    // for `.context-restore-progress .progress` using an injected <style> element\r\n    // so lint won't complain about inline styles.\r\n    useEffect(() => {\r\n        if (typeof document !== 'undefined') {\r\n            const id = 'wonky-ctx-restore-progress';\r\n            let styleEl = document.getElementById(id) as HTMLStyleElement | null;\r\n            if (!styleEl) {\r\n                styleEl = document.createElement('style');\r\n                styleEl.id = id;\r\n                document.head.appendChild(styleEl);\r\n            }\r\n            styleEl.textContent = `.context-restore-progress .progress { width: ${progressPercentage}%; }`;\r\n        }\r\n        return () => { /* keep the style for other tests */ };\r\n    }, [progressPercentage]);\r\n\r\n    // Debug: Log decompression ticks so we can see if test mode and completion logic works\r\n    // Debug tick logging removed\r\n\r\n    // completion effect will be declared after isDecompressionComplete\r\n\r\n    const isDecompressionComplete = decompressTime <= 0 && isTaskCompleted;\r\n\r\n    // Debug completion logging removed\r\n\r\n    // Handler functions\r\n    const handleRestore = () => {\r\n        // Close the modal and dispatch any restoration logic here\r\n        try { dispatch({ type: 'SET_CONTEXT_RESTORE_MODAL_OPEN', payload: false }); } catch { /* ignore in tests */ }\r\n    };\r\n    const handleDismiss = () => {\r\n        try { dispatch({ type: 'SET_CONTEXT_RESTORE_MODAL_OPEN', payload: false }); } catch { /* ignore */ }\r\n    };\r\n\r\n    // --- RESTORED JSX ---\r\n    return (\r\n        <div \r\n            className=\"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[99999]\"\r\n            data-testid=\"context-restore-modal\"\r\n        >\r\n            <div className=\"bg-surface-800 p-10 space-y-6\">\r\n                <h3 id=\"context-restore-modal-heading\" className=\"text-3xl font-bold text-accent-teal text-center\">\r\n                    ≡ƒ¢╕ The Airlock ΓÇö Sensory Decompression\r\n                </h3>\r\n\r\n                {/* TIMER VISUALS */}\r\n                <div className=\"space-y-2\">\r\n                    <p data-testid=\"context-restore-timer\" className=\"text-center font-mono text-primary-400\">\r\n                        {decompressTime} seconds remaining\r\n                    </p>\r\n                    <div className=\"relative w-full h-2 bg-surface-700/50 context-restore-progress\">\r\n                        <div className=\"absolute top-0 h-full bg-accent-teal progress origin-bottom-center\" />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* PHYSICAL TASK CHECKBOX */}\r\n                <label className=\"flex items-center\">\r\n                    <input type=\"checkbox\" checked={isTaskCompleted} onChange={() => setIsTaskCompleted(p => !p)} data-testid=\"physical-task-checkbox\" />\r\n                    <span className=\"text-accent-orange font-bold pl-3\">{currentTask || 'Protocol'}</span>\r\n                </label>\r\n\r\n                {/* ACTION BUTTONS */}\r\n                <div className=\"flex justify-between pt-4\">\r\n                    <button onClick={handleDismiss}>Dismiss</button>\r\n                    <button disabled={!isDecompressionComplete} data-testid=\"context-restore-restore-btn\">\r\n                        {isDecompressionComplete ? 'Restore Session' : 'Awaiting Protocol'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport { ContextSwitchRestoreModal };\r\nexport default ContextSwitchRestoreModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ContextSwitchingProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DailyDebrief.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3836,3839],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3836,3839],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":120,"column":71,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5573,5612],"text":"Review today&apos;s task completion metrics."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5573,5612],"text":"Review today&lsquo;s task completion metrics."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5573,5612],"text":"Review today&#39;s task completion metrics."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5573,5612],"text":"Review today&rsquo;s task completion metrics."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":141,"column":86,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[7294,7405],"text":"Let the AI analyze your day&apos;s performance, status, and remaining thoughts to identify wins and friction points."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[7294,7405],"text":"Let the AI analyze your day&lsquo;s performance, status, and remaining thoughts to identify wins and friction points."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[7294,7405],"text":"Let the AI analyze your day&#39;s performance, status, and remaining thoughts to identify wins and friction points."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[7294,7405],"text":"Let the AI analyze your day&rsquo;s performance, status, and remaining thoughts to identify wins and friction points."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":161,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[8976,9070],"text":"Finalize your reflection, define tomorrow&apos;s critical task, and complete the shutdown sequence."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[8976,9070],"text":"Finalize your reflection, define tomorrow&lsquo;s critical task, and complete the shutdown sequence."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[8976,9070],"text":"Finalize your reflection, define tomorrow&#39;s critical task, and complete the shutdown sequence."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[8976,9070],"text":"Finalize your reflection, define tomorrow&rsquo;s critical task, and complete the shutdown sequence."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":195,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11602,11696],"text":"\r\n          A guided process to review, analyze, and shut down the day&apos;s operations.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11602,11696],"text":"\r\n          A guided process to review, analyze, and shut down the day&lsquo;s operations.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11602,11696],"text":"\r\n          A guided process to review, analyze, and shut down the day&#39;s operations.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11602,11696],"text":"\r\n          A guided process to review, analyze, and shut down the day&rsquo;s operations.\r\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport useSafeAI from '../hooks/useSafeAI.js';\r\nimport { useAIPromptSafety } from '../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from './AIConsentModal.js';\r\nimport PIIWarningModal from './PIIWarningModal.js';\r\nimport ContentCard from './ContentCard.js';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\nconst toYMD = (date: Date): string => date.toISOString().split('T')[0];\r\n\r\nconst DailyDebrief: React.FC = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { tasks, brainDumpText, statusMood, statusEnergy } = appState;\r\n    const [step, setStep] = useState(1);\r\n    \r\n    // Step 3 State\r\n    const [wins, setWins] = useState('');\r\n    const [friction, setFriction] = useState('');\r\n    const [analysisText, setAnalysisText] = useState('');\r\n    const [nextDayTask, setNextDayTask] = useState('');\r\n    const [isAssisting, setIsAssisting] = useState(false);\r\n    const [assistError, setAssistError] = useState('');\r\n\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n\r\n    const dailyPerformance = useMemo(() => {\r\n        const todayStr = toYMD(new Date());\r\n        const todaysTasks = tasks.filter(t => t.dueDate === todayStr);\r\n        const completedTasks = todaysTasks.filter(t => t.status === 'done');\r\n        const completionRate = todaysTasks.length > 0 ? (completedTasks.length / todaysTasks.length) * 100 : 100;\r\n\r\n        return {\r\n            total: todaysTasks.length,\r\n            completed: completedTasks.length,\r\n            uncompleted: todaysTasks.filter(t => t.status === 'todo'),\r\n            rate: completionRate,\r\n        };\r\n    }, [tasks]);\r\n\r\n    const { generate } = useSafeAI();\r\n\r\n    const handleAssistReflection = async (safePrompt?: string) => {\r\n        setIsAssisting(true);\r\n        setAssistError('');\r\n\r\n        const prompt = `\r\n            You are a systems analyst AI preparing a daily debrief for a neurodivergent user.\r\n            Analyze the provided daily performance data and generate a DRAFT for their reflection.\r\n            The draft should be concise and analytical.\r\n            \r\n            - \"wins\": A bulleted list of 1-2 successes based on completed tasks or a high completion rate.\r\n            - \"friction\": A bulleted list of 1-2 challenges, based on uncompleted tasks, low energy, or brain dump contents.\r\n\r\n            Daily Context:\r\n            - Task Completion: ${dailyPerformance.completed} of ${dailyPerformance.total} tasks completed (${dailyPerformance.rate.toFixed(0)}%).\r\n            - Uncompleted Tasks: ${dailyPerformance.uncompleted.map(t => t.title).join(', ') || 'None'}.\r\n            - Final Status: Mood=${statusMood || 'N/A'}, Energy=${statusEnergy || 'N/A'}.\r\n            - Final Brain Dump Thoughts: \"\"\"${brainDumpText || \"Empty\"}\"\"\"\r\n            \r\n            Based on this, generate the reflection draft.\r\n        `;\r\n\r\n        try {\r\n            const result = await generate(safePrompt ?? prompt, { model: 'gemini-2.5-flash', timeoutMs: 20000, skipPromptSafety: true });\r\n            const text = result?.text || (result?.json ? JSON.stringify(result.json, null, 2) : '');\r\n            const winsMatch = text.match(/(?:wins|successes|achievements):?\\s*([\\s\\S]*?)(?:\\n\\n|##|$)/i);\r\n            const frictionMatch = text.match(/(?:friction|challenges|blockers):?\\s*([\\s\\S]*?)(?:\\n\\n|##|$)/i);\r\n            \r\n            setWins(winsMatch ? winsMatch[1].trim() : '');\r\n            setFriction(frictionMatch ? frictionMatch[1].trim() : '');\r\n            setAnalysisText(text);\r\n        } catch (e: any) {\r\n            setAssistError(`Failed to get assistance: ${e.message}`);\r\n        } finally {\r\n            setIsAssisting(false);\r\n        }\r\n    };\r\n    \r\n        const triggerAssist = () => {\r\n            checkAndExecute(\"Daily debrief context data\", handleAssistReflection);\r\n    };\r\n\r\n    const handleCompleteDebrief = () => {\r\n        // 1. Save reflection to Knowledge Vault\r\n        const debriefContent = `## System Diagnostics\\n\\n### Γ£à Wins\\n${wins}\\n\\n### ΓÜá∩╕Å Friction Points\\n${friction}\\n\\n### ≡ƒÄ» Critical Task for Tomorrow\\n${nextDayTask}`;\r\n        const date = new Date().toLocaleString();\r\n        dispatch({ type: 'ADD_KNOWLEDGE_ENTRY', payload: { title: `System Diagnostics - ${date}`, content: debriefContent, tags: ['system-diagnostics'] } });\r\n\r\n        // 2. Add critical task for tomorrow\r\n        const tomorrow = new Date();\r\n        tomorrow.setDate(tomorrow.getDate() + 1);\r\n        dispatch({ type: 'ADD_TASK', payload: { title: nextDayTask, priority: 'High', dueDate: toYMD(tomorrow) } });\r\n\r\n        // 3. Clear Brain Dump\r\n        dispatch({ type: 'RESET_BRAIN_DUMP' });\r\n\r\n        // 4. Move to final step\r\n        setStep(4);\r\n    };\r\n\r\n    const ProgressBar = () => (\r\n        <div className=\"flex justify-center items-center gap-2 my-8\">\r\n            {[1, 2, 3].map(num => (\r\n                <div key={num} className={`w-16 h-2 rounded-full transition-colors ${step >= num ? 'bg-accent-blue' : 'bg-gray-700'}`}></div>\r\n            ))}\r\n        </div>\r\n    );\r\n    \r\n    const renderStep = () => {\r\n        switch (step) {\r\n            case 1:\r\n                return (\r\n                    <ContentCard title=\"Step 1: Performance Review\">\r\n                        <p className=\"text-gray-300 mb-4\">Review today's task completion metrics.</p>\r\n                        <div className=\"text-center p-6 bg-gray-800 rounded-lg\">\r\n                            <p className=\"text-6xl font-bold text-accent-teal\">{dailyPerformance.rate.toFixed(0)}%</p>\r\n                            <p className=\"text-gray-400\">({dailyPerformance.completed} of ${dailyPerformance.total} tasks completed)</p>\r\n                        </div>\r\n                        {dailyPerformance.uncompleted.length > 0 && (\r\n                            <div className=\"mt-4\">\r\n                                <h4 className=\"font-bold text-accent-warning\">Uncompleted Tasks:</h4>\r\n                                <ul className=\"list-disc list-inside text-gray-400 text-sm\">\r\n                                    {dailyPerformance.uncompleted.map(t => <li key={t.id}>{t.title}</li>)}\r\n                                </ul>\r\n                            </div>\r\n                        )}\r\n                        <button onClick={() => setStep(2)} className=\"w-full mt-6 p-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">Proceed to Analysis</button>\r\n                    </ContentCard>\r\n                );\r\n            case 2:\r\n                return (\r\n                     <ContentCard title=\"Step 2: AI-Assisted Analysis\">\r\n                        {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n                        {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n                        <p className=\"text-gray-300 mb-4\">Let the AI analyze your day's performance, status, and remaining thoughts to identify wins and friction points.</p>\r\n                        <button onClick={triggerAssist} disabled={isAssisting} className=\"w-full p-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 disabled:bg-gray-600\">\r\n                           {isAssisting ? 'Analyzing...' : 'Γ£¿ Analyze Day'}\r\n                        </button>\r\n                         <div className=\"mt-4 p-3 bg-gray-800 rounded-md min-h-[150px] border border-gray-700\">\r\n                             {isAssisting && <p className=\"animate-pulse\">Analyzing data...</p>}\r\n                             {assistError && <p className=\"text-red-400\">{assistError}</p>}\r\n                             {!isAssisting && !assistError && analysisText && (\r\n                                 <div className=\"prose prose-invert prose-sm max-w-none\"><SecureMarkdown content={analysisText} /></div>\r\n                             )}\r\n                         </div>\r\n                        <div className=\"flex justify-between mt-6\">\r\n                            <button onClick={() => setStep(1)} className=\"p-3 bg-gray-600 font-bold rounded hover:bg-gray-500\">Back</button>\r\n                            <button onClick={() => setStep(3)} className=\"p-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">Proceed to Final Capture</button>\r\n                        </div>\r\n                    </ContentCard>\r\n                );\r\n            case 3:\r\n                return (\r\n                     <ContentCard title=\"Step 3: Final Capture & Shutdown\">\r\n                        <p className=\"text-gray-300 mb-4\">Finalize your reflection, define tomorrow's critical task, and complete the shutdown sequence.</p>\r\n                        <div className=\"space-y-4\">\r\n                            <textarea value={wins} onChange={e => setWins(e.target.value)} placeholder=\"Γ£à What went well today? (Wins)\" rows={3} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" />\r\n                            <textarea value={friction} onChange={e => setFriction(e.target.value)} placeholder=\"ΓÜá∩╕Å What created friction? (Friction Points)\" rows={3} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" />\r\n                            <input type=\"text\" value={nextDayTask} onChange={e => setNextDayTask(e.target.value)} placeholder=\"≡ƒÄ» Single Most Critical Task for Tomorrow\" className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required />\r\n                        </div>\r\n                         <div className=\"flex justify-between mt-6\">\r\n                            <button onClick={() => setStep(2)} className=\"p-3 bg-gray-600 font-bold rounded hover:bg-gray-500\">Back</button>\r\n                            <button onClick={handleCompleteDebrief} disabled={!nextDayTask.trim()} className=\"p-3 bg-accent-green text-background-dark font-bold rounded hover:bg-green-500 disabled:bg-gray-600\">Complete Debrief & Shutdown</button>\r\n                        </div>\r\n                    </ContentCard>\r\n                );\r\n            case 4:\r\n                      return (\r\n                          <ContentCard title=\"System Diagnostics Complete\">\r\n                        <div className=\"text-center p-8\">\r\n                            <span className=\"text-5xl mb-4\">≡ƒîÖ</span>\r\n                            <h3 className=\"text-2xl font-bold text-accent-green\">System Shutdown Complete</h3>\r\n                            <p className=\"text-gray-300 mt-2\">Your debrief is logged. The system is primed for tomorrow.</p>\r\n                            <button onClick={() => dispatch({ type: 'SET_VIEW', payload: 'operations-control'})} className=\"mt-6 px-6 py-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                                Return to Dashboard\r\n                            </button>\r\n                        </div>\r\n                    </ContentCard>\r\n                );\r\n            default: return null;\r\n        }\r\n    }\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">System Diagnostics Wizard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          A guided process to review, analyze, and shut down the day's operations.\r\n        </p>\r\n      </header>\r\n      {step < 4 && <ProgressBar />}\r\n      {renderStep()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DailyDebrief;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DailyReport.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ContentCard' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ChecklistItem' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":33,"column":27,"nodeType":"MemberExpression","messageId":"unexpected","endLine":33,"endColumn":40},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":74,"column":41,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical &quot;mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical &ldquo;mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical &#34;mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical &rdquo;mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":74,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet&quot; for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet&ldquo; for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet&#34; for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet&rdquo; for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":74,"column":108,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the &quot;out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the &ldquo;out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the &#34;out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the &rdquo;out of sight, out of mind\" challenge of digital-only systems.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":74,"column":134,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind&quot; challenge of digital-only systems.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind&ldquo; challenge of digital-only systems.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind&#34; challenge of digital-only systems.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3465,3654],"text":"\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind&rdquo; challenge of digital-only systems.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":77,"column":32,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3814,3875],"text":"\r\n                    Print Today&apos;s Mission\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3814,3875],"text":"\r\n                    Print Today&lsquo;s Mission\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3814,3875],"text":"\r\n                    Print Today&#39;s Mission\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3814,3875],"text":"\r\n                    Print Today&rsquo;s Mission\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":95,"column":102,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5042,5070],"text":"Today&apos;s Chronological Agenda"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5042,5070],"text":"Today&lsquo;s Chronological Agenda"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5042,5070],"text":"Today&#39;s Chronological Agenda"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5042,5070],"text":"Today&rsquo;s Chronological Agenda"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":117,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6638,6665],"text":"No items on today&apos;s agenda."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6638,6665],"text":"No items on today&lsquo;s agenda."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6638,6665],"text":"No items on today&#39;s agenda."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6638,6665],"text":"No items on today&rsquo;s agenda."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useMemo, useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from './ContentCard.js';\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.js';\r\nimport ChecklistItem from './ChecklistItem.js';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\nconst addDays = (date, days) => {\r\n    const result = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n};\r\n\r\nconst BRIEFING_CACHE_KEY = 'wonky-sprout-daily-briefing';\r\n\r\n\r\nconst DailyReport = () => {\r\n    const { appState } = useAppState();\r\n    const { calendarEvents, recurringTasks, tasks, checkedItems } = appState;\r\n    const [briefing, setBriefing] = useState('');\r\n\r\n    useEffect(() => {\r\n        const todayStr = toYMD(new Date());\r\n        const cachedData = localStorage.getItem(BRIEFING_CACHE_KEY);\r\n        if (cachedData) {\r\n            try {\r\n                const parsed = JSON.parse(cachedData);\r\n                if (parsed.date === todayStr) {\r\n                    setBriefing(parsed.content);\r\n                }\r\n            } catch (e) { console.error(\"Failed to parse briefing cache\", e); }\r\n        }\r\n    }, []);\r\n\r\n    const fullAgenda = useMemo(() => {\r\n        const today = new Date();\r\n        const todayStr = toYMD(today);\r\n        today.setHours(0, 0, 0, 0);\r\n\r\n        const todaysCalEvents = calendarEvents.filter((event) => toYMD(new Date(event.date)) === todayStr).map(e => ({ ...e, itemType: 'event' }));\r\n        \r\n        const dueRecurring = recurringTasks.filter((task) => {\r\n                const lastEventDate = task.lastCompletedDate ? new Date(task.lastCompletedDate) : new Date(task.startDate);\r\n                const dueDate = addDays(lastEventDate, task.frequencyDays);\r\n                return Math.round((dueDate.getTime() - today.getTime()) / (1000 * 3600 * 24)) <= 0;\r\n            }).map((task) => ({\r\n                ...(task), id: `recurring-${task.id}`, status: 'todo', dueDate: todayStr, priority: 'Medium', createdAt: task.startDate, completedAt: null, itemType: 'recurring'\r\n            }));\r\n\r\n        const todayT = tasks.filter((t) => t.status === 'todo' && t.dueDate === todayStr).map((t) => ({ ...t, itemType: 'task' }));\r\n        \r\n        const agenda = [...todaysCalEvents, ...dueRecurring, ...todayT];\r\n        agenda.sort((a, b) => {\r\n            const timeA = a.itemType === 'event' ? new Date(a.date).getTime() : Infinity;\r\n            const timeB = b.itemType === 'event' ? new Date(b.date).getTime() : Infinity;\r\n            if (timeA !== timeB) return timeA - timeB;\r\n            const priorityOrder = { 'High': 1, 'Medium': 2, 'Low': 3 };\r\n            const priorityA = 'priority' in a ? priorityOrder[a.priority] : 4;\r\n            const priorityB = 'priority' in b ? priorityOrder[b.priority] : 4;\r\n            return priorityA - priorityB;\r\n        });\r\n        return agenda;\r\n    }, [calendarEvents, recurringTasks, tasks]);\r\n    \r\n    const essentialsData = useMemo(() => ALL_CHECKLIST_DATA.find(section => section.id === 'essentials-tracker'), []);\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10 no-print\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Print Daily Report</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80 max-w-3xl mx-auto\">\r\n                    Generate a physical \"mission sheet\" for the day. This is a powerful tool to combat the \"out of sight, out of mind\" challenge of digital-only systems.\r\n                </p>\r\n                <button onClick={() => window.print()} className=\"mt-6 px-6 py-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                    Print Today's Mission\r\n                </button>\r\n            </header>\r\n            \r\n            <div id=\"main-content\" className=\"bg-card-dark rounded-lg shadow-md p-6 border border-gray-700 space-y-6\">\r\n                <header className=\"text-center pb-4 border-b border-gray-600\">\r\n                    <h1 className=\"text-3xl font-bold text-accent-teal\">Daily Mission Sheet</h1>\r\n                    <p className=\"text-lg text-gray-300\">{new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</p>\r\n                </header>\r\n\r\n                <section aria-labelledby=\"ai-briefing-title\">\r\n                    <h2 id=\"ai-briefing-title\" className=\"text-2xl font-bold text-accent-green mb-3\">AI Briefing</h2>\r\n                    <div className=\"prose prose-invert prose-sm max-w-none p-4 bg-gray-800 rounded-md\">\r\n                        {briefing ? <SecureMarkdown content={briefing} /> : <p>No AI briefing available for today.</p>}\r\n                    </div>\r\n                </section>\r\n\r\n                <section aria-labelledby=\"agenda-title\">\r\n                    <h2 id=\"agenda-title\" className=\"text-2xl font-bold text-accent-green mb-3\">Today's Chronological Agenda</h2>\r\n                    <div className=\"space-y-3\">\r\n                        {fullAgenda.length > 0 ? fullAgenda.map(item => {\r\n                            if (item.itemType === 'event') {\r\n                                return (\r\n                                    <div key={item.id} className=\"p-3 bg-gray-800 rounded-md flex items-center\">\r\n                                        <input type=\"checkbox\" className=\"h-5 w-5 mr-3\" aria-label={`Event: ${item.title}`} />\r\n                                        <span className=\"font-bold text-accent-blue w-20 flex-shrink-0\">{new Date(item.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                        <span>{item.title}</span>\r\n                                    </div>\r\n                                );\r\n                            }\r\n                            const task = item;\r\n                            return (\r\n                                <div key={item.id} className=\"p-3 bg-gray-800 rounded-md flex items-center\">\r\n                                     <input type=\"checkbox\" className=\"h-5 w-5 mr-3\" aria-label={`Task: ${task.title}`}/>\r\n                                     <div>\r\n                                        <span>{task.title}</span>\r\n                                        <span className=\"text-xs text-gray-400 ml-2\">({task.priority})</span>\r\n                                     </div>\r\n                                </div>\r\n                            );\r\n                        }) : <p className=\"text-gray-400\">No items on today's agenda.</p>}\r\n                    </div>\r\n                </section>\r\n\r\n                <section aria-labelledby=\"essentials-title\">\r\n                    <h2 id=\"essentials-title\" className=\"text-2xl font-bold text-accent-green mb-3\">Daily Protocol Compliance</h2>\r\n                    <div className=\"space-y-4 p-4 bg-gray-800 rounded-md\">\r\n                        {essentialsData?.subSections?.map(subSection => (\r\n                            <div key={subSection.id}>\r\n                                <h3 className=\"text-lg font-semibold text-accent-blue mb-2\">{subSection.title}</h3>\r\n                                <div className=\"grid grid-cols-2 sm:grid-cols-3 gap-2\">\r\n                                    {subSection.items?.map(item => (\r\n                                        <label key={item.id} className=\"flex items-center\">\r\n                                            <input type=\"checkbox\" checked={!!checkedItems[item.id]} readOnly className=\"h-5 w-5 mr-2\"/>\r\n                                            <span>{item.label}</span>\r\n                                        </label>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DailyReport;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DashboardLauncher.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DeepFocusContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DeploymentProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DesignLanguageProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\DeveloperComplianceProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\E2EGate.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[461,464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[461,464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":12,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":12,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[508,511],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[508,511],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":41,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":44,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[607,610],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[607,610],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":14,"column":81,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":14,"endColumn":84,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[647,650],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[647,650],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[783,786],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[783,786],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":92,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":95,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[823,826],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[823,826],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":24,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":27,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[897,900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[897,900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":18,"column":78,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":18,"endColumn":81,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[951,954],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[951,954],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\n\r\n// E2E gating overlay to block user interactions until the test explicitly\r\n// signals it is ready. This prevents header or route changes from other\r\n// app flows from racing with seeded test state.\r\nexport const E2EGate: React.FC = () => {\r\n  const [isE2E, setIsE2E] = useState(false);\r\n  const [isReady, setIsReady] = useState(false);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const seeded = !!(window as any).__WONKY_TEST_INITIALIZE__ || !!(window as any).__WONKY_TEST_STICKY_VIEW__;\r\n      setIsE2E(seeded);\r\n      const initialReady = !!(window as any).__WONKY_TEST_READY__ || (window as any).appState?.view === 'game-master-dashboard';\r\n      setIsReady(initialReady);\r\n\r\n      const handle = () => setIsReady(!!(window as any).__WONKY_TEST_READY__ || (window as any).appState?.view === 'game-master-dashboard');\r\n      try { (window as any).__WONKY_TEST_RELEASE_GATE__ = () => { (window as any).__WONKY_TEST_READY__ = true; handle(); }; } catch { /* ignore */ }\r\n      const interval = setInterval(() => handle(), 200);\r\n      return () => clearInterval(interval);\r\n    } catch {\r\n      setIsE2E(false);\r\n      setIsReady(true);\r\n    }\r\n  }, []);\r\n\r\n  if (!isE2E || isReady) return null;\r\n\r\n  return (\r\n    <div data-testid=\"e2e-gate\" className=\"fixed inset-0 z-[9999] bg-black/5 pointer-events-auto flex items-center justify-center\">\r\n      <div className=\"bg-black/60 text-white p-3 rounded-md\">\r\n        <strong>E2E initialization gate</strong>\r\n        <div className=\"opacity-90 mt-2\">\r\n          Tests are preparing the seeded state ΓÇö waiting for <code>__WONKY_TEST_READY__</code>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default E2EGate;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":7,"column":22,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":7,"endColumn":25,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[231,234],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[231,234],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":15,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":15,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[491,494],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[491,494],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[627,630],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[627,630],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":17,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":17,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[666,669],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[666,669],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1203,1206],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1203,1206],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":58,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":61,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1991,1994],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1991,1994],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":44,"column":123,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":44,"endColumn":126,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2144,2147],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2144,2147],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { logError } from '../src/utils/logger';\r\n\r\ntype State = { hasError: boolean };\r\n\r\nexport class ErrorBoundary extends React.Component<{ children: React.ReactNode }, State> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError() {\r\n    try {\r\n      // Also set a global error marker as early as possible so tests can read it\r\n      if (typeof window !== 'undefined' && (window as any).__WONKY_LAST_ERROR__ == null) {\r\n        // We can't access the error value here, but set a flag to help tests\r\n        (window as any).__WONKY_LAST_ERROR__ = (window as any).__WONKY_LAST_ERROR__ || { message: 'Unknown React render error' };\r\n      }\r\n    } catch { /* ignore */ }\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error: Error, info: React.ErrorInfo) {\r\n    // Conservative logging; this is intentionally direct and actionable.\r\n    try { logError('[ErrorBoundary] Uncaught error:', error, info); } catch { /* ignore */ }\r\n    try {\r\n      if (typeof window !== 'undefined') {\r\n        // Expose last error to Playwright/E2E so tests can inspect error details\r\n        (window as any).__WONKY_LAST_ERROR__ = { message: error?.message, stack: error?.stack, info };\r\n        try { window.localStorage.setItem('wonky-last-error', JSON.stringify({ message: error?.message, stack: error?.stack, info })); } catch { /* ignore */ }\r\n      }\r\n    } catch { /* ignore */ }\r\n    // TODO: forward to telemetry or log store\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <main role=\"alert\" className=\"p-8 text-center\">\r\n          <h2 className=\"text-2xl font-bold\">System Error</h2>\r\n          <p className=\"mt-4\">Something went wrong. Open Command Center to recover your session.</p>\r\n          {/* Render last error details when available so Playwright/CIs can capture the stack trace */}\r\n          {(typeof window !== 'undefined') && (window as any).__WONKY_LAST_ERROR__ ? (\r\n            <pre data-testid=\"wonky-last-error\" className=\"mt-4 text-left text-xs break-words\">{JSON.stringify((window as any).__WONKY_LAST_ERROR__, null, 2)}</pre>\r\n          ) : null}\r\n        </main>\r\n      );\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\nexport default ErrorBoundary;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\EssentialsTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\EventHorizonPrep.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ExecutiveDysfunctionProtocol.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":40,"column":98,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1836,1946],"text":"The freeze is not a moral failure. It&apos;s a systems failure. This protocol is the emergency fix. Now execute it."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1836,1946],"text":"The freeze is not a moral failure. It&lsquo;s a systems failure. This protocol is the emergency fix. Now execute it."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1836,1946],"text":"The freeze is not a moral failure. It&#39;s a systems failure. This protocol is the emergency fix. Now execute it."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1836,1946],"text":"The freeze is not a moral failure. It&rsquo;s a systems failure. This protocol is the emergency fix. Now execute it."},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport ContentCard from './ContentCard';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst ExecutiveDysfunctionProtocol: React.FC = () => {\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Executive Dysfunction Protocol');\r\n  \r\n  const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n\r\n  const renderSection = (section: (typeof protocolData)[0]) => (\r\n    <section key={section.id} id={section.id}>\r\n      <ContentCard title={section.title}>\r\n        {section.description && <p className=\"text-lg text-text-light text-opacity-90 mb-4\">{section.description}</p>}\r\n        {section.items && (\r\n          <ul className=\"list-none space-y-2\">\r\n            {section.items.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n          </ul>\r\n        )}\r\n      </ContentCard>\r\n    </section>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">EXECUTIVE DYSFUNCTION EMERGENCY PROTOCOL (IPI-ED)</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          <strong>Trigger:</strong> Everything feels impossible. You are frozen. <strong>Purpose:</strong> An emergency reboot to restore basic operational capacity.\r\n        </p>\r\n      </header>\r\n\r\n      <QuickJump sections={sections} />\r\n\r\n      <div className=\"space-y-6\">\r\n        {protocolData.map(renderSection)}\r\n        <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n          <p className=\"text-xl font-bold text-accent-blue\">The freeze is not a moral failure. It's a systems failure. This protocol is the emergency fix. Now execute it.</p>\r\n        </footer>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ExecutiveDysfunctionProtocol;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\FamilyStructureModeProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\FoundationalProtocols.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GameMasterDashboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":189,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11050,11051],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11050,11051],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11050,11051],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11050,11051],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":189,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[11063,11064],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[11063,11064],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[11063,11064],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[11063,11064],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":205,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[11547,11679],"text":"\r\n                    Administrative control center for managing the children&apos;s quests, rewards, and achievements.\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[11547,11679],"text":"\r\n                    Administrative control center for managing the children&lsquo;s quests, rewards, and achievements.\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[11547,11679],"text":"\r\n                    Administrative control center for managing the children&#39;s quests, rewards, and achievements.\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[11547,11679],"text":"\r\n                    Administrative control center for managing the children&rsquo;s quests, rewards, and achievements.\r\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState } from 'react';\r\nimport GemAdminModule from './modules/GemAdminModule.js';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from './ContentCard.js';\r\nimport { ALL_GEMS, REWARD_TIERS } from '../constants.js';\r\n\r\nconst QuestManagement = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { quests } = appState;\r\n\r\n    // Form state\r\n    const [title, setTitle] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [steps, setSteps] = useState(['']);\r\n    const [gemRewardId, setGemRewardId] = useState('quest-bronze');\r\n    const [assignedTo, setAssignedTo] = useState('both');\r\n\r\n    const questRewardGems = ALL_GEMS.filter(g => g.id.startsWith('quest-'));\r\n\r\n    const handleAddStep = () => setSteps([...steps, '']);\r\n    const handleStepChange = (index: number, value: string) => {\r\n        const newSteps = [...steps];\r\n        newSteps[index] = value;\r\n        setSteps(newSteps);\r\n    };\r\n    const handleRemoveStep = (index: number) => {\r\n        setSteps(steps.filter((_, i) => i !== index));\r\n    };\r\n\r\n    const handleCreateQuest = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const filteredSteps = steps.filter(s => s.trim() !== '');\r\n        if (!title.trim() || !description.trim() || filteredSteps.length === 0) return;\r\n\r\n        dispatch({\r\n            type: 'ADD_QUEST',\r\n            payload: { title, description, steps: filteredSteps, gemRewardId, assignedTo }\r\n        });\r\n        \r\n        // Reset form\r\n        setTitle('');\r\n        setDescription('');\r\n        setSteps(['']);\r\n        setGemRewardId('quest-bronze');\r\n        setAssignedTo('both');\r\n    };\r\n    \r\n    const handleDeleteQuest = (id: string) => {\r\n      if (window.confirm(\"Are you sure you want to permanently delete this quest?\")) {\r\n        dispatch({ type: 'DELETE_QUEST', payload: id });\r\n      }\r\n    };\r\n    \r\n    const handleApproveQuest = (id: string) => {\r\n        dispatch({ type: 'UPDATE_QUEST_STATUS', payload: { questId: id, status: 'complete' } });\r\n    };\r\n\r\n    const questsInReview = quests.filter(q => q.status === 'review');\r\n    const activeQuests = quests.filter(q => q.status === 'active');\r\n\r\n    return (\r\n        <ContentCard title=\"Quest Board\" titleClassName=\"text-accent-blue text-2xl\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                {/* Create Quest Form */}\r\n                 <details className=\"space-y-3 p-4 bg-gray-800 rounded-md border border-gray-700\">\r\n                    <summary className=\"cursor-pointer text-lg font-bold text-accent-green\">Create New Quest</summary>\r\n                    <form onSubmit={handleCreateQuest} className=\"space-y-3 pt-3 border-t border-gray-700\">\r\n                        <input type=\"text\" value={title} onChange={e => setTitle(e.target.value)} placeholder=\"Quest Title\" className=\"w-full p-2 bg-gray-900 border border-gray-600 rounded\" required />\r\n                        <textarea value={description} onChange={e => setDescription(e.target.value)} placeholder=\"Description\" rows={3} className=\"w-full p-2 bg-gray-900 border border-gray-600 rounded\" required />\r\n                        <div>\r\n                            <h4 className=\"text-sm font-semibold mb-1\">Steps:</h4>\r\n                            <div className=\"space-y-2\">\r\n                                {steps.map((step, index) => (\r\n                                    <div key={index} className=\"flex items-center gap-2\">\r\n                                        <input type=\"text\" value={step} onChange={e => handleStepChange(index, e.target.value)} className=\"flex-grow p-2 bg-gray-900 border border-gray-600 rounded\" placeholder={`Step ${index + 1}`} />\r\n                                        {steps.length > 1 && <button type=\"button\" onClick={() => handleRemoveStep(index)} className=\"p-1 bg-red-800/80 rounded\">&times;</button>}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                            <button type=\"button\" onClick={handleAddStep} className=\"mt-2 text-xs text-accent-blue hover:underline\">+ Add Step</button>\r\n                        </div>\r\n                        <div className=\"flex gap-2\">\r\n                            <select value={gemRewardId} onChange={e => setGemRewardId(e.target.value)} className=\"w-1/2 p-2 bg-gray-900 border border-gray-600 rounded\">\r\n                                {questRewardGems.map(gem => <option key={gem.id} value={gem.id}>{gem.label}</option>)}\r\n                            </select>\r\n                            <select value={assignedTo} onChange={e => setAssignedTo(e.target.value)} className=\"w-1/2 p-2 bg-gray-900 border border-gray-600 rounded\">\r\n                                <option value=\"both\">Both Kids</option>\r\n                                <option value=\"willow\">Willow</option>\r\n                                <option value=\"sebastian\">Sebastian</option>\r\n                            </select>\r\n                        </div>\r\n                        <button type=\"submit\" className=\"w-full p-2 bg-accent-blue text-background-dark font-bold rounded\">Create Quest</button>\r\n                    </form>\r\n                </details>\r\n\r\n                {/* Active & Review Quests */}\r\n                <div className=\"space-y-4\">\r\n                     <div>\r\n                        <h3 className=\"text-lg font-bold text-accent-warning\">Quests for Review ({questsInReview.length})</h3>\r\n                        <div className=\"space-y-2 max-h-40 overflow-y-auto pr-2\">\r\n                            {questsInReview.map(q => (\r\n                                <div key={q.id} className=\"p-2 bg-gray-800 rounded-md\">\r\n                                    <p className=\"font-semibold\">{q.title} ({q.assignedTo})</p>\r\n                                    <button onClick={() => handleApproveQuest(q.id)} className=\"text-xs text-accent-green hover:underline\">Approve & Grant Reward</button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                     <div>\r\n                        <h3 className=\"text-lg font-bold text-accent-teal\">Active Quests ({activeQuests.length})</h3>\r\n                        <div className=\"space-y-2 max-h-40 overflow-y-auto pr-2\">\r\n                             {activeQuests.map(q => (\r\n                                <div key={q.id} className=\"p-2 bg-gray-800 rounded-md flex justify-between items-center\">\r\n                                    <p className=\"font-semibold\">{q.title} ({q.assignedTo})</p>\r\n                                    <button onClick={() => handleDeleteQuest(q.id)} className=\"text-xs text-red-500 hover:underline\">Delete</button>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nconst RedemptionHub = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { redeemedRewards, acknowledgedRedemptions, fulfillmentLog } = appState;\r\n    const [notes, setNotes] = useState<Record<string, string>>({});\r\n\r\n    const handleAcknowledge = (persona: 'willow' | 'sebastian', threshold: number, rewardTitle: string) => {\r\n        const redemptionId = `${persona}-${threshold}`;\r\n        dispatch({\r\n            type: 'ACKNOWLEDGE_REDEMPTION',\r\n            payload: { persona, threshold, notes: notes[redemptionId] || '', rewardTitle }\r\n        });\r\n    };\r\n\r\n    const pendingRedemptions = (['willow', 'sebastian'] as const).flatMap(persona => {\r\n        const redeemed = redeemedRewards[persona] || [];\r\n        const acknowledged = acknowledgedRedemptions[persona] || [];\r\n        return redeemed\r\n            .filter(threshold => !acknowledged.includes(threshold))\r\n            .map(threshold => ({\r\n                persona,\r\n                threshold,\r\n                tier: REWARD_TIERS.find(t => t.threshold === threshold),\r\n            }));\r\n    });\r\n\r\n    return (\r\n        <ContentCard data-testid=\"redemption-hub\" title=\"Redemption Hub\" titleClassName=\"text-accent-purple text-2xl\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                    <h3 data-testid=\"pending-redemptions\" className=\"text-lg font-bold text-accent-warning mb-2\">Pending Redemptions ({pendingRedemptions.length})</h3>\r\n                    <div className=\"space-y-3 max-h-80 overflow-y-auto pr-2\">\r\n                        {pendingRedemptions.map(({ persona, threshold, tier }) => {\r\n                            if (!tier) return null;\r\n                            const redemptionId = `${persona}-${threshold}`;\r\n                            return (\r\n                                <div key={redemptionId} className=\"p-3 bg-gray-800 rounded-md border border-yellow-700\">\r\n                                    <p className=\"font-bold\">{tier.emoji} {tier.title} for {persona.charAt(0).toUpperCase() + persona.slice(1)}</p>\r\n                                    <textarea\r\n                                        value={notes[redemptionId] || ''}\r\n                                        onChange={e => setNotes(prev => ({ ...prev, [redemptionId]: e.target.value }))}\r\n                                        placeholder=\"Add fulfillment notes...\"\r\n                                        rows={2}\r\n                                        className=\"w-full text-sm p-1 my-2 bg-gray-900 border border-gray-600 rounded\"\r\n                                        data-testid={`redemption-note-${redemptionId}`}\r\n                                    />\r\n                                    <button onClick={() => handleAcknowledge(persona, threshold, tier.title)} className=\"w-full p-2 bg-accent-green text-background-dark font-bold rounded\" data-testid={`mark-fulfilled-${redemptionId}`}>\r\n                                        Mark as Fulfilled\r\n                                    </button>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {pendingRedemptions.length === 0 && <p className=\"text-sm text-gray-400\">No rewards waiting for fulfillment.</p>}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <h3 className=\"text-lg font-bold text-accent-green mb-2\">Fulfillment Log</h3>\r\n                    <div className=\"space-y-2 max-h-80 overflow-y-auto pr-2\">\r\n                        {fulfillmentLog.map(item => (\r\n                            <div key={item.id} className=\"p-2 bg-gray-800 rounded-md text-sm\">\r\n                                <p className=\"font-semibold\">{item.rewardTitle} for {item.persona}</p>\r\n                                <p className=\"text-xs text-gray-400\">Fulfilled on {new Date(item.fulfilledAt).toLocaleDateString()}</p>\r\n                                {item.notes && <p className=\"text-xs italic mt-1\">\"{item.notes}\"</p>}\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nconst GameMasterDashboard = () => {\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Game Master Hub</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80\">\r\n                    Administrative control center for managing the children's quests, rewards, and achievements.\r\n                </p>\r\n            </header>\r\n            <div className=\"space-y-6\">\r\n                <QuestManagement />\r\n                <RedemptionHub />\r\n                <GemAdminModule persona=\"willow\" />\r\n                <GemAdminModule persona=\"sebastian\" />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n// FIX: Changed the default export to be the main dashboard component.\r\nexport default GameMasterDashboard;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GardenView.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":58,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3458,3565],"text":"\r\n                    A living dashboard reflecting your system&apos;s health and connections.\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3458,3565],"text":"\r\n                    A living dashboard reflecting your system&lsquo;s health and connections.\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3458,3565],"text":"\r\n                    A living dashboard reflecting your system&#39;s health and connections.\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3458,3565],"text":"\r\n                    A living dashboard reflecting your system&rsquo;s health and connections.\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":55,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":58,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4519,4522],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4519,4522],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":87,"column":86,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":87,"endColumn":89,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4550,4553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4550,4553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":93,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5104,5113],"text":"&apos;s Sprout"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5104,5113],"text":"&lsquo;s Sprout"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5104,5113],"text":"&#39;s Sprout"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5104,5113],"text":"&rsquo;s Sprout"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":105,"column":81,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5701,5710],"text":"&apos;s Sprout"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5701,5710],"text":"&lsquo;s Sprout"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5701,5710],"text":"&#39;s Sprout"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5701,5710],"text":"&rsquo;s Sprout"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":121,"column":28,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6669,6695],"text":"&apos;s Dashboard\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6669,6695],"text":"&lsquo;s Dashboard\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6669,6695],"text":"&#39;s Dashboard\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6669,6695],"text":"&rsquo;s Dashboard\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { useSystemHealth } from '../hooks/useSystemHealth.js';\r\nimport { useNeuroPrefs } from '@contexts/NeurodivergentPreferencesContext';\r\n\r\nconst LivingSprout = () => {\r\n    const { score, diagnostics, stateColor, stateDescription, sproutState } = useSystemHealth();\r\n    const { dispatch } = useAppState();\r\n    const { prefs } = useNeuroPrefs();\r\n\r\n    const SproutIcon = () => (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" className={`h-32 w-32 ${sproutState === 'healthy' && !prefs.reduceAnimations ? 'animate-glow' : ''} ${stateColor}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M12 20V10M12 10C10 10 8 8 8 6s2-4 4-4 4 2 4 4-2 4-4 4z\" className={`${sproutState === 'wilted' && !prefs.reduceAnimations ? 'rotate-6' : 'rotate-0'} origin-bottom transition-transform duration-500`} />\r\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"1.5\" d=\"M12 10c2 0 4-2 4-4\" />\r\n        </svg>\r\n    );\r\n\r\n    const borderColorClass = sproutState === 'healthy' ? 'border-sanctuary-accent' : sproutState === 'wilted' ? 'border-sanctuary-warning' : 'border-sanctuary-border';\r\n\r\n    return (\r\n        <div className={`bg-sanctuary-card rounded-lg shadow-md p-6 border-2 flex flex-col items-center ${borderColorClass}`}>\r\n            <h3 className=\"text-3xl font-bold text-sanctuary-accent mb-2\">My Sprout</h3>\r\n            <div className=\"flex items-center gap-4 my-4\">\r\n                 <SproutIcon />\r\n                 <div className=\"text-center\">\r\n                    <p className={`text-6xl font-bold ${stateColor}`}>{score}</p>\r\n                    <p className={`font-semibold ${stateColor}`}>{stateDescription}</p>\r\n                 </div>\r\n            </div>\r\n            <div className=\"w-full text-left bg-sanctuary-bg font-mono p-4 rounded-md border border-sanctuary-border mb-4 text-xs h-40 overflow-y-auto\">\r\n                <h4 className=\"font-bold text-sanctuary-focus mb-2 blinking-cursor\">SYSTEM LOG:</h4>\r\n                <ul className=\"list-none space-y-1\">\r\n                    {diagnostics.slice(0, 5).map((d, i) => (\r\n                        <li key={i} className={`flex items-start ${d.type === 'negative' ? 'text-yellow-300' : 'text-green-400'}`}>\r\n                            <span className=\"mr-2 flex-shrink-0\">{d.type === 'negative' ? '[WARN]' : '[ OK ]'}</span>\r\n                            <span>{d.message}</span>\r\n                        </li>\r\n                    ))}\r\n                    {diagnostics.length === 0 && <li className=\"text-gray-500\">[INFO] No significant data points for analysis.</li>}\r\n                </ul>\r\n            </div>\r\n            <button\r\n                onClick={() => dispatch({ type: 'SET_VIEW', payload: 'operations-control' })}\r\n                className=\"w-full px-6 py-3 bg-sanctuary-focus text-sanctuary-bg rounded-md hover:bg-blue-400 font-semibold\"\r\n            >\r\n                Go to Ops Control\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst GardenView = () => {\r\n    return (\r\n        <div className=\"max-w-5xl mx-auto\">\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-sanctuary-accent mb-4\">Your Sprout Garden</h1>\r\n                <p className=\"text-lg text-sanctuary-text-secondary\">\r\n                    A living dashboard reflecting your system's health and connections.\r\n                </p>\r\n            </header>\r\n            \r\n            <section className=\"mb-12\">\r\n                 <div className=\"max-w-md mx-auto\">\r\n                    <LivingSprout />\r\n                 </div>\r\n            </section>\r\n\r\n            <section>\r\n                <h2 className=\"text-3xl font-extrabold text-accent-teal mb-6 text-center\">Other Sprouts</h2>\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    <SproutOverview persona=\"willow\" />\r\n                    <SproutOverview persona=\"sebastian\" />\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\ninterface SproutOverviewProps {\r\n    persona: 'willow' | 'sebastian';\r\n}\r\n\r\nconst SproutOverview: React.FC<SproutOverviewProps> = ({ persona }) => {\r\n    const { appState } = useAppState();\r\n    const name = persona === 'willow' ? 'Willow' : 'Sebastian';\r\n\r\n    const familyLogEntries = (appState ? (appState as any).familyLogEntries : []) as any[];\r\n    const recentLogEntry = (familyLogEntries ?? []).filter(e => e.persona === persona).sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime())[0];\r\n    const latestLocation = persona === 'willow' ? appState?.kidsWillowLocation : appState?.kidsSebastianLocation;\r\n    if (!appState) {\r\n        return (\r\n            <div className=\"bg-sanctuary-card rounded-lg shadow-md p-6 border-2 border-sanctuary-border flex flex-col items-center\">\r\n                <h3 className=\"text-xl font-bold text-sanctuary-accent mb-2\">{name}'s Sprout</h3>\r\n                <p className=\"text-gray-400\">Waiting for family data...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    const score = Math.floor(Math.random() * 50) + 50; // Mock score for now\r\n    const stateColor = score > 70 ? 'text-accent-green' : 'text-sanctuary-warning';\r\n    const stateDescription = score > 70 ? 'Healthy' : 'Needs Attention';\r\n\r\n    return (\r\n        <div className=\"bg-sanctuary-card rounded-lg shadow-md p-6 border-2 border-sanctuary-border flex flex-col items-center\">\r\n            <h3 className=\"text-2xl font-bold text-sanctuary-accent mb-3\">{name}'s Sprout</h3>\r\n            <div className=\"flex items-center gap-4 my-4\">\r\n                <span className={`text-5xl font-bold ${stateColor}`}>{score}</span>\r\n                <p className={`font-semibold ${stateColor}`}>{stateDescription}</p>\r\n            </div>\r\n            <div className=\"w-full text-left bg-sanctuary-bg font-mono p-4 rounded-md border border-sanctuary-border text-xs mb-4\">\r\n                <p className=\"font-bold text-sanctuary-focus mb-2\">Status Report:</p>\r\n                <ul className=\"list-none space-y-1\">\r\n                    <li>Location: {latestLocation || 'Unknown'}</li>\r\n                    {recentLogEntry && <li>Latest Update: {recentLogEntry.content}</li>}\r\n                </ul>\r\n            </div>\r\n            <button\r\n                onClick={() => {}}\r\n                className=\"w-full px-4 py-2 bg-sanctuary-focus text-sanctuary-bg rounded-md hover:bg-blue-400 font-semibold\"\r\n            >\r\n                View {name}'s Dashboard\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GardenView;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GemCollector.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GenericChecklistModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'sourceDocument' is missing in props validation","line":7,"column":35,"nodeType":"Property","messageId":"missingPropType","endLine":7,"endColumn":49}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ChecklistItem from './ChecklistItem.js';\r\nimport ContentCard from './ContentCard.js';\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.js';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\nconst GenericChecklistModule = ({ sourceDocument }) => {\r\n    const checklistData = ALL_CHECKLIST_DATA.filter(section => section.sourceDocument === sourceDocument);\r\n\r\n    if (!checklistData || checklistData.length === 0) {\r\n        return (\r\n            <ContentCard title={`Checklist: ${sourceDocument}`}>\r\n                <p>No checklist data found for this protocol.</p>\r\n            </ContentCard>\r\n        );\r\n    }\r\n\r\n    const renderSection = (section, level = 0) => {\r\n        const titleClass = level === 0 ? \"text-accent-teal text-xl\" : \"text-accent-blue text-lg\";\r\n        const containerClass = level > 0 ? \"border-l-4 border-gray-700 pl-4 mt-4\" : \"\";\r\n\r\n        return (\r\n            <div key={section.id} className={containerClass}>\r\n                <h3 className={`font-bold mb-2 ${titleClass}`}>{section.title}</h3>\r\n                {section.description && <div className=\"text-sm text-gray-400 mb-2\"><SecureMarkdown content={section.description} /></div>}\r\n                {section.items && (\r\n                    <ul className=\"list-none\">\r\n                        {section.items.map(item => (\r\n                            <ChecklistItem\r\n                                key={item.id}\r\n                                id={item.id}\r\n                                gemAwardId={item.gemAwardId}\r\n                                gemRecipient={item.gemRecipient}\r\n                                achievementAwardId={item.achievementAwardId}\r\n                                large={item.large}\r\n                            >\r\n                                {item.label}\r\n                            </ChecklistItem>\r\n                        ))}\r\n                    </ul>\r\n                )}\r\n                {section.subSections && (\r\n                    <div className=\"space-y-4 mt-4\">\r\n                        {section.subSections.map(subSection => renderSection(subSection, level + 1))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <ContentCard title={`Checklist: ${sourceDocument}`}>\r\n            <div className=\"space-y-4 max-h-96 overflow-y-auto pr-2\">\r\n                {checklistData.map(section => renderSection(section))}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default GenericChecklistModule;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GrandmaHelper.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'lastSanitized' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":23},{"ruleId":"no-useless-escape","severity":2,"message":"Unnecessary escape character: \\..","line":24,"column":35,"nodeType":"Literal","messageId":"unnecessaryEscape","endLine":24,"endColumn":36,"suggestions":[{"messageId":"removeEscape","fix":{"range":[1193,1194],"text":""},"desc":"Remove the `\\`. This maintains the current functionality."},{"messageId":"escapeBackslash","fix":{"range":[1193,1193],"text":"\\"},"desc":"Replace the `\\` with `\\\\` to include the actual backslash character."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'e' is defined but never used.","line":48,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":48,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2461,2464],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2461,2464],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useRef, useState } from 'react';\r\nimport { getGrandmaAdvice } from '@services/geminiService';\r\n\r\nconst GrandmaHelper: React.FC = () => {\r\n  const [query, setQuery] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [responseText, setResponseText] = useState('');\r\n  const [lastSanitized, setLastSanitized] = useState('');\r\n  const [piiWarning, setPiiWarning] = useState('');\r\n  const [animate, setAnimate] = useState(false);\r\n  const responseRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const sanitizeInput = (raw: string): { sanitized: string; redacted: boolean } => {\r\n    if (!raw) return { sanitized: '', redacted: false };\r\n    let sanitized = raw;\r\n    let redacted = false;\r\n    // Email\r\n    const emailRegex = /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}\\b/g;\r\n    if (emailRegex.test(sanitized)) { sanitized = sanitized.replace(emailRegex, '[EMAIL REDACTED]'); redacted = true; }\r\n    // URLs\r\n    const urlRegex = /https?:\\/\\/\\S+|www\\.\\S+/g;\r\n    if (urlRegex.test(sanitized)) { sanitized = sanitized.replace(urlRegex, '[URL REDACTED]'); redacted = true; }\r\n    // Phone numbers (simple)\r\n    const phoneRegex = /\\+?\\d[\\d\\-\\.\\s]{6,}\\d/g;\r\n    if (phoneRegex.test(sanitized)) { sanitized = sanitized.replace(phoneRegex, '[PHONE REDACTED]'); redacted = true; }\r\n    // SSN-like\r\n    const ssnRegex = /\\b\\d{3}-\\d{2}-\\d{4}\\b/g;\r\n    if (ssnRegex.test(sanitized)) { sanitized = sanitized.replace(ssnRegex, '[REDACTED]'); redacted = true; }\r\n    return { sanitized, redacted };\r\n  };\r\n\r\n  const handleAsk = async () => {\r\n    if (!query.trim()) return;\r\n    const { sanitized, redacted } = sanitizeInput(query);\r\n    if (redacted) {\r\n      setPiiWarning('Sensitive info removed for your safety.');\r\n    } else {\r\n      setPiiWarning('');\r\n    }\r\n    setLastSanitized(sanitized);\r\n    setLoading(true);\r\n    setResponseText('');\r\n    try {\r\n      const result = await getGrandmaAdvice(sanitized);\r\n      setResponseText(result);\r\n      setAnimate(true);\r\n      setTimeout(() => setAnimate(false), 900);\r\n    } catch (e) {\r\n      setResponseText('Grandma is having trouble right now. Try again later. Love, Grandma.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (responseRef.current && animate) {\r\n      responseRef.current.scrollIntoView({ behavior: 'smooth', block: 'nearest' });\r\n    }\r\n  }, [animate]);\r\n\r\n  useEffect(() => {\r\n    const handler = (e: any) => {\r\n      if (e?.detail?.value) {\r\n        setQuery(e.detail.value);\r\n        setTimeout(() => {\r\n          const el = document.getElementById('grandma-input');\r\n          if (el) (el as HTMLElement).focus();\r\n        }, 50);\r\n      }\r\n    };\r\n    window.addEventListener('set-grandma-query', handler);\r\n    return () => window.removeEventListener('set-grandma-query', handler);\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex items-center space-x-4\">\r\n      <div className=\"flex-shrink-0\">\r\n        <img\r\n          className=\"h-16 w-16 rounded-full\"\r\n          src=\"https://i.ibb.co/L8T6P1t/grandma.png\" \r\n          alt=\"Grandma AI\"\r\n        />\r\n      </div>\r\n      <div className=\"font-mono\">\r\n        <h3 className=\"text-lg font-bold text-accent-500\">ASK GRANDMA</h3>\r\n        <p className=\"text-sm text-text-muted\">MARGIE FAY KATEN (1925-2025)</p>\r\n      </div>\r\n      <div className=\"mt-4\">\r\n        <div className=\"relative\">\r\n          <input\r\n            id=\"grandma-input\"\r\n            aria-label=\"Ask Grandma input\"\r\n            value={query}\r\n            onChange={(e) => setQuery(e.target.value)}\r\n            placeholder=\"What's overwhelming you, honey?\"\r\n            className=\"w-full px-4 py-3 rounded-lg bg-background-dark text-text-light placeholder-pink-500/30 focus:outline-none focus:ring-2 focus:ring-accent-500 pr-28\"\r\n          />\r\n          <button\r\n            aria-label=\"Ask Grandma\"\r\n            className=\"absolute right-2 top-1/2 -translate-y-1/2 px-3 py-2 bg-accent-600 text-white font-bold rounded shadow-md hover:bg-accent-700 transition-colors\"\r\n            onClick={handleAsk}\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'TRANSMITTING...' : 'ASK'}\r\n          </button>\r\n        </div>\r\n        {piiWarning && <p className=\"mt-2 text-xs text-alert-orange font-mono\">{piiWarning}</p>}\r\n        {responseText && (\r\n          <div\r\n            ref={responseRef}\r\n            className={`mt-4 p-4 rounded-lg bg-surface-900 border border-surface-700 ${animate ? 'animate-pulse' : ''}`}\r\n          >\r\n            <p className=\"whitespace-pre-wrap\">{responseText}</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GrandmaHelper;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\GroundingRose.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Header.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":68,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":71,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2973,2976],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2973,2976],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect, useRef } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ViewType } from '../types';\r\n\r\ninterface HeaderProps {\r\n  openResetModal: () => void;\r\n}\r\n\r\nconst NavItem: React.FC<{ label: string; view: ViewType; icon?: string; dataTestId?: string }>\r\n  = ({ label, view, icon, dataTestId }) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const isActive = appState.view === view;\r\n\r\n    return (\r\n        <button\r\n            onClick={() => dispatch({ type: 'SET_VIEW', payload: view })}\r\n            className={`px-3 py-2 rounded-md text-sm font-semibold transition-colors duration-200 flex items-center gap-2 ${\r\n                isActive ? 'bg-accent-blue text-background-dark' : 'text-text-light hover:bg-gray-700'\r\n            }`}\r\n              {...(dataTestId ? { 'data-testid': dataTestId } : {})}\r\n            aria-current={isActive ? 'page' : undefined}\r\n        >\r\n            {icon && <span className=\"text-lg\">{icon}</span>}\r\n            <span className=\"truncate\">{label}</span>\r\n        </button>\r\n    );\r\n};\r\n\r\ninterface DropdownMenuProps {\r\n    openResetModal: () => void;\r\n    onItemClick: (view: ViewType) => void;\r\n}\r\n\r\n\r\nconst DropdownMenu: React.FC<DropdownMenuProps> = ({ openResetModal, onItemClick }) => {\r\n    const dropdownItems = [\r\n      { label: 'Flight Protocol Vault', view: 'sop-vault' as ViewType, dataTestId: 'nav-sop-vault' },\r\n        { label: 'Weekly Review', view: 'weekly-review' as ViewType },\r\n        { label: 'System Integration', view: 'system-integration' as ViewType },\r\n        { label: 'Manifesto', view: 'manifesto' as ViewType },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"absolute right-0 mt-2 w-56 origin-top-right bg-card-dark rounded-md shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none border border-gray-700 z-20\">\r\n                <div className=\"py-1\" role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"options-menu\">\r\n                {dropdownItems.map(item => (\r\n                    <button\r\n                        key={item.view}\r\n                        onClick={() => onItemClick(item.view)}\r\n                        className=\"block w-full text-left px-4 py-2 text-sm text-text-light hover:bg-gray-700\"\r\n                        role=\"menuitem\"\r\n                      {...(item.dataTestId ? { 'data-testid': item.dataTestId } : {})}\r\n                    >\r\n                        {item.label}\r\n                    </button>\r\n                ))}\r\n                <div className=\"border-t border-gray-700 my-1\"></div>\r\n                <button\r\n                    onClick={openResetModal}\r\n                    className=\"block w-full text-left px-4 py-2 text-sm text-accent-blue hover:bg-gray-700\"\r\n                    role=\"menuitem\"\r\n                >\r\n                    System Reset\r\n                </button>\r\n                <button\r\n                  onClick={() => onItemClick('neuro-onboarding' as any)}\r\n                  className=\"block w-full text-left px-4 py-2 text-sm text-accent-blue hover:bg-gray-700\"\r\n                  role=\"menuitem\"\r\n                >\r\n                  Re-run Onboarding\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst Header: React.FC<HeaderProps> = ({ openResetModal }) => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { isModMode } = appState;\r\n  const modSwitchRef = useRef<HTMLButtonElement | null>(null);\r\n  const [isDropdownOpen, setDropdownOpen] = useState(false);\r\n  const dropdownRef = useRef<HTMLDivElement>(null);\r\n  const mobileDropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n  const handleToggleModMode = () => {\r\n    dispatch({ type: 'TOGGLE_MOD_MODE' });\r\n  };\r\n  \r\n  const handleDropdownToggle = () => setDropdownOpen(prev => !prev);\r\n\r\n  const handleDropdownItemClick = (view: ViewType) => {\r\n    dispatch({ type: 'SET_VIEW', payload: view });\r\n    setDropdownOpen(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      // The original code had two separate `if` statements. If a click was inside\r\n      // the desktop dropdown but outside the mobile one, the second `if` would\r\n      // incorrectly close the menu before the click event could be processed.\r\n      // Combining them with `&&` ensures the menu only closes if the click is\r\n      // outside of BOTH dropdown containers.\r\n      if (\r\n        dropdownRef.current && !dropdownRef.current.contains(event.target as Node) &&\r\n        mobileDropdownRef.current && !mobileDropdownRef.current.contains(event.target as Node)\r\n        ) {\r\n        setDropdownOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  return (\r\n    <header className={`py-3 px-4 md:px-6 bg-sanctuary-card shadow-md sticky top-0 z-20 border-b border-sanctuary-border transition-shadow no-print ${isModMode ? 'shadow-lg shadow-sanctuary-focus/20' : ''}`}>\r\n      <div className=\"container mx-auto flex items-center justify-between gap-4\">\r\n        <button onClick={() => dispatch({ type: 'SET_VIEW', payload: 'command-center' })} className=\"text-xl md:text-2xl font-bold text-accent-teal flex-shrink-0\">\r\n          ≡ƒî▒ Wonky Sprout OS\r\n        </button>\r\n\r\n        <nav className=\"hidden md:flex items-center gap-2 flex-wrap\">\r\n              <NavItem label=\"The Cockpit\" view=\"command-center\" dataTestId=\"nav-command-center\" />\r\n            <NavItem label=\"Daily Tracker\" view=\"all-checklists\" />\r\n            <NavItem label=\"Little Sprouts\" view=\"kids-corner\" />\r\n            <NavItem label=\"Parenting\" view=\"co-parenting-protocol\" />\r\n\r\n            <div className=\"relative\" ref={dropdownRef}>\r\n                 <button\r\n                    onClick={handleDropdownToggle}\r\n                  id=\"options-menu\"\r\n                  data-testid=\"nav-system\"\r\n                  className={`px-3 py-2 rounded-md text-sm font-semibold transition-colors duration-200 flex items-center gap-1 ${\r\n                        isDropdownOpen ? 'bg-gray-700' : 'text-text-light hover:bg-gray-700'\r\n                    }`}\r\n                >\r\n                    System\r\n                    <svg className={`w-4 h-4 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg>\r\n                </button>\r\n                {isDropdownOpen && <DropdownMenu onItemClick={handleDropdownItemClick} openResetModal={() => { setDropdownOpen(false); openResetModal(); }} />}\r\n            </div>\r\n        </nav>\r\n        \r\n        <div className=\"flex items-center space-x-2 flex-shrink-0\">\r\n            <span className={`text-sm font-semibold hidden sm:inline ${isModMode ? 'text-accent-blue' : 'text-text-light'}`}>Mod Mode</span>\r\n            <button\r\n              role=\"switch\"\r\n              ref={modSwitchRef}\r\n              aria-checked=\"false\"\r\n              aria-label={isModMode ? 'Disable Mod Mode' : 'Enable Mod Mode'}\r\n              onClick={handleToggleModMode}\r\n              className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-card-dark focus:ring-accent-blue ${\r\n                isModMode ? 'bg-accent-blue' : 'bg-gray-600'\r\n              }`}\r\n            >\r\n              <span\r\n                className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${\r\n                  isModMode ? 'translate-x-6' : 'translate-x-1'\r\n                }`}\r\n              />\r\n            </button>\r\n        </div>\r\n      </div>\r\n       {/* Mobile Navigation */}\r\n      <nav className=\"md:hidden flex items-center gap-2 flex-wrap mt-3 pt-3 border-t border-gray-700\">\r\n             <NavItem label=\"Cockpit\" view=\"command-center\" dataTestId=\"nav-command-center\" />\r\n            <NavItem label=\"Tracker\" view=\"all-checklists\" />\r\n            <NavItem label=\"Sprouts\" view=\"kids-corner\" />\r\n            <NavItem label=\"Parenting\" view=\"co-parenting-protocol\" />\r\n            <div className=\"relative\" ref={mobileDropdownRef}>\r\n                <button\r\n                    onClick={handleDropdownToggle}\r\n                    className={`px-3 py-2 rounded-md text-sm font-semibold transition-colors duration-200 flex items-center gap-1 ${\r\n                        isDropdownOpen ? 'bg-gray-700' : 'text-text-light hover:bg-gray-700'\r\n                    }`}\r\n                >\r\n                    System\r\n                    <svg className={`w-4 h-4 transition-transform ${isDropdownOpen ? 'rotate-180' : ''}`} fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M19 9l-7 7-7-7\"></path></svg>\r\n                </button>\r\n                {isDropdownOpen && <DropdownMenu onItemClick={handleDropdownItemClick} openResetModal={() => { setDropdownOpen(false); openResetModal(); }} />}\r\n            </div>\r\n        </nav>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport { Header };","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\HeadphoneControllerIpi.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Citation' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":9,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":9,"endColumn":15},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":96,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[965,1005],"text":"IPI: &quot;Wonky Sprout\" Headphone Controller"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[965,1005],"text":"IPI: &ldquo;Wonky Sprout\" Headphone Controller"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[965,1005],"text":"IPI: &#34;Wonky Sprout\" Headphone Controller"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[965,1005],"text":"IPI: &rdquo;Wonky Sprout\" Headphone Controller"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":109,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[965,1005],"text":"IPI: \"Wonky Sprout&quot; Headphone Controller"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[965,1005],"text":"IPI: \"Wonky Sprout&ldquo; Headphone Controller"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[965,1005],"text":"IPI: \"Wonky Sprout&#34; Headphone Controller"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[965,1005],"text":"IPI: \"Wonky Sprout&rdquo; Headphone Controller"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":49,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2683,2752],"text":"This is the &quot;fix,\" William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2683,2752],"text":"This is the &ldquo;fix,\" William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2683,2752],"text":"This is the &#34;fix,\" William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2683,2752],"text":"This is the &rdquo;fix,\" William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":49,"column":88,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,&quot; William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,&ldquo; William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,&#34; William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,&rdquo; William. It is the ultimate \"I fix stuff\" project."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":49,"column":118,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate &quot;I fix stuff\" project."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate &ldquo;I fix stuff\" project."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate &#34;I fix stuff\" project."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate &rdquo;I fix stuff\" project."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":49,"column":130,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate \"I fix stuff&quot; project."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate \"I fix stuff&ldquo; project."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate \"I fix stuff&#34; project."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2683,2752],"text":"This is the \"fix,\" William. It is the ultimate \"I fix stuff&rdquo; project."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\nconst Citation: React.FC<{ children: React.ReactNode }> = ({ children }) => (\r\n    <em className=\"text-text-light text-opacity-70 text-sm\"> {children}</em>\r\n);\r\n\r\nconst HeadphoneControllerIpi: React.FC = () => {\r\n    const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Headphone Controller IPI');\r\n    \r\n    const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n    \r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">IPI: \"Wonky Sprout\" Headphone Controller</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80\">\r\n                    A structured protocol to reverse engineer Soundcore headphone Bluetooth commands and build a desktop controller.\r\n                </p>\r\n            </header>\r\n\r\n            <QuickJump sections={sections} />\r\n\r\n            <div className=\"space-y-6\">\r\n                {protocolData.map(section => (\r\n                    <ContentCard key={section.id} title={section.title}>\r\n                        {section.description && <div className=\"text-lg text-text-light text-opacity-90 mb-4\"><SecureMarkdown content={section.description} /></div>}\r\n                        {section.items && (\r\n                            <ul className=\"list-none space-y-2 text-lg\">\r\n                                {section.items.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n                            </ul>\r\n                        )}\r\n                        {section.subSections?.map(sub => (\r\n                            <ContentCard key={sub.id} title={sub.title} titleClassName=\"text-accent-teal text-xl\">\r\n                                <pre className=\"bg-gray-800 p-4 rounded-md text-text-light whitespace-pre-wrap text-sm md:text-base\">\r\n                                    <code>{sub.description}</code>\r\n                                </pre>\r\n                            </ContentCard>\r\n                        ))}\r\n                    </ContentCard>\r\n                ))}\r\n                \r\n                <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n                    <p className=\"text-xl font-bold text-accent-blue\">This is the \"fix,\" William. It is the ultimate \"I fix stuff\" project.</p>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HeadphoneControllerIpi;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ImportConfirmationModal.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":5,"column":36,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":42},{"ruleId":"react/prop-types","severity":2,"message":"'onConfirm' is missing in props validation","line":5,"column":44,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":53},{"ruleId":"react/prop-types","severity":2,"message":"'onCancel' is missing in props validation","line":5,"column":55,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":63}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { Button } from './Button';\r\n\r\nconst ImportConfirmationModal = ({ isOpen, onConfirm, onCancel }) => {\r\n    if (!isOpen) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center\"\r\n            onClick={onCancel}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-labelledby=\"import-modal-title\"\r\n        >\r\n            <div\r\n                className=\"bg-card-dark rounded-lg shadow-2xl p-8 border border-red-700 w-full max-w-lg m-4\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <header className=\"flex justify-between items-center mb-6\">\r\n                    <h2 id=\"import-modal-title\" className=\"text-3xl font-extrabold text-accent-warning\">Confirm State Import</h2>\r\n                    <button onClick={onCancel} className=\"text-gray-400 hover:text-white\" aria-label=\"Close modal\">&times;</button>\r\n                </header>\r\n\r\n                <div className=\"p-4 bg-red-900/30 rounded-lg border border-red-700\">\r\n                    <p className=\"font-bold text-red-300 text-lg\">ΓÜá∩╕Å System Overwrite Warning!</p>\r\n                    <p className=\"text-red-300 mt-2\">\r\n                        You are about to import a new OS state from a backup file. This action will completely and irreversibly overwrite all of your current data, including checklists, tasks, habits, financial records, and knowledge vault entries.\r\n                    </p>\r\n                    <p className=\"text-red-200 mt-3 font-semibold\">\r\n                        This cannot be undone.\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-4 mt-8\">\r\n                    <Button onClick={onCancel} variant=\"secondary\">Cancel</Button>\r\n                    <Button onClick={onConfirm} variant=\"danger\">Confirm & Overwrite</Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ImportConfirmationModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\KidsCorner.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":32,"column":89,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1623,1752],"text":"\r\n                    Your space for checklists, dopamine mining, and sensory rewards. Let&apos;s have a great week!\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1623,1752],"text":"\r\n                    Your space for checklists, dopamine mining, and sensory rewards. Let&lsquo;s have a great week!\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1623,1752],"text":"\r\n                    Your space for checklists, dopamine mining, and sensory rewards. Let&#39;s have a great week!\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1623,1752],"text":"\r\n                    Your space for checklists, dopamine mining, and sensory rewards. Let&rsquo;s have a great week!\r\n                "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { ViewType, } from '../types';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\nconst ProtocolCard: React.FC<{ title: string, description: string, viewId: ViewType, emoji: string }> = ({ title, description, viewId, emoji }) => {\r\n    const { dispatch } = useAppState();\r\n    const setView = (view: ViewType) => dispatch({ type: 'SET_VIEW', payload: view });\r\n\r\n    return (\r\n        <button\r\n            onClick={() => setView(viewId)}\r\n            data-testid={`kid-protocol-${viewId}`}\r\n            className=\"bg-card-dark rounded-lg shadow-md p-6 border border-gray-700 flex flex-col h-full text-left hover:border-accent-teal transition-colors duration-200 transform hover:scale-105\"\r\n        >\r\n            <h3 className=\"text-3xl font-bold text-accent-green mb-3\"><span className=\"mr-3\">{emoji}</span>{title}</h3>\r\n            <p className=\"mb-4 text-text-light text-opacity-80 flex-grow\">{description}</p>\r\n            <span\r\n                className=\"w-full mt-auto p-3 bg-accent-blue bg-opacity-80 text-background-dark rounded-md text-center font-bold\"\r\n            >\r\n                Open Dashboard\r\n            </span>\r\n        </button>\r\n    );\r\n};\r\n\r\nconst KidsCorner: React.FC = () => {\r\n    return (\r\n        <div className=\"max-w-4xl mx-auto\">\r\n            <header className=\"text-center mb-10\" data-testid=\"kids-corner-header\">\r\n                        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\" data-testid=\"kids-corner-heading\">≡ƒî▒ Little Sprouts HQ</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80\">\r\n                    Your space for checklists, dopamine mining, and sensory rewards. Let's have a great week!\r\n                </p>\r\n            </header>\r\n            \r\n            <section className=\"mt-12\">\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                    <ProtocolCard \r\n                        title=\"Willow's Corner\"\r\n                        description=\"All of your special checklists for weekends with Dad and weekdays at Mom's, plus your dopamine mining and sensory rewards!\"\r\n                        viewId=\"willows-corner\"\r\n                        emoji=\"≡ƒî╕\"\r\n                    />\r\n                     <ProtocolCard \r\n                        title=\"Bash's Corner\"\r\n                        description=\"All of your special checklists for weekends with Dad and weekdays at Mom's, plus your dopamine mining and rewards!\"\r\n                        viewId=\"bashs-corner\"\r\n                        emoji=\"≡ƒªû\"\r\n                    />\r\n                </div>\r\n            </section>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default KidsCorner;\r\nexport { KidsCorner };","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\KidsTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\KidsWeekdayProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\KidsWeekendProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\LibraryView.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":4,"column":24,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'subtitle' is missing in props validation","line":4,"column":31,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'items' is missing in props validation","line":4,"column":41,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":46},{"ruleId":"react/prop-types","severity":2,"message":"'renderItem' is missing in props validation","line":4,"column":48,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":58},{"ruleId":"react/prop-types","severity":2,"message":"'searchKeys' is missing in props validation","line":4,"column":60,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":70},{"ruleId":"react/prop-types","severity":2,"message":"'headerActions' is missing in props validation","line":4,"column":72,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":85},{"ruleId":"react/prop-types","severity":2,"message":"'items.filter' is missing in props validation","line":12,"column":22,"nodeType":"Identifier","messageId":"missingPropType","endLine":12,"endColumn":28},{"ruleId":"react/prop-types","severity":2,"message":"'searchKeys.some' is missing in props validation","line":13,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":13,"endColumn":28}],"suppressedMessages":[],"errorCount":8,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useMemo } from 'react';\r\n\r\nconst LibraryView = ({ title, subtitle, items, renderItem, searchKeys, headerActions }) => {\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const filteredItems = useMemo(() => {\r\n        if (!searchTerm.trim()) {\r\n            return items;\r\n        }\r\n        const lowercasedFilter = searchTerm.toLowerCase();\r\n        return items.filter(item => \r\n            searchKeys.some(key => \r\n                item[key] && item[key].toString().toLowerCase().includes(lowercasedFilter)\r\n            )\r\n        );\r\n    }, [items, searchTerm, searchKeys]);\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"mb-8\">\r\n                <div className=\"flex flex-col sm:flex-row justify-between items-center gap-4\">\r\n                    <div className=\"text-center sm:text-left\">\r\n                        <h1 className=\"text-4xl font-extrabold text-accent-teal\">{title}</h1>\r\n                        <p className=\"text-lg text-text-light text-opacity-90 max-w-3xl leading-relaxed mt-2\">\r\n                            {subtitle}\r\n                        </p>\r\n                    </div>\r\n                    {headerActions && <div className=\"flex-shrink-0\">{headerActions}</div>}\r\n                </div>\r\n                <div className=\"relative mt-6\">\r\n                    <input \r\n                        type=\"text\"\r\n                        placeholder=\"Search items...\"\r\n                        value={searchTerm}\r\n                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                        className=\"w-full p-4 bg-gray-800 border-2 border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue\"\r\n                    />\r\n                    <svg className=\"absolute right-4 top-1/2 -translate-y-1/2 h-6 w-6 text-gray-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                    </svg>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n                {filteredItems.map(item => (\r\n                    <div key={item.id}>\r\n                        {renderItem(item)}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            {filteredItems.length === 0 && (\r\n                <div className=\"text-center py-16\">\r\n                    <p className=\"text-xl text-gray-500\">No items match your search.</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LibraryView;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\LifeMaintenanceProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\LiveChatModal.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":4,"column":26,"nodeType":"Property","messageId":"missingPropType","endLine":4,"endColumn":33}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport LiveChatModule from './modules/william/LiveChatModule.js';\r\n\r\nconst LiveChatModal = ({ onClose }) => {\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-70 z-40 flex items-center justify-center p-4\"\r\n            onClick={onClose}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-labelledby=\"live-chat-title\"\r\n        >\r\n            <div\r\n                className=\"bg-card-dark rounded-lg shadow-2xl border border-gray-700 w-full max-w-lg\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <header className=\"flex justify-between items-center p-4 border-b border-gray-700\">\r\n                    <h2 id=\"live-chat-title\" className=\"text-xl font-bold text-accent-teal\">Live Chat Controller</h2>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-white text-2xl\" aria-label=\"Close modal\">&times;</button>\r\n                </header>\r\n                <div className=\"p-4\">\r\n                    <LiveChatModule />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default LiveChatModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Manifesto.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":80,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4844,4895],"text":"&quot;The Wonky Sprout: Structure Engineered for Chaos.\""},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4844,4895],"text":"&ldquo;The Wonky Sprout: Structure Engineered for Chaos.\""},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4844,4895],"text":"&#34;The Wonky Sprout: Structure Engineered for Chaos.\""},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4844,4895],"text":"&rdquo;The Wonky Sprout: Structure Engineered for Chaos.\""},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":90,"column":130,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[4844,4895],"text":"\"The Wonky Sprout: Structure Engineered for Chaos.&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[4844,4895],"text":"\"The Wonky Sprout: Structure Engineered for Chaos.&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[4844,4895],"text":"\"The Wonky Sprout: Structure Engineered for Chaos.&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[4844,4895],"text":"\"The Wonky Sprout: Structure Engineered for Chaos.&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport OriginStory from './OriginStory';\r\nimport { QuickJump } from './QuickJump';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA, ChecklistSectionData } from '../checklist-data.tsx';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\nconst Manifesto: React.FC = () => {\r\n    const [activeTab, setActiveTab] = useState<'manifesto' | 'origin'>('manifesto');\r\n    const manifestoData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'Manifesto');\r\n\r\n    const sections = manifestoData.map(s => ({ id: s.id, title: s.title }));\r\n    const manifestoRef = React.useRef<HTMLButtonElement | null>(null);\r\n    const originRef = React.useRef<HTMLButtonElement | null>(null);\r\n\r\n    React.useEffect(() => {\r\n        if (manifestoRef.current) manifestoRef.current.setAttribute('aria-selected', activeTab === 'manifesto' ? 'true' : 'false');\r\n        if (originRef.current) originRef.current.setAttribute('aria-selected', activeTab === 'origin' ? 'true' : 'false');\r\n    }, [activeTab]);\r\n\r\n    // Inline Tab Buttons to satisfy static analysis for role=tab under tablist\r\n\r\n    const renderSubSections = (subSections: ChecklistSectionData[] = []) => {\r\n        return subSections.map(sub => (\r\n            <React.Fragment key={sub.id}>\r\n            {sub.title !== 'Hidden' && <h3 className=\"text-2xl font-semibold text-accent-teal mt-2 mb-2\">{sub.title}</h3>}\r\n            {sub.description && <div className=\"text-sm text-gray-400 mb-2\"><SecureMarkdown content={sub.description} /></div>}\r\n            {sub.items && \r\n                <ul className=\"list-none space-y-1 ml-4 mt-2\">\r\n                    {sub.items.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n                </ul>\r\n            }\r\n            {sub.subSections && \r\n                <div className=\"grid md:grid-cols-2 gap-8 mt-4\">\r\n                    {renderSubSections(sub.subSections)}\r\n                </div>\r\n            }\r\n            </React.Fragment>\r\n        ));\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">THE WONKY SPROUT OS</h1>\r\n                <p className=\"text-xl font-semibold text-accent-blue\">Structure Engineered for Chaos</p>\r\n            </header>\r\n\r\n            <div className=\"mb-8 border-b border-gray-700 flex justify-center no-print\" role=\"tablist\" aria-label=\"Manifesto Tabs\">\r\n                <button\r\n                    ref={manifestoRef}\r\n                    onClick={() => setActiveTab('manifesto')}\r\n                    className={`px-6 py-3 font-semibold text-lg border-b-2 transition-colors ${\r\n                        activeTab === 'manifesto' ? 'border-accent-blue text-accent-blue' : 'border-transparent text-text-light text-opacity-70 hover:text-white'\r\n                    }`}\r\n                    role=\"tab\"\r\n                    aria-controls=\"manifesto-panel\"\r\n                >\r\n                    The Manifesto\r\n                </button>\r\n                <button\r\n                    ref={originRef}\r\n                    onClick={() => setActiveTab('origin')}\r\n                    className={`px-6 py-3 font-semibold text-lg border-b-2 transition-colors ${\r\n                        activeTab === 'origin' ? 'border-accent-blue text-accent-blue' : 'border-transparent text-text-light text-opacity-70 hover:text-white'\r\n                    }`}\r\n                    role=\"tab\"\r\n                    aria-controls=\"origin-panel\"\r\n                >\r\n                    The Origin Story\r\n                </button>\r\n            </div>\r\n\r\n                {activeTab === 'manifesto' && (\r\n                 <>\r\n                    <QuickJump sections={sections} />\r\n                    <div id=\"manifesto-panel\" role=\"tabpanel\" className=\"space-y-6 max-w-4xl mx-auto text-lg text-text-light text-opacity-90 leading-relaxed\">\r\n                        {manifestoData.map(section => (\r\n                            <section key={section.id} id={section.id}>\r\n                                <ContentCard title={section.title}>\r\n                                {section.description && <SecureMarkdown content={section.description} />}\r\n                                {section.subSections && renderSubSections(section.subSections)}\r\n                                </ContentCard>\r\n                            </section>\r\n                        ))}\r\n                        \r\n                        <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n                            <p className=\"text-2xl font-bold text-accent-blue\">\"The Wonky Sprout: Structure Engineered for Chaos.\"</p>\r\n                            <p className=\"mt-4\">This is not a philosophy. This is not a journey. This is not inspiration.</p>\r\n                            <p className=\"mt-2 text-xl font-bold\">This is an engineering solution.</p>\r\n                        </footer>\r\n                    </div>\r\n                 </>\r\n            )}\r\n            {activeTab === 'origin' && <div id=\"origin-panel\" role=\"tabpanel\"><OriginStory /></div>}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Manifesto;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Modal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ModuleIcon.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ModuleViewWrapper.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'title' is missing in props validation","line":5,"column":30,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'children' is missing in props validation","line":5,"column":37,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":45}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { Button } from './Button';\r\n\r\nconst ModuleViewWrapper = ({ title, children }) => {\r\n    const { dispatch } = useAppState();\r\n\r\n    const handleBack = () => {\r\n        dispatch({ type: 'SET_VIEW', payload: 'operations-control' });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"mb-8 flex items-center gap-4\">\r\n                <Button onClick={handleBack} variant=\"secondary\" size=\"sm\">&larr; Back to Ops Control</Button>\r\n                <h1 className=\"text-3xl font-bold text-accent-teal\">{title}</h1>\r\n            </header>\r\n            <div className=\"max-w-5xl mx-auto\">\r\n                {children}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ModuleViewWrapper;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\MorningTransitionProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\OperatingManual.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\OriginStory.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":12,"column":56,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[462,587],"text":"\r\n          My whole life has been an unwritten script. I&apos;ve spent four decades navigating the world without a map.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[462,587],"text":"\r\n          My whole life has been an unwritten script. I&lsquo;ve spent four decades navigating the world without a map.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[462,587],"text":"\r\n          My whole life has been an unwritten script. I&#39;ve spent four decades navigating the world without a map.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[462,587],"text":"\r\n          My whole life has been an unwritten script. I&rsquo;ve spent four decades navigating the world without a map.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":18,"column":20,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[704,938],"text":"\r\n          This wasn&apos;t a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn&lsquo;t a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[704,938],"text":"\r\n          This wasn&#39;t a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn&rsquo;t a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":181,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being &quot;misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being &ldquo;misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being &#34;misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being &rdquo;misrepresented a lot\"ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":18,"column":202,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot&quot;ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot&ldquo;ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot&#34;ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[704,938],"text":"\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot&rdquo;ΓÇösnapped into focus.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":15,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The &quot;chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The &ldquo;chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The &#34;chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The &rdquo;chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":21,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos&quot; was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos&ldquo; was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos&#34; was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos&rdquo; was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":98,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the &quot;extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the &ldquo;extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the &#34;extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the &rdquo;extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":130,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation&quot; of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation&ldquo; of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation&#34; of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation&rdquo; of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":21,"column":156,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn&apos;t understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn&lsquo;t understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn&#39;t understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn&rsquo;t understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":195,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the &quot;hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the &ldquo;hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the &#34;hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the &rdquo;hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":203,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead&quot; reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead&ldquo; reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead&#34; reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead&rdquo; reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":239,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded &quot;masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded &ldquo;masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded &#34;masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded &rdquo;masking\", which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":21,"column":247,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking&quot;, which led to profound burnout.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking&ldquo;, which led to profound burnout.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking&#34;, which led to profound burnout.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[955,1246],"text":"\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking&rdquo;, which led to profound burnout.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":27,"column":15,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1438,1462],"text":"\r\n          That&apos;s what "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1438,1462],"text":"\r\n          That&lsquo;s what "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1438,1462],"text":"\r\n          That&#39;s what "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1438,1462],"text":"\r\n          That&rsquo;s what "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":31,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1703,1726],"text":"The &quot;Wonky\" (The Chaos)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1703,1726],"text":"The &ldquo;Wonky\" (The Chaos)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1703,1726],"text":"The &#34;Wonky\" (The Chaos)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1703,1726],"text":"The &rdquo;Wonky\" (The Chaos)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":31,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1703,1726],"text":"The \"Wonky&quot; (The Chaos)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1703,1726],"text":"The \"Wonky&ldquo; (The Chaos)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1703,1726],"text":"The \"Wonky&#34; (The Chaos)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1703,1726],"text":"The \"Wonky&rdquo; (The Chaos)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":33,"column":84,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1873,1901],"text":"The &quot;Sprout\" (The Structure)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1873,1901],"text":"The &ldquo;Sprout\" (The Structure)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1873,1901],"text":"The &#34;Sprout\" (The Structure)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1873,1901],"text":"The &rdquo;Sprout\" (The Structure)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":33,"column":91,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1873,1901],"text":"The \"Sprout&quot; (The Structure)"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1873,1901],"text":"The \"Sprout&ldquo; (The Structure)"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1873,1901],"text":"The \"Sprout&#34; (The Structure)"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1873,1901],"text":"The \"Sprout&rdquo; (The Structure)"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":38,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2037,2133],"text":"\r\n          For 15 years, I was an Engineering Technician. I wasn&apos;t just fixing motors; I was a "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2037,2133],"text":"\r\n          For 15 years, I was an Engineering Technician. I wasn&lsquo;t just fixing motors; I was a "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2037,2133],"text":"\r\n          For 15 years, I was an Engineering Technician. I wasn&#39;t just fixing motors; I was a "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2037,2133],"text":"\r\n          For 15 years, I was an Engineering Technician. I wasn&rsquo;t just fixing motors; I was a "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":184,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would &quot;usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would &ldquo;usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would &#34;usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would &rdquo;usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":202,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all&quot; to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all&ldquo; to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all&#34; to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all&rdquo; to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":272,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the &quot;why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the &ldquo;why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the &#34;why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the &rdquo;why\" behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":38,"column":276,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why&quot; behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why&ldquo; behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why&#34; behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2171,2389],"text":". I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why&rdquo; behind the failure, and build the system to fix it permanently.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":63,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has &quot;highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has &ldquo;highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has &#34;highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has &rdquo;highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests&quot; in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests&ldquo; in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests&#34; in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests&rdquo; in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":41,"column":145,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don&apos;t just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don&lsquo;t just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don&#39;t just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don&rsquo;t just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":153,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just &quot;fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just &ldquo;fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just &#34;fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just &rdquo;fix stuff\"ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":41,"column":163,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff&quot;ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff&ldquo;ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff&#34;ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2406,2611],"text":"\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff&rdquo;ΓÇöI re-engineer the foundation.\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":44,"column":52,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2628,2695],"text":"\r\n          This brand is my new operating system. It&apos;s built on a "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2628,2695],"text":"\r\n          This brand is my new operating system. It&lsquo;s built on a "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2628,2695],"text":"\r\n          This brand is my new operating system. It&#39;s built on a "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2628,2695],"text":"\r\n          This brand is my new operating system. It&rsquo;s built on a "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":74,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2703,2732],"text":"&quot;strongly anti-BS\" philosophy"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2703,2732],"text":"&ldquo;strongly anti-BS\" philosophy"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2703,2732],"text":"&#34;strongly anti-BS\" philosophy"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2703,2732],"text":"&rdquo;strongly anti-BS\" philosophy"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":91,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2703,2732],"text":"\"strongly anti-BS&quot; philosophy"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2703,2732],"text":"\"strongly anti-BS&ldquo; philosophy"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2703,2732],"text":"\"strongly anti-BS&#34; philosophy"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2703,2732],"text":"\"strongly anti-BS&rdquo; philosophy"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":44,"column":116,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2741,2838],"text":". It&apos;s about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2741,2838],"text":". It&lsquo;s about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2741,2838],"text":". It&#39;s about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2741,2838],"text":". It&rsquo;s about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":143,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not &quot;corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not &ldquo;corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not &#34;corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not &rdquo;corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":163,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.&quot; It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.&ldquo; It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.&#34; It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.&rdquo; It's about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":44,"column":167,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It&apos;s about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It&lsquo;s about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It&#39;s about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It&rsquo;s about output, not \"suck-ups.\"\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":188,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not &quot;suck-ups.\"\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not &ldquo;suck-ups.\"\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not &#34;suck-ups.\"\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not &rdquo;suck-ups.\"\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":44,"column":198,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.&quot;\r\n        "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.&ldquo;\r\n        "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.&#34;\r\n        "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2741,2838],"text":". It's about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.&rdquo;\r\n        "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":49,"column":62,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2995,3026],"text":"It&apos;s okay to be a little wonky."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2995,3026],"text":"It&lsquo;s okay to be a little wonky."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2995,3026],"text":"It&#39;s okay to be a little wonky."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2995,3026],"text":"It&rsquo;s okay to be a little wonky."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":50,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3098,3181],"text":"It&apos;s not a bug. It's a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3098,3181],"text":"It&lsquo;s not a bug. It's a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3098,3181],"text":"It&#39;s not a bug. It's a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3098,3181],"text":"It&rsquo;s not a bug. It's a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":50,"column":85,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It&apos;s a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It&lsquo;s a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It&#39;s a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It&rsquo;s a feature. It's the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":50,"column":101,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It&apos;s the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It&lsquo;s the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It&#39;s the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It&rsquo;s the \"why\" I can see the patterns in the noise."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":50,"column":108,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the &quot;why\" I can see the patterns in the noise."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the &ldquo;why\" I can see the patterns in the noise."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the &#34;why\" I can see the patterns in the noise."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the &rdquo;why\" I can see the patterns in the noise."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":50,"column":112,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the \"why&quot; I can see the patterns in the noise."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the \"why&ldquo; I can see the patterns in the noise."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the \"why&#34; I can see the patterns in the noise."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3098,3181],"text":"It's not a bug. It's a feature. It's the \"why&rdquo; I can see the patterns in the noise."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":99,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my &quot;card catalog.\" This is me, building my world."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my &ldquo;card catalog.\" This is me, building my world."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my &#34;card catalog.\" This is me, building my world."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my &rdquo;card catalog.\" This is me, building my world."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":51,"column":113,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my \"card catalog.&quot; This is me, building my world."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my \"card catalog.&ldquo; This is me, building my world."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my \"card catalog.&#34; This is me, building my world."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3255,3331],"text":"This is my system. This is my \"card catalog.&rdquo; This is me, building my world."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":45,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\n\r\nconst OriginStory: React.FC = () => {\r\n  return (\r\n    <div className=\"bg-card-dark rounded-lg shadow-md p-6 md:p-8 border border-gray-700 max-w-4xl mx-auto\">\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">The Origin Story</h1>\r\n      </header>\r\n\r\n      <div className=\"space-y-8 text-lg text-text-light text-opacity-90 leading-relaxed\">\r\n        <p>\r\n          My whole life has been an unwritten script. I've spent four decades navigating the world without a map.\r\n        </p>\r\n        <p>\r\n          At 40, I was diagnosed with <strong>Autism and ADHD</strong>.\r\n        </p>\r\n        <p>\r\n          This wasn't a medical label. It was the key to the script. It was the moment my entire lifeΓÇöall the chaos, the confusion, the intense interests, and the feeling of being \"misrepresented a lot\"ΓÇösnapped into focus.\r\n        </p>\r\n        <p>\r\n          The \"chaos\" was real. It was a brain bombarded with every possible thought. It was the \"extreme emotional dysregulation\" of a neurotype that wasn't understood or supported. It was the \"hothead\" reputation at a job that demanded \"masking\", which led to profound burnout.\r\n        </p>\r\n        <p>\r\n          Then, during meditation, I had an experience that changed everything. I watched my brain, in real-time, file itself like a card catalog.\r\n        </p>\r\n        <p>\r\n          That's what <strong>The Wonky Sprout</strong> is: A card catalog for a chaotic world.\r\n        </p>\r\n        \r\n        <div className=\"pl-4 border-l-4 border-accent-green my-6\">\r\n            <h2 className=\"text-2xl font-semibold text-accent-green mb-2\">The \"Wonky\" (The Chaos)</h2>\r\n            <p>The organic, creative, non-linear brain.</p>\r\n            <h2 className=\"text-2xl font-semibold text-accent-green mt-4 mb-2\">The \"Sprout\" (The Structure)</h2>\r\n            <p>The mechanical, logical, systems-driven mind. The gears, the circuits, the fix.</p>\r\n        </div>\r\n\r\n        <p>\r\n          For 15 years, I was an Engineering Technician. I wasn't just fixing motors; I was a <strong>systems diagnostician</strong>. I was the one who hated group projects and would \"usually do it all\" to ensure it was done right. My job was to find the root cause, the \"why\" behind the failure, and build the system to fix it permanently.\r\n        </p>\r\n        <p>\r\n          My brain is a machine that builds structure. It has \"highly restricted, fixated interests\" in 3D printing, CAD, and electronics. I don't just \"fix stuff\"ΓÇöI re-engineer the foundation.\r\n        </p>\r\n        <p>\r\n          This brand is my new operating system. It's built on a <strong>\"strongly anti-BS\" philosophy</strong>. It's about authenticity, not \"corporate nonsense.\" It's about output, not \"suck-ups.\"\r\n        </p>\r\n      </div>\r\n\r\n      <footer className=\"text-center mt-12 pt-8 border-t border-gray-700\">\r\n        <p className=\"text-2xl font-bold text-accent-blue\">It's okay to be a little wonky.</p>\r\n        <p className=\"text-xl font-semibold text-text-light mt-2\">It's not a bug. It's a feature. It's the \"why\" I can see the patterns in the noise.</p>\r\n        <p className=\"text-lg text-text-light text-opacity-80 mt-4\">This is my system. This is my \"card catalog.\" This is me, building my world.</p>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OriginStory;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\PIIWarningModal.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":9,"column":28,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'onCancel' is missing in props validation","line":9,"column":36,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":44},{"ruleId":"react/prop-types","severity":2,"message":"'onConfirm' is missing in props validation","line":9,"column":46,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":55},{"ruleId":"react/prop-types","severity":2,"message":"'matches' is missing in props validation","line":9,"column":57,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":64},{"ruleId":"react/prop-types","severity":2,"message":"'matches.map' is missing in props validation","line":28,"column":34,"nodeType":"Identifier","messageId":"missingPropType","endLine":28,"endColumn":37},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":29,"column":76,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1486,1488],"text":" &quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1486,1488],"text":" &ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1486,1488],"text":" &#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1486,1488],"text":" &rdquo;"},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":29,"column":90,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[1501,1502],"text":"&quot;"},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[1501,1502],"text":"&ldquo;"},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[1501,1502],"text":"&#34;"},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[1501,1502],"text":"&rdquo;"},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\n\r\n\r\nimport { Modal } from './Modal';\r\nimport { Button } from './Button';\r\n\r\nconst PIIWarningModal = ({ isOpen, onCancel, onConfirm, matches }) => {\r\n    return (\r\n        <Modal\r\n            isOpen={isOpen}\r\n            onClose={onCancel}\r\n            ariaLabelledBy=\"pii-warning-title\"\r\n            preventBackgroundClick={true}\r\n        >\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-8 border border-accent-warning w-full max-w-lg m-4\">\r\n                <header className=\"flex justify-between items-center mb-6\">\r\n                    <h2 id=\"pii-warning-title\" className=\"text-3xl font-extrabold text-accent-warning\">Data Privacy Warning</h2>\r\n                </header>\r\n\r\n                <div className=\"p-4 bg-yellow-900/30 rounded-lg border border-yellow-700\">\r\n                    <p data-testid=\"pii-warning-title\" className=\"font-bold text-yellow-300 text-lg\">Potential Sensitive Data Detected!</p>\r\n                    <p className=\"text-yellow-300 mt-2 text-sm\">\r\n                        Our scanner found the following potentially sensitive information in your prompt. For your privacy, we recommend removing it before sending to the AI.\r\n                    </p>\r\n                    <ul className=\"list-disc list-inside mt-3 text-sm text-yellow-200 space-y-1 max-h-40 overflow-y-auto\">\r\n                        {matches.map((match, index) => (\r\n                            <li key={index}><strong>{match.type}:</strong> \"{match.value}\"</li>\r\n                        ))}\r\n                    </ul>\r\n                </div>\r\n\r\n                <div className=\"flex justify-end space-x-4 mt-8\">\r\n                    <Button data-testid=\"pii-edit-prompt\" variant=\"secondary\" onClick={onCancel}>Edit Prompt</Button>\r\n                    <Button data-testid=\"pii-send-anyway\" variant=\"danger\" onClick={onConfirm} autoFocus>Send Anyway</Button>\r\n                </div>\r\n            </div>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default PIIWarningModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\PersonalHygieneProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\PixelFoldSetupSop.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ProtocolView.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":48,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":51,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[569,572],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[569,572],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":60,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":63,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[581,584],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[581,584],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[596,599],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[596,599],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport ContentCard from './ContentCard.js';\r\nimport ChecklistItem from './ChecklistItem.js';\r\nimport { QuickJump } from './QuickJump.js';\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.js';\r\nimport { SecureMarkdown } from '../utils/secureMarkdownRenderer.js';\r\n\r\n// FIX: Made the 'footer' prop optional by adding a question mark to its type definition. This resolves errors in multiple components that call ProtocolView without providing a footer, which is valid for many protocols.\r\nconst ProtocolView: React.FC<{ sourceDocument: any, title: any, subtitle: any, footer?: React.ReactNode }> = ({ sourceDocument, title, subtitle, footer }) => {\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === sourceDocument);\r\n\r\n  if (!protocolData || protocolData.length === 0) {\r\n    return (\r\n      <ContentCard title=\"Error\">\r\n        <p>Could not find protocol data for: {sourceDocument}</p>\r\n      </ContentCard>\r\n    );\r\n  }\r\n\r\n  const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n\r\n  const renderItems = (items) => {\r\n    if (!items) return null;\r\n    return (\r\n      <ul className=\"list-none space-y-2 text-lg\">\r\n        {items.map(item => (\r\n          <ChecklistItem key={item.id} id={item.id} achievementAwardId={item.achievementAwardId}>\r\n            {item.label}\r\n          </ChecklistItem>\r\n        ))}\r\n      </ul>\r\n    );\r\n  };\r\n\r\n  const renderSubSections = (subSections) => {\r\n    if (!subSections) return null;\r\n    return (\r\n        <div className=\"space-y-4\">\r\n            {subSections.map(sub => (\r\n                <ContentCard key={sub.id} title={sub.title} showHeader={true} titleClassName=\"text-accent-teal text-xl\">\r\n                    <div className=\"text-lg text-text-light text-opacity-90 mb-4\">\r\n                        <SecureMarkdown content={sub.description} />\r\n                    </div>\r\n                    {renderItems(sub.items)}\r\n                </ContentCard>\r\n            ))}\r\n        </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10 relative\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">{title}</h1>\r\n        {subtitle && <p className=\"text-lg text-text-light text-opacity-80 max-w-3xl mx-auto\">{subtitle}</p>}\r\n        <button\r\n          onClick={() => window.print()}\r\n          className=\"no-print absolute top-0 right-0 mt-2 px-4 py-2 bg-accent-blue text-background-dark rounded-md hover:bg-blue-400 transition-colors duration-200 font-semibold flex items-center text-sm\"\r\n          aria-label=\"Print this protocol\"\r\n        >\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4 mr-2\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n            <path fillRule=\"evenodd\" d=\"M5 4v3H4a2 2 0 00-2 2v6a2 2 0 002 2h12a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z\" clipRule=\"evenodd\" />\r\n          </svg>\r\n          Print\r\n        </button>\r\n      </header>\r\n\r\n      {sections.length > 1 && <QuickJump sections={sections} />}\r\n\r\n      <div className=\"space-y-6\">\r\n        {protocolData.map(section => (\r\n          <ContentCard key={section.id} title={section.title}>\r\n            {section.description && (\r\n                <div className=\"text-lg text-text-light text-opacity-90 mb-4\">\r\n                    <SecureMarkdown content={section.description} />\r\n                </div>\r\n            )}\r\n            {renderItems(section.items)}\r\n            {renderSubSections(section.subSections)}\r\n          </ContentCard>\r\n        ))}\r\n      </div>\r\n\r\n      {footer}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProtocolView;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\QuarterlyReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\QuickJump.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ScrollToTopButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SebastiansDashboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":25,"column":90,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[894,913],"text":"≡ƒªû Bash&apos;s Dashboard"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[894,913],"text":"≡ƒªû Bash&lsquo;s Dashboard"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[894,913],"text":"≡ƒªû Bash&#39;s Dashboard"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[894,913],"text":"≡ƒªû Bash&rsquo;s Dashboard"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { componentMap } from './componentMap.js';\r\n\r\nconst SebastiansDashboard = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { sebastianDashboardModules, isModMode } = appState;\r\n\r\n  const handleCustomizeDashboard = () => {\r\n    dispatch({ type: 'SET_VIEW', payload: 'sebastian-dashboard-builder' });\r\n  };\r\n\r\n  const getGridColsClass = (count) => {\r\n    if (count <= 1) return 'grid-cols-1';\r\n    return 'grid-cols-1 md:grid-cols-2'; \r\n  };\r\n  const SebastianGemCollector = componentMap['sebastian-gem-collector-module'];\r\n  const RewardStoreModule = componentMap['reward-store-module'];\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <header className=\"text-center mb-10 relative\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">≡ƒªû Bash's Dashboard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Your personalized Flight Protocols. Adventure with structure.\r\n        </p>\r\n        {isModMode && (\r\n          <button\r\n            onClick={handleCustomizeDashboard}\r\n            className=\"absolute top-0 right-0 mt-2 px-4 py-2 bg-accent-blue text-background-dark font-semibold rounded-md hover:bg-blue-400 transition-colors duration-200 text-sm\"\r\n            aria-label=\"Customize Dashboard Modules\"\r\n          >\r\n            Customize Dashboard\r\n          </button>\r\n        )}\r\n      </header>\r\n\r\n        {/* Always render Dopamine Mining and Reward Store modules visibly for E2E and user clarity */}\r\n        <div className=\"grid gap-6 mb-6\">\r\n          <h2 className=\"text-3xl font-bold text-accent-teal mb-4\" data-testid=\"kids-corner-heading\">Kids Corner</h2>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-accent-teal mb-2\">Dopamine Cache</h2>\r\n            {SebastianGemCollector ? <SebastianGemCollector /> : null}\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-accent-teal mb-2\">Dopamine Mining</h2>\r\n            {RewardStoreModule ? <RewardStoreModule /> : null}\r\n          </div>\r\n        </div>\r\n\r\n      <div className={`grid gap-6 ${getGridColsClass(sebastianDashboardModules.length)}`}>\r\n        {sebastianDashboardModules.map(moduleId => {\r\n          const ModuleComponent = componentMap[moduleId];\r\n          if (!ModuleComponent) return null;\r\n          return (\r\n            <ModuleComponent \r\n              key={moduleId} \r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SebastiansDashboard;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SebastiansDashboardBuilder.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":72,"column":97,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2440,2466],"text":"Customize Bash&apos;s Dashboard"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2440,2466],"text":"Customize Bash&lsquo;s Dashboard"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2440,2466],"text":"Customize Bash&#39;s Dashboard"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2440,2466],"text":"Customize Bash&rsquo;s Dashboard"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":74,"column":53,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2536,2646],"text":"\r\n          Select the modules you want active on Bash&apos;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2536,2646],"text":"\r\n          Select the modules you want active on Bash&lsquo;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2536,2646],"text":"\r\n          Select the modules you want active on Bash&#39;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2536,2646],"text":"\r\n          Select the modules you want active on Bash&rsquo;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ALL_SEBASTIAN_MODULES_CONFIG } from '../constants';\r\nimport { Button } from './Button';\r\n\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface TabButtonProps {\r\n    label: string;\r\n    isActive: boolean;\r\n    onClick: () => void;\r\n}\r\nconst TabButton: React.FC<TabButtonProps> = ({ label, isActive, onClick }) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm transition-colors\r\n            ${isActive\r\n                ? 'border-accent-blue text-accent-blue'\r\n                : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'\r\n            }`}\r\n    >\r\n        {label}\r\n    </button>\r\n);\r\n\r\nconst SebastiansDashboardBuilder = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { sebastianDashboardModules } = appState;\r\n\r\n  const [tempEnabledModules, setTempEnabledModules] = useState(sebastianDashboardModules);\r\n  const [activeTab, setActiveTab] = useState('core');\r\n\r\n  useEffect(() => {\r\n    setTempEnabledModules(sebastianDashboardModules);\r\n  }, [sebastianDashboardModules]);\r\n\r\n  const handleToggleModule = (moduleId, enable) => {\r\n    setTempEnabledModules(prev => {\r\n      if (enable && !prev.includes(moduleId)) {\r\n        return [...prev, moduleId];\r\n      }\r\n      if (!enable && prev.includes(moduleId)) {\r\n        return prev.filter(id => id !== moduleId);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    dispatch({ type: 'SET_SEBASTIAN_DASHBOARD_MODULES', payload: tempEnabledModules });\r\n    dispatch({ type: 'SET_VIEW', payload: 'sebastians-dashboard' });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setTempEnabledModules(sebastianDashboardModules);\r\n    dispatch({ type: 'SET_VIEW', payload: 'sebastians-dashboard' });\r\n  };\r\n  \r\n  const moduleCategories = {\r\n    core: 'Core',\r\n    quests: 'Quests',\r\n    checklists: 'Checklists',\r\n    rewards: 'Rewards',\r\n    communication: 'Communication',\r\n  };\r\n\r\n  const modulesForTab = ALL_SEBASTIAN_MODULES_CONFIG.filter(m => m.category === activeTab);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-8\">\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Customize Bash's Dashboard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Select the modules you want active on Bash's dashboard. Core modules cannot be disabled.\r\n        </p>\r\n      </header>\r\n\r\n      <div className=\"bg-card-dark rounded-lg border border-gray-700\">\r\n        <div className=\"border-b border-gray-700\">\r\n            <nav className=\"-mb-px flex space-x-2 px-4 overflow-x-auto\" aria-label=\"Tabs\">\r\n                {Object.entries(moduleCategories).map(([key, label]) => (\r\n                    <TabButton key={key} label={label} isActive={activeTab === key} onClick={() => setActiveTab(key)} />\r\n                ))}\r\n            </nav>\r\n        </div>\r\n        <div className=\"p-4\">\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {modulesForTab.map(module => (\r\n                  <div key={module.id} className={`flex items-center justify-between p-3 bg-gray-800 rounded-md border border-gray-700 ${!module.isRemovable ? 'opacity-70' : ''}`}>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-accent-blue\">\r\n                        {module.name} {!module.isRemovable && <span className=\"text-xs text-gray-400\">(Core)</span>}\r\n                      </h3>\r\n                      <p className=\"text-sm text-text-light text-opacity-70\">{module.description}</p>\r\n                    </div>\r\n                    <label className={`relative inline-flex items-center ml-4 ${!module.isRemovable ? 'cursor-not-allowed' : 'cursor-pointer'}`}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value=\"\"\r\n                        className=\"sr-only peer\"\r\n                        aria-label={`Toggle ${module.name} module`}\r\n                        checked={tempEnabledModules.includes(module.id)}\r\n                        onChange={(e) => handleToggleModule(module.id, e.target.checked)}\r\n                        disabled={!module.isRemovable}\r\n                      />\r\n                      <div className={`w-11 h-6 rounded-full peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-blue/50 ${\r\n                        tempEnabledModules.includes(module.id) ? 'bg-accent-blue' : 'bg-gray-600'\r\n                      } peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all`}></div>\r\n                    </label>\r\n                  </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"flex justify-end space-x-4 mt-8\">\r\n          <Button onClick={handleCancel} variant=\"secondary\">Cancel</Button>\r\n          <Button onClick={handleSave} variant=\"primary\">Save Changes</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SebastiansDashboardBuilder;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SensoryOverloadModal.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":7,"column":33,"nodeType":"Property","messageId":"missingPropType","endLine":7,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":7,"column":41,"nodeType":"Property","messageId":"missingPropType","endLine":7,"endColumn":48}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\n\r\nconst SensoryOverloadModal = ({ isOpen, onClose }) => {\r\n    const { dispatch } = useAppState();\r\n\r\n    if (!isOpen) {\r\n        return null;\r\n    }\r\n\r\n    const handleActivateBubbleShield = () => {\r\n        dispatch({ type: 'SET_VIEW', payload: 'bubble-shield-protocol' });\r\n        onClose();\r\n    };\r\n\r\n    const handleStartTimer = () => {\r\n        dispatch({ type: 'POMODORO_SET_MODE', payload: 'shortBreak' });\r\n        dispatch({ type: 'POMODORO_TOGGLE' });\r\n        const pomodoro = document.getElementById('module-pomodoro-timer-module');\r\n        if (pomodoro) {\r\n            pomodoro.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n        }\r\n        onClose();\r\n    };\r\n\r\n    const handleViewFullProtocol = () => {\r\n        dispatch({ type: 'SET_VIEW', payload: 'sensory-overload' });\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4\"\r\n            onClick={onClose}\r\n            role=\"dialog\"\r\n            aria-modal=\"true\"\r\n            aria-labelledby=\"overload-modal-title\"\r\n        >\r\n            <div\r\n                className=\"bg-card-dark rounded-lg shadow-2xl p-8 border-2 border-accent-warning w-full max-w-lg m-4\"\r\n                onClick={e => e.stopPropagation()}\r\n            >\r\n                <header className=\"text-center mb-6\">\r\n                    <h2 id=\"overload-modal-title\" className=\"text-4xl font-extrabold text-accent-warning animate-pulse-slow\">≡ƒÜ¿ Sensory Overload Detected</h2>\r\n                    <p className=\"text-lg text-yellow-300 mt-2\">Immediate action is recommended to prevent system failure.</p>\r\n                </header>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <button\r\n                        onClick={handleActivateBubbleShield}\r\n                        className=\"w-full text-left p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-700 flex items-center gap-4\"\r\n                    >\r\n                        <span className=\"text-3xl\">≡ƒÄº</span>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-accent-blue text-xl\">Activate Bubble Shield</h3>\r\n                            <p className=\"text-sm text-text-light text-opacity-70\">Immediately deploy sensory mitigation hardware.</p>\r\n                        </div>\r\n                    </button>\r\n                    <button\r\n                        onClick={handleStartTimer}\r\n                        className=\"w-full text-left p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-700 flex items-center gap-4\"\r\n                    >\r\n                        <span className=\"text-3xl\">ΓÅ▒∩╕Å</span>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-accent-blue text-xl\">Start 5-Min Regulation Timer</h3>\r\n                            <p className=\"text-sm text-text-light text-opacity-70\">Create a structured break for system recovery.</p>\r\n                        </div>\r\n                    </button>\r\n                    <button\r\n                        onClick={handleViewFullProtocol}\r\n                        className=\"w-full text-left p-4 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors border border-gray-700 flex items-center gap-4\"\r\n                    >\r\n                        <span className=\"text-3xl\">≡ƒôä</span>\r\n                        <div>\r\n                            <h3 className=\"font-bold text-accent-blue text-xl\">Review Full IPI-SO Protocol</h3>\r\n                            <p className=\"text-sm text-text-light text-opacity-70\">Access the complete emergency procedure.</p>\r\n                        </div>\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"text-center mt-8\">\r\n                     <button onClick={onClose} className=\"px-6 py-2 bg-gray-700 text-text-light rounded-md hover:bg-gray-600 transition-colors duration-200 font-semibold\">\r\n                        Dismiss\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SensoryOverloadModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SensoryOverloadProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SharedCalendar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SoloExecutionModeProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SopCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SopForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SopVault.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\StatusTracker.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\StrategicRoadmap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'getProjectStyle' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":26},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5265,5268],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5265,5268],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5897,5900],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5897,5900],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useMemo } from 'react';\r\nimport useProgressVar from '@hooks/useProgressVar';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from './ContentCard.js';\r\n\r\n\r\nconst getQuarter = (d = new Date()) => Math.floor(d.getMonth() / 3) + 1;\r\nconst getYear = (d = new Date()) => d.getFullYear();\r\n\r\nconst StrategicRoadmap = () => {\r\n    const { appState } = useAppState();\r\n    const { objectives, projects, tasks } = appState;\r\n\r\n    const currentQuarter = useMemo(() => {\r\n        const now = new Date();\r\n        const year = getYear(now);\r\n        const quarter = getQuarter(now);\r\n        const startDate = new Date(year, (quarter - 1) * 3, 1);\r\n        const endDate = new Date(year, quarter * 3, 0);\r\n        return { startDate, endDate, year, quarter };\r\n    }, []);\r\n\r\n    const totalDaysInQuarter = useMemo(() => {\r\n        return (currentQuarter.endDate.getTime() - currentQuarter.startDate.getTime()) / (1000 * 3600 * 24);\r\n    }, [currentQuarter]);\r\n\r\n    const getProjectStyle = (project) => {\r\n        const projStart = project.startDate ? new Date(project.startDate) : currentQuarter.startDate;\r\n        const projEnd = project.endDate ? new Date(project.endDate) : currentQuarter.endDate;\r\n\r\n        const startDay = Math.max(0, (projStart.getTime() - currentQuarter.startDate.getTime()) / (1000 * 3600 * 24));\r\n        const endDay = Math.min(totalDaysInQuarter, (projEnd.getTime() - currentQuarter.startDate.getTime()) / (1000 * 3600 * 24));\r\n        \r\n        const leftPercentage = (startDay / totalDaysInQuarter) * 100;\r\n        const widthPercentage = ((endDay - startDay) / totalDaysInQuarter) * 100;\r\n\r\n        return {\r\n            left: `${leftPercentage}%`,\r\n            width: `${widthPercentage}%`,\r\n        };\r\n    };\r\n\r\n    const monthMarkers = useMemo(() => {\r\n        const markers = [];\r\n        for (let i = 0; i < 3; i++) {\r\n            const monthDate = new Date(currentQuarter.startDate);\r\n            monthDate.setMonth(currentQuarter.startDate.getMonth() + i);\r\n            const monthStartDay = (monthDate.getTime() - currentQuarter.startDate.getTime()) / (1000 * 3600 * 24);\r\n            const left = (monthStartDay / totalDaysInQuarter) * 100;\r\n            markers.push({\r\n                name: monthDate.toLocaleString('default', { month: 'long' }),\r\n                left: `${left}%`,\r\n                width: `${(1 / 3) * 100}%`\r\n            });\r\n        }\r\n        return markers;\r\n    }, [currentQuarter, totalDaysInQuarter]);\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Strategic Roadmap</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80 max-w-3xl mx-auto\">\r\n                    A high-level visual plan of all active projects for Q{currentQuarter.quarter} {currentQuarter.year}.\r\n                </p>\r\n            </header>\r\n\r\n            <ContentCard title=\"Quarterly Timeline\">\r\n                <div className=\"relative\">\r\n                    {/* Month Markers */}\r\n                    <div className=\"flex h-8 mb-4\">\r\n                        {monthMarkers.map(marker => (\r\n                            <MonthMarker key={marker.name} marker={marker} />\r\n                        ))}\r\n                    </div>\r\n\r\n                    {/* Project Rows */}\r\n                    <div className=\"space-y-6\">\r\n                        {objectives.filter(o => !o.isArchived).map(objective => {\r\n                            const objectiveProjects = projects.filter(p => p.objectiveId === objective.id && !p.isArchived && p.startDate && p.endDate);\r\n                            if (objectiveProjects.length === 0) return null;\r\n                            return (\r\n                                <div key={objective.id}>\r\n                                    <h3 className=\"font-bold text-accent-green mb-3\">≡ƒÄ» {objective.title}</h3>\r\n                                    <div className=\"space-y-2\">\r\n                                        {objectiveProjects.map(project => {\r\n                                            // FIX: Correctly calculate task completion progress.\r\n                                            const linkedTasks = tasks.filter(t => t.projectId === project.id);\r\n                                            const completed = linkedTasks.filter(t => t.status === 'done').length;\r\n                                            const total = linkedTasks.length;\r\n                                            const progressPercentage = total > 0 ? (completed / total) * 100 : 0;\r\n                                            \r\n                                            return (\r\n                                                <ProgressProjectBar key={project.id} project={project} progressPercentage={progressPercentage} />\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </ContentCard>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst MonthMarker: React.FC<{ marker: any }> = ({ marker }) => {\r\n    const ref = React.useRef<HTMLDivElement | null>(null);\r\n    // The marker width is already a percentage string (e.g., '33.3333%'), so use that as progress\r\n    useProgressVar(ref, marker.width);\r\n    React.useEffect(() => {\r\n        if (ref.current) ref.current.style.setProperty('--progress', marker.width);\r\n    }, [marker.width]);\r\n    return (\r\n        <div ref={ref} className=\"month-marker text-center font-bold text-accent-blue border-r border-gray-700 last:border-r-0\" aria-hidden=\"true\">\r\n            {marker.name}\r\n        </div>\r\n    );\r\n}\r\n\r\nconst ProgressProjectBar: React.FC<{ project: any, progressPercentage: number }> = ({ project, progressPercentage }) => {\r\n    const ref = React.useRef<HTMLDivElement | null>(null);\r\n    React.useEffect(() => {\r\n        if (!ref.current) return;\r\n        const style = getProjectStyle(project);\r\n        ref.current.style.setProperty('--left', style.left);\r\n        ref.current.style.setProperty('--width', style.width);\r\n        // Use CSS variable for progress so we avoid inline style attributes in JSX\r\n        ref.current.style.setProperty('--progress', `${progressPercentage}%`);\r\n    }, [project, progressPercentage]);\r\n\r\n    return (\r\n        <div className=\"relative h-10\">\r\n            <div ref={ref} className=\"timeline-track bg-gray-800 rounded\">\r\n                <div\r\n                    className=\"h-full bg-accent-blue rounded progress-fill\"\r\n                    role=\"progressbar\"\r\n                    aria-label={`Project ${project.title} progress: ${Math.round(progressPercentage)}%`}\r\n                />\r\n                <span className=\"sr-only\">Project progress: {Math.round(progressPercentage)}%</span>\r\n                <span className=\"absolute inset-0 flex items-center px-2 text-sm font-semibold text-white truncate\">{project.title}</span>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default StrategicRoadmap;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SystemInsights.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SystemIntegrationGuide.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":40,"column":34,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":37}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ContentCard from './ContentCard';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport { QuickJump } from './QuickJump';\r\nimport { addTaskToGoogle } from '../src/integrations/googleWorkspace';\r\n// Fix: Added '.tsx' extension to the import path to ensure the file is treated as a module.\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst SystemIntegrationGuide: React.FC = () => {\r\n    const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === 'System Integration Guide');\r\n    \r\n    const sections = protocolData.map(s => ({ id: s.id, title: s.title }));\r\n\r\n    return (\r\n        <div>\r\n            <header className=\"text-center mb-10\">\r\n                <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">System Integration: Google Workspace</h1>\r\n                <p className=\"text-lg text-text-light text-opacity-80\">\r\n                    Operationalize your OS by integrating protocols with Google Workspace for enhanced system compliance and reduced executive dysfunction.\r\n                </p>\r\n            </header>\r\n\r\n            <QuickJump sections={sections} />\r\n            \r\n            <div className=\"space-y-6 max-w-4xl mx-auto\">\r\n                {protocolData.map(section => (\r\n                    <ContentCard key={section.id} title={section.title}>\r\n                        <ul className=\"list-none text-lg space-y-2\">\r\n                            {section.items?.map(item => <ChecklistItem key={item.id} id={item.id}>{item.label}</ChecklistItem>)}\r\n                        </ul>\r\n                    </ContentCard>\r\n                ))}\r\n            </div>\r\n            <div className=\"text-center mt-8\">\r\n                <button\r\n                    onClick={async () => {\r\n                        try {\r\n                            await addTaskToGoogle('Try Wonky Sprout Integration Flow');\r\n                            alert('Submitted to Google Tasks (via server proxy) ΓÇö see audit log.');\r\n                        } catch (err) {\r\n                            alert('Failed to submit task (check server proxy configuration)');\r\n                        }\r\n                    }}\r\n                    className=\"px-4 py-2 bg-accent-green text-background-dark rounded-md font-semibold\"\r\n                >Test: Add a Task to Google</button>\r\n            </div>\r\n\r\n            <footer className=\"mt-8 pt-6 border-t border-gray-700 max-w-4xl mx-auto\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 italic text-center\">\r\n                Note: This implementation provides workflow guidance. Direct, automated integration with Google Workspace APIs (e.g., creating events from SOPs) requires a separate backend system for authentication and API calls, which is not part of this frontend-only application. Manual application is required.\r\n                </p>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SystemIntegrationGuide;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\SystemResetModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\TechnicalManual.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\TextInputItem.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\ToastContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\UserSopView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WeeklyReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WilliamDashboardBuilder.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":73,"column":100,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2439,2468],"text":"Customize William&apos;s Dashboard"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2439,2468],"text":"Customize William&lsquo;s Dashboard"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2439,2468],"text":"Customize William&#39;s Dashboard"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2439,2468],"text":"Customize William&rsquo;s Dashboard"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ALL_WILLIAM_MODULES_CONFIG } from '../constants';\r\nimport { Button } from './Button';\r\n\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface TabButtonProps {\r\n    label: string;\r\n    isActive: boolean;\r\n    onClick: () => void;\r\n}\r\nconst TabButton: React.FC<TabButtonProps> = ({ label, isActive, onClick }) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm transition-colors\r\n            ${isActive\r\n                ? 'border-accent-blue text-accent-blue'\r\n                : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'\r\n            }`}\r\n    >\r\n        {label}\r\n    </button>\r\n);\r\n\r\nconst WilliamDashboardBuilder = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { williamDashboardModules } = appState;\r\n\r\n  const [tempEnabledModules, setTempEnabledModules] = useState(williamDashboardModules);\r\n  const [activeTab, setActiveTab] = useState('core');\r\n\r\n  useEffect(() => {\r\n    setTempEnabledModules(williamDashboardModules);\r\n  }, [williamDashboardModules]);\r\n\r\n  const handleToggleModule = (moduleId, enable) => {\r\n    setTempEnabledModules(prev => {\r\n      if (enable && !prev.includes(moduleId)) {\r\n        return [...prev, moduleId];\r\n      }\r\n      if (!enable && prev.includes(moduleId)) {\r\n        return prev.filter(id => id !== moduleId);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    dispatch({ type: 'SET_WILL_DASHBOARD_MODULES', payload: tempEnabledModules });\r\n    dispatch({ type: 'SET_VIEW', payload: 'operations-control' });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setTempEnabledModules(williamDashboardModules);\r\n    dispatch({ type: 'SET_VIEW', payload: 'operations-control' });\r\n  };\r\n  \r\n  const moduleCategories = {\r\n    core: 'Core',\r\n    trackers: 'Trackers',\r\n    utilities: 'Utilities',\r\n    checklists: 'Checklists',\r\n    content: 'Content',\r\n    selection: 'Selectors',\r\n  };\r\n\r\n  const modulesForTab = ALL_WILLIAM_MODULES_CONFIG.filter(m => m.category === activeTab);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-8\">\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Customize William's Dashboard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Select the modules you want active on your personal dashboard. Core modules cannot be disabled.\r\n        </p>\r\n      </header>\r\n      \r\n      <div className=\"bg-card-dark rounded-lg border border-gray-700\">\r\n        <div className=\"border-b border-gray-700\">\r\n            <nav className=\"-mb-px flex space-x-2 px-4 overflow-x-auto\" aria-label=\"Tabs\">\r\n                {Object.entries(moduleCategories).map(([key, label]) => {\r\n                     const modulesInCategory = ALL_WILLIAM_MODULES_CONFIG.filter(m => m.category === key);\r\n                     if (modulesInCategory.length === 0) return null;\r\n                     return <TabButton key={key} label={label} isActive={activeTab === key} onClick={() => setActiveTab(key)} />;\r\n                })}\r\n            </nav>\r\n        </div>\r\n        <div className=\"p-4\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {modulesForTab.map(module => (\r\n                  <div key={module.id} className={`flex items-center justify-between p-3 bg-gray-800 rounded-md border border-gray-700 ${!module.isRemovable ? 'opacity-70' : ''}`}>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-accent-blue\">\r\n                        {module.name} {!module.isRemovable && <span className=\"text-xs text-gray-400\">(Core)</span>}\r\n                      </h3>\r\n                      <p className=\"text-sm text-text-light text-opacity-70\">{module.description}</p>\r\n                    </div>\r\n                    <label className={`relative inline-flex items-center ml-4 ${!module.isRemovable ? 'cursor-not-allowed' : 'cursor-pointer'}`}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value=\"\"\r\n                        className=\"sr-only peer\"\r\n                        aria-label={`Toggle ${module.name} module`}\r\n                        checked={tempEnabledModules.includes(module.id)}\r\n                        onChange={(e) => handleToggleModule(module.id, e.target.checked)}\r\n                        disabled={!module.isRemovable}\r\n                      />\r\n                      <div className={`w-11 h-6 rounded-full peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-blue/50 ${\r\n                        tempEnabledModules.includes(module.id) ? 'bg-accent-blue' : 'bg-gray-600'\r\n                      } peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all`}></div>\r\n                    </label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end space-x-4 mt-8\">\r\n          <Button onClick={handleCancel} variant=\"secondary\">Cancel</Button>\r\n          <Button onClick={handleSave} variant=\"primary\">Save Changes</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WilliamDashboardBuilder;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WilliamsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WillowsCorner.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":16,"column":92,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[649,667],"text":"≡ƒî╕ Willow&apos;s Corner"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[649,667],"text":"≡ƒî╕ Willow&lsquo;s Corner"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[649,667],"text":"≡ƒî╕ Willow&#39;s Corner"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[649,667],"text":"≡ƒî╕ Willow&rsquo;s Corner"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport ChecklistItem from './ChecklistItem';\r\nimport GemCollector from './GemCollector';\r\nimport ContentCard from './ContentCard';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ALL_CHECKLIST_DATA } from '../checklist-data.tsx';\r\n\r\nconst WillowsCorner: React.FC = () => {\r\n  const { appState } = useAppState();\r\n  const { collectedGems } = appState;\r\n  const protocolData = ALL_CHECKLIST_DATA.filter(s => s.sourceDocument === \"Willow's Corner\");\r\n\r\n  return (\r\n    <div>\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">≡ƒî╕ Willow's Corner</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-90 mt-2 font-semibold\">Purpose: Make your weeks predictable, fun, and safe. You know what happens next.</p>\r\n      </header>\r\n      \r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n        <div className=\"space-y-8\">\r\n            {protocolData.map(section => (\r\n                <ContentCard key={section.id} title={section.title}>\r\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\r\n                        {section.subSections?.map(subSection => (\r\n                            <div key={subSection.id}>\r\n                                <h3 className=\"text-xl font-semibold text-accent-blue mb-2\">{subSection.title}</h3>\r\n                                <ul className=\"list-none space-y-2\">\r\n                                    {subSection.items?.map(item => (\r\n                                        <ChecklistItem key={item.id} {...item}>{item.label}</ChecklistItem>\r\n                                    ))}\r\n                                </ul>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </ContentCard>\r\n            ))}\r\n        </div>\r\n\r\n        <div className=\"space-y-8\">\r\n           <GemCollector name=\"Willow\" collectedGems={collectedGems.willow || []} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WillowsCorner;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WillowsDashboard.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":25,"column":92,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[879,900],"text":"≡ƒî╕ Willow&apos;s Dashboard"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[879,900],"text":"≡ƒî╕ Willow&lsquo;s Dashboard"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[879,900],"text":"≡ƒî╕ Willow&#39;s Dashboard"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[879,900],"text":"≡ƒî╕ Willow&rsquo;s Dashboard"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { componentMap } from './componentMap.js';\r\n\r\nconst WillowsDashboard = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { willowDashboardModules, isModMode } = appState;\r\n\r\n  const handleCustomizeDashboard = () => {\r\n    dispatch({ type: 'SET_VIEW', payload: 'willow-dashboard-builder' });\r\n  };\r\n\r\n  const getGridColsClass = (count) => {\r\n    if (count <= 1) return 'grid-cols-1';\r\n    return 'grid-cols-1 md:grid-cols-2'; \r\n  };\r\n  const WillowGemCollector = componentMap['willow-gem-collector-module'];\r\n  const RewardStoreModule = componentMap['reward-store-module'];\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto\">\r\n      <header className=\"text-center mb-10 relative\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">≡ƒî╕ Willow's Dashboard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Your personalized Flight Protocols. Predictability and fun.\r\n        </p>\r\n        {isModMode && (\r\n          <button\r\n            onClick={handleCustomizeDashboard}\r\n            className=\"absolute top-0 right-0 mt-2 px-4 py-2 bg-accent-blue text-background-dark font-semibold rounded-md hover:bg-blue-400 transition-colors duration-200 text-sm\"\r\n            aria-label=\"Customize Dashboard Modules\"\r\n          >\r\n            Customize Dashboard\r\n          </button>\r\n        )}\r\n      </header>\r\n\r\n        {/* Always render Dopamine Mining and Reward Store modules visibly for E2E and user clarity */}\r\n        <div className=\"grid gap-6 mb-6\">\r\n          <h2 className=\"text-3xl font-bold text-accent-teal mb-4\" data-testid=\"kids-corner-heading\">Kids Corner</h2>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-accent-teal mb-2\" data-testid=\"kids-gem-collection\">Dopamine Cache</h2>\r\n            {WillowGemCollector ? <WillowGemCollector /> : null}\r\n          </div>\r\n          <div>\r\n            <h2 className=\"text-2xl font-bold text-accent-teal mb-2\" data-testid=\"kids-reward-store\">Dopamine Mining</h2>\r\n            {RewardStoreModule ? <RewardStoreModule /> : null}\r\n          </div>\r\n        </div>\r\n\r\n      <div className={`grid gap-6 ${getGridColsClass(willowDashboardModules.length)}`}>\r\n        {willowDashboardModules.map(moduleId => {\r\n          const ModuleComponent = componentMap[moduleId];\r\n          if (!ModuleComponent) return null;\r\n          return (\r\n            <ModuleComponent \r\n              key={moduleId} \r\n            />\r\n          );\r\n        })}\r\n      </div>\r\n      \r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WillowsDashboard;\r\nexport { WillowsDashboard };","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WillowsDashboardBuilder.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":71,"column":99,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2373,2401],"text":"Customize Willow&apos;s Dashboard"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2373,2401],"text":"Customize Willow&lsquo;s Dashboard"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2373,2401],"text":"Customize Willow&#39;s Dashboard"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2373,2401],"text":"Customize Willow&rsquo;s Dashboard"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":73,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2471,2583],"text":"\r\n          Select the modules you want active on Willow&apos;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2471,2583],"text":"\r\n          Select the modules you want active on Willow&lsquo;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2471,2583],"text":"\r\n          Select the modules you want active on Willow&#39;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2471,2583],"text":"\r\n          Select the modules you want active on Willow&rsquo;s dashboard. Core modules cannot be disabled.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Button' is not defined.","line":116,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":116,"endColumn":18},{"ruleId":"react/jsx-no-undef","severity":2,"message":"'Button' is not defined.","line":117,"column":12,"nodeType":"JSXIdentifier","messageId":"undefined","endLine":117,"endColumn":18}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { ALL_WILLOW_MODULES_CONFIG } from '../constants';\r\n\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface TabButtonProps {\r\n    label: string;\r\n    isActive: boolean;\r\n    onClick: () => void;\r\n}\r\nconst TabButton: React.FC<TabButtonProps> = ({ label, isActive, onClick }) => (\r\n    <button\r\n        onClick={onClick}\r\n        className={`whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm transition-colors\r\n            ${isActive\r\n                ? 'border-accent-blue text-accent-blue'\r\n                : 'border-transparent text-gray-400 hover:text-gray-200 hover:border-gray-500'\r\n            }`}\r\n    >\r\n        {label}\r\n    </button>\r\n);\r\n\r\nconst WillowsDashboardBuilder = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const { willowDashboardModules } = appState;\r\n\r\n  const [tempEnabledModules, setTempEnabledModules] = useState(willowDashboardModules);\r\n  const [activeTab, setActiveTab] = useState('core');\r\n  \r\n  useEffect(() => {\r\n    setTempEnabledModules(willowDashboardModules);\r\n  }, [willowDashboardModules]);\r\n\r\n  const handleToggleModule = (moduleId, enable) => {\r\n    setTempEnabledModules(prev => {\r\n      if (enable && !prev.includes(moduleId)) {\r\n        return [...prev, moduleId];\r\n      }\r\n      if (!enable && prev.includes(moduleId)) {\r\n        return prev.filter(id => id !== moduleId);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleSave = () => {\r\n    dispatch({ type: 'SET_WILLOW_DASHBOARD_MODULES', payload: tempEnabledModules });\r\n    dispatch({ type: 'SET_VIEW', payload: 'willows-dashboard' });\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setTempEnabledModules(willowDashboardModules);\r\n    dispatch({ type: 'SET_VIEW', payload: 'willows-dashboard' });\r\n  };\r\n  \r\n  const moduleCategories = {\r\n    core: 'Core',\r\n    quests: 'Quests',\r\n    checklists: 'Checklists',\r\n    rewards: 'Rewards',\r\n    communication: 'Communication',\r\n  };\r\n\r\n  const modulesForTab = ALL_WILLOW_MODULES_CONFIG.filter(m => m.category === activeTab);\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto py-8\">\r\n      <header className=\"text-center mb-10\">\r\n        <h1 className=\"text-4xl md:text-5xl font-extrabold text-accent-teal mb-4\">Customize Willow's Dashboard</h1>\r\n        <p className=\"text-lg text-text-light text-opacity-80\">\r\n          Select the modules you want active on Willow's dashboard. Core modules cannot be disabled.\r\n        </p>\r\n      </header>\r\n\r\n      <div className=\"bg-card-dark rounded-lg border border-gray-700\">\r\n        <div className=\"border-b border-gray-700\">\r\n            <nav className=\"-mb-px flex space-x-2 px-4 overflow-x-auto\" aria-label=\"Tabs\">\r\n                {Object.entries(moduleCategories).map(([key, label]) => (\r\n                    <TabButton key={key} label={label} isActive={activeTab === key} onClick={() => setActiveTab(key)} />\r\n                ))}\r\n            </nav>\r\n        </div>\r\n        <div className=\"p-4\">\r\n             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {modulesForTab.map(module => (\r\n                  <div key={module.id} className={`flex items-center justify-between p-3 bg-gray-800 rounded-md border border-gray-700 ${!module.isRemovable ? 'opacity-70' : ''}`}>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-accent-blue\">\r\n                        {module.name} {!module.isRemovable && <span className=\"text-xs text-gray-400\">(Core)</span>}\r\n                      </h3>\r\n                      <p className=\"text-sm text-text-light text-opacity-70\">{module.description}</p>\r\n                    </div>\r\n                    <label className={`relative inline-flex items-center ml-4 ${!module.isRemovable ? 'cursor-not-allowed' : 'cursor-pointer'}`}>\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        value=\"\"\r\n                        className=\"sr-only peer\"\r\n                        aria-label={`Toggle ${module.name} module`}\r\n                        checked={tempEnabledModules.includes(module.id)}\r\n                        onChange={(e) => handleToggleModule(module.id, e.target.checked)}\r\n                        disabled={!module.isRemovable}\r\n                      />\r\n                      <div className={`w-11 h-6 rounded-full peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-blue/50 ${\r\n                        tempEnabledModules.includes(module.id) ? 'bg-accent-blue' : 'bg-gray-600'\r\n                      } peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all`}></div>\r\n                    </label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex justify-end space-x-4 mt-8\">\r\n          <Button onClick={handleCancel} variant=\"secondary\">Cancel</Button>\r\n          <Button onClick={handleSave} variant=\"primary\">Save Changes</Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WillowsDashboardBuilder;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WonkyAI.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'systemInstruction' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'checkAndExecute' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":34,"column":17,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":32},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'abortRef' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":38,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":38,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'timeoutPromise' is defined but never used. Allowed unused vars must match /^_/u.","line":40,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":40,"endColumn":38},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":61,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":61,"endColumn":24},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":85,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":85,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4485,4488],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4485,4488],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":87,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":87,"endColumn":26}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef } from 'react';\r\nimport useSafeAI from '../hooks/useSafeAI';\r\nimport ContentCard from './ContentCard';\r\nimport SecureMarkdown from '../utils/secureMarkdownRenderer';\r\nimport useAIPromptSafety from '../hooks/useAIPromptSafety';\r\nimport { Button } from './Button';\r\n\r\n// Wonky AI: uses GoogleGenAI with safety wrapper and JSON schema enforcement when needed.\r\n\r\n\r\nconst WonkyAI: React.FC = () => {\r\n    const [prompt, setPrompt] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [response, setResponse] = useState('');\r\n    const [error, setError] = useState('');\r\n\r\n    const systemInstruction = `You are \"Wonky AI,\" an assistant for a neurodivergent systems diagnostician named William. Your core philosophy is \"Structure Engineered for Chaos\" and \"Anti-BS.\" Your responses MUST be:\r\n1.  **Direct and Unambiguous:** No fluff, no motivational platitudes (\"You can do it!\"). Use clear, concise language. State facts.\r\n2.  **Structured:** Use numbered lists, checklists, or markdown tables. Break down complex problems into small, actionable micro-tasks. Use markdown for formatting lists and bolding.\r\n3.  **System-Oriented:** Frame solutions as protocols, systems, or diagnostic procedures. Use engineering and systems-thinking metaphors.\r\n4.  **Neurodivergent-Aware:** Acknowledge and account for executive dysfunction, sensory overload, and decision paralysis in your solutions. Provide the simplest possible first step.\r\n5.  **Problem-Solving Focused:** Do not offer emotional support. Your job is to help the user diagnose the root cause of a problem and build a system to fix it.\r\nExample Query: \"I can't start cleaning my office.\"\r\nYour Response Style:\r\n\"Acknowledged. Executive dysfunction triggered. Initiating 'Office Reset Protocol'.\r\n**Diagnosis:** The task 'clean office' is too large and undefined, causing paralysis.\r\n**Solution:** Reframe as a sequence of micro-tasks.\r\n* Pick up ONE piece of trash off the floor.\r\n* Put ONE item on your desk back where it belongs.\r\n* Set a 5-minute timer.\r\nExecute the first step now.\"\r\nYour primary function is to be a tool that provides structure, not a coach that provides encouragement.`;\r\n\r\n        const { checkAndExecute } = useAIPromptSafety();\r\n        // Call hooks at top-level per the rules of hooks\r\n        const { generate } = useSafeAI();\r\n\r\n        const abortRef = useRef<AbortController | null>(null);\r\n\r\n        async function timeoutPromise<T>(p: Promise<T>, timeoutMs = 15_000) {\r\n            const controller = new AbortController();\r\n            const id = setTimeout(() => controller.abort(), timeoutMs);\r\n            try {\r\n                const ret = await p;\r\n                clearTimeout(id);\r\n                return ret;\r\n            } finally {\r\n                clearTimeout(id);\r\n            }\r\n        }\r\n\r\n        const handleGenerate = async () => {\r\n        if (!prompt.trim()) {\r\n            setError(\"Prompt cannot be empty. Define the problem.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        setResponse('');\r\n        try {\r\n            console.log('WonkyAI: invoking generate with prompt and opts', { prompt: prompt.trim() });\r\n                // Use the top-level `generate` which already uses the prompt safety wrapper\r\n                        const responseSchema = {\r\n                            type: 'object',\r\n                            properties: {\r\n                                summary: { type: 'string' },\r\n                                assist: { type: 'string' }\r\n                            },\r\n                            required: ['summary']\r\n                        } as const;\r\n\r\n                        const result = await generate(prompt.trim(), {\r\n                            model: 'gemini-2.5-pro',\r\n                            responseMimeType: 'application/json',\r\n                            responseSchema,\r\n                            timeoutMs: 20_000,\r\n                            skipPromptSafety: true,\r\n                        });\r\n\r\n                        // useSafeAI returns parsed JSON in `json` when responseMimeType is application/json\r\n                        const json = result?.json;\r\n                        const summary = json?.summary || result?.text || 'No response from model';\r\n                        const assist = json?.assist || '';\r\n                        setResponse(`${summary}\\n\\n${assist}`.trim());\r\n        } catch (e: any) {\r\n            setError(`Error: ${e.message || 'Failed to communicate with the AI model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒæü∩╕Å The Observer\">\r\n            <div className=\"flex flex-col h-full\">\r\n                <div className=\"flex-grow overflow-y-auto p-4 bg-gray-800 rounded-md min-h-[200px] max-h-[400px] border border-gray-700 mb-4\">\r\n                    {loading ? (\r\n                        <div className=\"flex items-center justify-center h-full\">\r\n                            <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-blue\"></div>\r\n                            <p className=\"ml-3\">Diagnosing...</p>\r\n                        </div>\r\n                    ) : error ? (\r\n                         <div className=\"text-red-400 whitespace-pre-wrap\"><p className=\"font-bold mb-2\">System Error:</p>{error}</div>\r\n                    ) : response ? (\r\n                        <div className=\"whitespace-pre-wrap prose prose-invert prose-sm max-w-none\">\r\n                            <SecureMarkdown source={response} />\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-text-light text-opacity-80 text-center flex items-center justify-center h-full\">\r\n                            Define a problem. The Observer will provide structure.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={prompt}\r\n                        onChange={(e) => setPrompt(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && !loading && handleGenerate()}\r\n                        placeholder=\"Describe the chaos...\"\r\n                        className=\"flex-grow p-3 bg-gray-800 border border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue\"\r\n                        disabled={loading}\r\n                    />\r\n                    <Button onClick={handleGenerate} disabled={loading} variant=\"primary\">\r\n                        {loading ? 'Executing...' : 'Generate'}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default WonkyAI;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WonkyAISetupGuide.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":57,"column":7,"nodeType":"MemberExpression","messageId":"unexpected","endLine":57,"endColumn":20},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":124,"column":166,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William&apos;s dashboard is initialized in \"Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William&lsquo;s dashboard is initialized in \"Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William&#39;s dashboard is initialized in \"Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William&rsquo;s dashboard is initialized in \"Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":124,"column":197,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in &quot;Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in &ldquo;Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in &#34;Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in &rdquo;Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":124,"column":211,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in \"Survival Mode&quot;ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in \"Survival Mode&ldquo;ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in \"Survival Mode&#34;ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[5093,5330],"text":"Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in \"Survival Mode&rdquo;ΓÇöonly critical modules are active. Expand capabilities via Mod Mode."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":129,"column":128,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5575,5835],"text":"Flight Protocols (SOPs) are not suggestions. They are the compiled code for your life&apos;s routines and emergencies, stored in the Flight Protocol Vault. Their purpose is to externalize executive function and reduce cognitive load. Execute them without deviation."},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5575,5835],"text":"Flight Protocols (SOPs) are not suggestions. They are the compiled code for your life&lsquo;s routines and emergencies, stored in the Flight Protocol Vault. Their purpose is to externalize executive function and reduce cognitive load. Execute them without deviation."},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5575,5835],"text":"Flight Protocols (SOPs) are not suggestions. They are the compiled code for your life&#39;s routines and emergencies, stored in the Flight Protocol Vault. Their purpose is to externalize executive function and reduce cognitive load. Execute them without deviation."},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5575,5835],"text":"Flight Protocols (SOPs) are not suggestions. They are the compiled code for your life&rsquo;s routines and emergencies, stored in the Flight Protocol Vault. Their purpose is to externalize executive function and reduce cognitive load. Execute them without deviation."},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":195,"column":107,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in &quot;Mod Mode\". Core modules are mandatory for system stability."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in &ldquo;Mod Mode\". Core modules are mandatory for system stability."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in &#34;Mod Mode\". Core modules are mandatory for system stability."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in &rdquo;Mod Mode\". Core modules are mandatory for system stability."},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":195,"column":116,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in \"Mod Mode&quot;. Core modules are mandatory for system stability."},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in \"Mod Mode&ldquo;. Core modules are mandatory for system stability."},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in \"Mod Mode&#34;. Core modules are mandatory for system stability."},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[9689,9834],"text":"Select the initial modules for your personal dashboard. You can change this later in \"Mod Mode&rdquo;. Core modules are mandatory for system stability."},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from './ContentCard.js';\r\nimport { useFeatureFlags } from '@contexts/FeatureFlagsContext';\r\nimport { ALL_WILLIAM_MODULES_CONFIG } from '../constants.js';\r\n\r\n\r\n// NOTE: Filename is legacy. This component is now the full OnboardingGuide.\r\nconst WonkyAISetupGuide = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const [step, setStep] = useState('apiKey');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // State for dashboard setup step\r\n  const [selectedModules, setSelectedModules] = useState(\r\n    appState.williamDashboardModules\r\n  );\r\n\r\n  const handleToggleModule = (moduleId, enable) => {\r\n    setSelectedModules(prev => {\r\n      if (enable && !prev.includes(moduleId)) {\r\n        return [...prev, moduleId];\r\n      }\r\n      if (!enable && prev.includes(moduleId)) {\r\n        return prev.filter(id => id !== moduleId);\r\n      }\r\n      return prev;\r\n    });\r\n  };\r\n\r\n  const handleApiKeySuccess = () => {\r\n    setLoading(false);\r\n    setError(null);\r\n    setStep('walkthrough');\r\n  };\r\n\r\n  const handleSelectKey = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      if (typeof window.aistudio?.openSelectKey === 'function') {\r\n        await window.aistudio.openSelectKey();\r\n        handleApiKeySuccess();\r\n      } else {\r\n        setError(\"`window.aistudio.openSelectKey` is not available. Cannot select API key.\");\r\n        setLoading(false);\r\n      }\r\n    } catch (e) {\r\n      if (e.message && e.message.includes(\"Requested entity was not found.\")) {\r\n          setError(\"Selected API key is invalid or not found. Please select a valid key.\");\r\n      } else {\r\n          setError(`Error opening API Key selector: ${e.message || 'Unknown error'}`);\r\n      }\r\n      console.error('Error opening API key selector:', e);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFinishSetup = () => {\r\n    dispatch({ type: 'SET_WILL_DASHBOARD_MODULES', payload: selectedModules });\r\n    dispatch({ type: 'SET_INITIAL_SETUP_COMPLETE', payload: true });\r\n  };\r\n\r\n  const { setFlag } = useFeatureFlags();\r\n\r\n  const handleSkipAI = () => {\r\n    // Persist the flag to disable AI features\r\n    setFlag('aiEnabled', false);\r\n    handleFinishSetup();\r\n  }\r\n\r\n  if (step === 'apiKey') {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto py-8\">\r\n        <ContentCard title=\"Welcome to Wonky Sprout OS\" titleClassName=\"text-accent-teal text-4xl\">\r\n          <h2 className=\"text-2xl font-bold text-accent-blue mb-4\">Step 1: Enable AI Features</h2>\r\n          <p className=\"text-lg text-text-light text-opacity-80 mb-6\">\r\n            To begin, you must select an API key to enable powerful AI features within the OS. This is a mandatory step.\r\n            Without a valid key, AI functionalities will be unavailable.\r\n          </p>\r\n          {error && (\r\n            <div role=\"alert\" className=\"bg-red-900/30 border border-red-700 text-red-400 p-4 rounded-md mb-6\">\r\n              <p className=\"font-bold mb-2\">System Error:</p>\r\n              <p>{error}</p>\r\n            </div>\r\n          )}\r\n          <button\r\n            onClick={handleSelectKey}\r\n            disabled={loading}\r\n            className=\"w-full px-8 py-4 bg-accent-blue text-background-dark text-xl font-bold rounded-md hover:bg-blue-400 transition-colors duration-200 disabled:bg-gray-600 disabled:cursor-not-allowed flex items-center justify-center\"\r\n            aria-label=\"Get Started and Select API Key\"\r\n          >\r\n            {loading ? 'Opening...' : 'Select API Key'}\r\n          </button>\r\n          <div className=\"mt-4 text-center\">\r\n            <button onClick={handleSkipAI} className=\"text-sm text-gray-300 underline\">Skip AI & Continue in Manual Mode</button>\r\n          </div>\r\n          <p className=\"text-sm text-text-light text-opacity-70 mt-6 text-center\">\r\n            For more information on billing and API keys, please visit:{\" \"}\r\n            <a href=\"https://ai.google.dev/gemini-api/docs/billing\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-accent-blue hover:underline\">\r\n              ai.google.dev/gemini-api/docs/billing\r\n            </a>\r\n          </p>\r\n        </ContentCard>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (step === 'walkthrough') {\r\n    return (\r\n      <div className=\"max-w-3xl mx-auto py-8\">\r\n        <ContentCard title=\"System Online: Wonky Sprout OS Initialized\" titleClassName=\"text-accent-teal text-4xl\">\r\n          <div className=\"space-y-6 text-lg text-text-light text-opacity-90\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-accent-blue mb-2\">Step 2: Core System Briefing</h2>\r\n              <p>Acknowledged. API Key validated. This is a mandatory briefing on core system architecture.</p>\r\n            </div>\r\n\r\n            <div className=\"p-4 bg-gray-800 rounded-lg border border-gray-700\">\r\n              <h3 className=\"font-bold text-accent-green\">IDENTITY: Dashboards</h3>\r\n              <p className=\"text-sm mt-1\">Your Mission Control is persona-driven. Select an identity (William, Co-Parent) to load a pre-configured dashboard. William's dashboard is initialized in \"Survival Mode\"ΓÇöonly critical modules are active. Expand capabilities via Mod Mode.</p>\r\n            </div>\r\n\r\n            <div className=\"p-4 bg-gray-800 rounded-lg border border-gray-700\">\r\n              <h3 className=\"font-bold text-accent-green\">EXECUTABLES: Flight Protocols</h3>\r\n              <p className=\"text-sm mt-1\">Flight Protocols (SOPs) are not suggestions. They are the compiled code for your life's routines and emergencies, stored in the Flight Protocol Vault. Their purpose is to externalize executive function and reduce cognitive load. Execute them without deviation.</p>\r\n            </div>\r\n\r\n            <div className=\"p-4 bg-gray-800 rounded-lg border border-gray-700\">\r\n              <h3 className=\"font-bold text-accent-green\">TOOLCHAIN: Modules</h3>\r\n              <p className=\"text-sm mt-1\">Dashboards are constructed from a modular toolchain (trackers, AI assistants, calendars). Enable, disable, and reconfigure your toolchain to build the precise interface required to diagnose and fix chaos.</p>\r\n            </div>\r\n            \r\n            <button\r\n              onClick={() => setStep('dashboardSetup')}\r\n              className=\"w-full px-8 py-4 bg-accent-green text-background-dark text-xl font-bold rounded-md hover:bg-green-500 transition-colors duration-200\"\r\n              aria-label=\"Finish Briefing and Proceed to Dashboard Setup\"\r\n            >\r\n              Briefing Complete: Proceed to Dashboard Setup\r\n            </button>\r\n          </div>\r\n        </ContentCard>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (step === 'dashboardSetup') {\r\n    // FIX: Specified the exact string literals for the category to satisfy TypeScript.\r\n    const renderModuleCategory = (category, title) => {\r\n        const modules = ALL_WILLIAM_MODULES_CONFIG.filter(m => m.category === category);\r\n        if (modules.length === 0) return null;\r\n\r\n        return (\r\n           <ContentCard title={title} titleClassName=\"text-accent-blue text-2xl\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                {modules.map(module => (\r\n                  <div key={module.id} className={`flex flex-col justify-between p-3 bg-gray-800 rounded-md border border-gray-700 h-full ${!module.isRemovable ? 'opacity-70' : ''}`}>\r\n                    <div>\r\n                      <h3 className=\"font-semibold text-accent-teal\">\r\n                        {module.name} {!module.isRemovable && <span className=\"text-xs text-gray-400\">(Core)</span>}\r\n                      </h3>\r\n                      <p className=\"text-sm text-text-light text-opacity-70 mt-1\">{module.description}</p>\r\n                    </div>\r\n                    <div className=\"flex justify-end mt-3\">\r\n                      <label className={`relative inline-flex items-center ${!module.isRemovable ? 'cursor-not-allowed' : 'cursor-pointer'}`}>\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          value=\"\"\r\n                          className=\"sr-only peer\"\r\n                            aria-label={`Toggle ${module.name} module`}\r\n                          checked={selectedModules.includes(module.id)}\r\n                          onChange={(e) => handleToggleModule(module.id, e.target.checked)}\r\n                          disabled={!module.isRemovable}\r\n                        />\r\n                        <div className={`w-11 h-6 rounded-full peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-accent-blue/50 ${\r\n                          selectedModules.includes(module.id) ? 'bg-accent-blue' : 'bg-gray-600'\r\n                        } peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border after:border-gray-300 after:rounded-full after:h-5 after:w-5 after:transition-all`}></div>\r\n                      </label>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </ContentCard>\r\n        );\r\n    }\r\n    return (\r\n      <div className=\"max-w-4xl mx-auto py-8\">\r\n          <ContentCard title=\"Initial Dashboard Setup\" titleClassName=\"text-accent-teal text-4xl\">\r\n              <div className=\"space-y-6 text-lg text-text-light text-opacity-90\">\r\n                <div>\r\n                  <h2 className=\"text-2xl font-bold text-accent-blue mb-2\">Step 3: Configure Your Dashboard</h2>\r\n                  <p>Select the initial modules for your personal dashboard. You can change this later in \"Mod Mode\". Core modules are mandatory for system stability.</p>\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                    {renderModuleCategory('core', 'Core Modules')}\r\n                    {renderModuleCategory('trackers', 'Tracker Modules')}\r\n                    {renderModuleCategory('utilities', 'Utility Modules')}\r\n                    {renderModuleCategory('content', 'Content Modules')}\r\n                    {renderModuleCategory('selection', 'Selector Modules')}\r\n                </div>\r\n\r\n                <button\r\n                    onClick={handleFinishSetup}\r\n                    className=\"w-full mt-8 px-8 py-4 bg-accent-green text-background-dark text-xl font-bold rounded-md hover:bg-green-500 transition-colors duration-200\"\r\n                    aria-label=\"Finish Setup and Launch Dashboard\"\r\n                >\r\n                    Save Configuration & Launch Dashboard\r\n                </button>\r\n              </div>\r\n          </ContentCard>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport default WonkyAISetupGuide;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\WonkyToolkit.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\componentMap.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\AICorrelationAnalysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\AIFinancialAnalysis.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":83,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4138,4295],"text":"\r\n                Let the AI analyze your current month&apos;s spending to identify patterns, check budget compliance, and surface key observations.\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4138,4295],"text":"\r\n                Let the AI analyze your current month&lsquo;s spending to identify patterns, check budget compliance, and surface key observations.\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4138,4295],"text":"\r\n                Let the AI analyze your current month&#39;s spending to identify patterns, check budget compliance, and surface key observations.\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4138,4295],"text":"\r\n                Let the AI analyze your current month&rsquo;s spending to identify patterns, check budget compliance, and surface key observations.\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../ContentCard.js';\r\nimport useSafeAI from '../../hooks/useSafeAI';\r\nimport { SecureMarkdown } from '../../utils/secureMarkdownRenderer.js';\r\nimport { useAIPromptSafety } from '../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../AIConsentModal.js';\r\nimport PIIWarningModal from '../PIIWarningModal.js';\r\n\r\nconst AIFinancialAnalysis = () => {\r\n    const { appState } = useAppState();\r\n    const { expenses, financialBudgets } = appState;\r\n    const [analysis, setAnalysis] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n\r\n    const generatePrompt = () => {\r\n        const now = new Date();\r\n        const currentMonthExpenses = expenses\r\n            .filter(exp => new Date(exp.date).getMonth() === now.getMonth() && new Date(exp.date).getFullYear() === now.getFullYear())\r\n            .map(exp => `- $${exp.amount.toFixed(2)} on ${exp.description} (${exp.category}) on ${new Date(exp.date).toLocaleDateString()}`)\r\n            .join('\\n');\r\n\r\n        const budgets = Object.entries(financialBudgets)\r\n            // FIX: Cast amount to number to allow toFixed call.\r\n            .map(([cat, amount]) => `- ${cat}: $${Number(amount).toFixed(2)}`)\r\n            .join('\\n');\r\n\r\n        return `\r\n            You are a financial analyst AI for a neurodivergent user's personal operating system. Your task is to analyze their spending for the current month and provide concise, actionable insights. Avoid generic advice.\r\n\r\n            **Core Directives:**\r\n            1.  **Identify Key Patterns:** Find the top 3 spending categories. Note any significant spending spikes on specific days.\r\n            2.  **Budget vs. Actuals:** Compare spending in each category to its budget. Highlight any categories that are over or close to their budget.\r\n            3.  **Actionable Insights:** Frame your findings as neutral observations or questions for the user to consider. For example, \"Spending on 'Personal' is 50% higher than last month. Was this planned?\"\r\n            4.  **Output Structure:** Provide your analysis in a clear markdown format with these exact headings: \"## Spending Overview\", \"## Budget Compliance\", and \"## Key Observations\".\r\n\r\n            **Provided Data for Current Month:**\r\n\r\n            **Budgets:**\r\n            ${budgets || \"No budgets set.\"}\r\n\r\n            **Expenses:**\r\n            ${currentMonthExpenses || \"No expenses logged.\"}\r\n\r\n            Now, generate the financial analysis. If data is insufficient, state that clearly.\r\n        `;\r\n    };\r\n    \r\n    const { generate } = useSafeAI();\r\n\r\n    const handleAnalysis = async (safePrompt?: string) => {\r\n        setLoading(true);\r\n        setError('');\r\n        setAnalysis('');\r\n        const prompt = generatePrompt();\r\n        try {\r\n            const result = await generate(safePrompt ?? prompt, { model: 'gemini-2.5-flash', timeoutMs: 20000, skipPromptSafety: true });\r\n            setAnalysis(result?.text || (result?.json ? JSON.stringify(result.json) : ''));\r\n        } catch (e) {\r\n            setError(`Analysis failed: ${e.message || 'Unknown error'}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const triggerAnalysis = () => {\r\n        checkAndExecute(generatePrompt(), handleAnalysis);\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒñû AI Financial Analyst\">\r\n             {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n             {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n             <p className=\"text-text-light text-opacity-80 mb-4\">\r\n                Let the AI analyze your current month's spending to identify patterns, check budget compliance, and surface key observations.\r\n            </p>\r\n            <button\r\n                onClick={triggerAnalysis}\r\n                disabled={loading}\r\n                className=\"w-full px-6 py-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 disabled:bg-gray-600\"\r\n            >\r\n               {loading ? 'Analyzing...' : 'Γ£¿ Run Financial Analysis'}\r\n            </button>\r\n            \r\n            <div className=\"mt-4 flex-grow p-3 bg-gray-800 rounded-md min-h-[150px] border border-gray-700 overflow-y-auto\">\r\n                {loading && <div className=\"flex items-center justify-center h-full\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-blue\"></div><p className=\"ml-3\">Analyzing finances...</p></div>}\r\n                {error && <div className=\"text-red-400 p-4\">{error}</div>}\r\n                {analysis && (\r\n                    <div className=\"prose prose-invert prose-sm max-w-none\">\r\n                        <SecureMarkdown content={analysis} />\r\n                    </div>\r\n                )}\r\n                {!loading && !error && !analysis && <p className=\"text-center text-text-light text-opacity-80 p-4\">Run analysis to see financial insights.</p>}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default AIFinancialAnalysis;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\AIRealtimeDiagnostic.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\AITrendAnalysis.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":111,"column":27,"nodeType":"MemberExpression","messageId":"unexpected","endLine":111,"endColumn":40},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":115,"column":5,"endLine":115,"endColumn":60,"severity":2,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../ContentCard.js';\r\nimport useSafeAI from '../../hooks/useSafeAI.js';\r\nimport { SecureMarkdown } from '../../utils/secureMarkdownRenderer.js';\r\nimport { useAIPromptSafety } from '../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../AIConsentModal.js';\r\nimport PIIWarningModal from '../PIIWarningModal.js';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\n\r\nconst getWeekKey = (d) => {\r\n    const date = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate()));\r\n    date.setUTCDate(date.getUTCDate() + 4 - (date.getUTCDay()||7));\r\n    const yearStart = new Date(Date.UTC(date.getUTCFullYear(),0,1));\r\n    const weekNo = Math.ceil((((date.getTime() - yearStart.getTime()) / 86400000) + 1)/7);\r\n    return `${date.getUTCFullYear()}-W${weekNo}`;\r\n};\r\n\r\nconst CACHE_KEY = 'wonky-sprout-weekly-trend-analysis';\r\n\r\n\r\nconst AITrendAnalysis = () => {\r\n    const { appState } = useAppState();\r\n    const [analysis, setAnalysis] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n    const safeAI = useSafeAI();\r\n\r\n    const generatePrompt = () => {\r\n        const timeRange = 7;\r\n        const endDate = new Date();\r\n        const startDate = new Date();\r\n        startDate.setDate(endDate.getDate() - timeRange);\r\n\r\n        const filteredHabitData = Object.entries(appState.habitTracker.log)\r\n            .filter(([date]) => new Date(date) >= startDate && new Date(date) <= endDate)\r\n            // FIX: Cast habitIds to string[] to resolve type error.\r\n            .map(([date, habitIds]) => `${date}: ${(habitIds as string[]).map(id => appState.habitTracker.habits.find(h => h.id === id)?.name || 'Unknown Habit').join(', ')}`)\r\n            .join('\\n');\r\n            \r\n        const filteredExpenseData = appState.expenses\r\n            .filter(exp => new Date(exp.date) >= startDate && new Date(exp.date) <= endDate)\r\n            .map(exp => `${toYMD(new Date(exp.date))}: $${exp.amount.toFixed(2)} on ${exp.description} (${exp.category})`)\r\n            .join('\\n');\r\n\r\n        const filteredCalendarData = appState.calendarEvents\r\n            .filter(event => new Date(event.date) >= startDate && new Date(event.date) <= endDate)\r\n            .map(event => `${toYMD(new Date(event.date))}: ${event.title}`)\r\n            .join('\\n');\r\n        \r\n        return `\r\n            You are a data analyst AI for a neurodivergent user's personal operating system. Your task is to find non-obvious correlations and patterns within their life data from the last 7 days to prepare them for their Weekly Review.\r\n\r\n            **Core Directives:**\r\n            1.  **Synthesize, Don't Summarize:** Do not just list the data. Find connections *between* different data types.\r\n            2.  **Focus on Causality:** Hypothesize potential causal links. Use phrases like \"It appears that...\", \"This may indicate...\", \"There is a correlation between...\".\r\n            3.  **Output Actionable Questions:** Your primary output should be a list of 2-4 insightful questions for the user to reflect on during their Weekly Review. These questions should be based on the patterns you identify.\r\n\r\n            **Provided Data for the last 7 days:**\r\n\r\n            **Habit Compliance Log:**\r\n            ${filteredHabitData || \"No habit data.\"}\r\n\r\n            **Expense Log:**\r\n            ${filteredExpenseData || \"No expense data.\"}\r\n\r\n            **Calendar Events:**\r\n            ${filteredCalendarData || \"No calendar data.\"}\r\n\r\n            Now, generate the analysis. The output should be a concise markdown list of questions for reflection.\r\n        `;\r\n    };\r\n    \r\n    const runAnalysis = async () => {\r\n        setLoading(true);\r\n        setError('');\r\n        const prompt = generatePrompt();\r\n            try {\r\n            const response = await safeAI.generate(prompt, { model: 'gemini-2.5-pro', timeoutMs: 20000 });\r\n            const analysisText = response.text || (response.json ? JSON.stringify(response.json) : '');\r\n            setAnalysis(analysisText);\r\n            const currentWeekKey = getWeekKey(new Date());\r\n            localStorage.setItem(CACHE_KEY, JSON.stringify({ weekKey: currentWeekKey, analysis: analysisText }));\r\n        } catch (e) {\r\n            setError(`Analysis failed: ${e.message || 'Unknown error'}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const triggerAnalysis = () => checkAndExecute(generatePrompt(), runAnalysis);\r\n\r\n    useEffect(() => {\r\n        const currentWeekKey = getWeekKey(new Date());\r\n        const cachedData = localStorage.getItem(CACHE_KEY);\r\n        if (cachedData) {\r\n            try {\r\n                const parsed = JSON.parse(cachedData);\r\n                if (parsed.weekKey === currentWeekKey) {\r\n                    setAnalysis(parsed.analysis);\r\n                    return; // Valid cache for this week exists\r\n                }\r\n            } catch (e) { console.error(\"Failed to parse analysis cache:\", e); }\r\n        }\r\n        // If no valid cache, automatically run analysis\r\n        triggerAnalysis();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); // Run only on mount\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒñû Weekly AI Trend Analysis\">\r\n             {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n             {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n             <p className=\"text-text-light text-opacity-80 mb-4\">\r\n                The AI automatically analyzes your last 7 days of data once a week to find patterns and generate questions for your Weekly Review.\r\n            </p>\r\n            \r\n            <div className=\"flex-grow p-3 bg-gray-800 rounded-md min-h-[200px] border border-gray-700 overflow-y-auto\">\r\n                {loading && <div className=\"flex items-center justify-center h-full\"><div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-accent-blue\"></div><p className=\"ml-3\">Running weekly analysis...</p></div>}\r\n                {error && <div className=\"text-red-400 p-4\">{error}</div>}\r\n                {analysis && !loading && (\r\n                    <>\r\n                        <h4 className=\"font-bold text-accent-green mb-2\">Questions for Your Weekly Review:</h4>\r\n                        <div className=\"prose prose-invert prose-sm max-w-none\">\r\n                            <SecureMarkdown content={analysis} />\r\n                        </div>\r\n                    </>\r\n                )}\r\n                {!loading && !error && !analysis && <p className=\"text-center text-text-light text-opacity-80 p-4\">Generating analysis for this week...</p>}\r\n            </div>\r\n             <button\r\n                onClick={triggerAnalysis}\r\n                disabled={loading}\r\n                className=\"w-full mt-4 px-6 py-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 disabled:bg-gray-600\"\r\n            >\r\n               {loading ? 'Re-analyzing...' : 'Γ£¿ Force Re-analysis'}\r\n            </button>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default AITrendAnalysis;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\ExpenseBreakdown.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\HabitHeatmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\insights\\SpendingVelocityChart.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\AchievementSystemModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\AchievementTrackerModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\CriticalTasksModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\DailyEssentialsModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\DayProgressBarModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\DirectMessageModule.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":43,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1400,1497],"text":"\r\n                Need something important? Send a direct alert to Dad&apos;s dashboard.\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1400,1497],"text":"\r\n                Need something important? Send a direct alert to Dad&lsquo;s dashboard.\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1400,1497],"text":"\r\n                Need something important? Send a direct alert to Dad&#39;s dashboard.\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1400,1497],"text":"\r\n                Need something important? Send a direct alert to Dad&rsquo;s dashboard.\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../ContentCard.js';\r\n\r\nconst DirectMessageModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { dashboardType, parentalAlerts } = appState;\r\n    const [message, setMessage] = useState('');\r\n    const [confirmation, setConfirmation] = useState('');\r\n\r\n    if (dashboardType !== 'willow' && dashboardType !== 'sebastian') {\r\n        return null; // Should not be rendered on other dashboards\r\n    }\r\n    \r\n    const messagesForPersona = parentalAlerts\r\n        .filter(alert => alert.from === dashboardType)\r\n        .sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\r\n\r\n\r\n    const handleSend = (e) => {\r\n        e.preventDefault();\r\n        if (!message.trim()) return;\r\n\r\n        dispatch({\r\n            type: 'SEND_PARENTAL_ALERT',\r\n            payload: {\r\n                from: dashboardType,\r\n                message: message.trim(),\r\n            },\r\n        });\r\n        \r\n        setConfirmation(`Message sent!`);\r\n        setMessage('');\r\n        \r\n        // Clear confirmation after a few seconds\r\n        setTimeout(() => setConfirmation(''), 3000);\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒôú Direct Message to Dad\">\r\n            <p className=\"text-sm text-text-light text-opacity-80 mb-4\">\r\n                Need something important? Send a direct alert to Dad's dashboard.\r\n            </p>\r\n            <form onSubmit={handleSend} className=\"space-y-3\">\r\n                <textarea\r\n                    value={message}\r\n                    onChange={(e) => setMessage(e.target.value)}\r\n                    rows={3}\r\n                    className=\"w-full p-3 bg-gray-800 border border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue\"\r\n                    placeholder=\"Type your message here...\"\r\n                    required\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"w-full p-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 transition-colors\"\r\n                >\r\n                    Send to Dad\r\n                </button>\r\n            </form>\r\n            {confirmation && (\r\n                <p className=\"mt-3 text-sm text-center text-accent-green animate-pulse\">\r\n                    {confirmation}\r\n                </p>\r\n            )}\r\n\r\n            <div className=\"mt-4 pt-4 border-t border-gray-700\">\r\n                <h4 className=\"font-semibold text-accent-teal mb-2\">Message History</h4>\r\n                <div className=\"space-y-2 max-h-48 overflow-y-auto pr-2\">\r\n                    {messagesForPersona.length > 0 ? (\r\n                        messagesForPersona.map(alert => (\r\n                            <div key={alert.id} className={`p-2 rounded-md border ${alert.status === 'acknowledged' ? 'bg-gray-800 border-gray-700' : 'bg-accent-blue/10 border-accent-blue/30'}`}>\r\n                                <p className=\"text-sm text-text-light\">{alert.message}</p>\r\n                                <div className={`text-xs mt-1 font-semibold ${alert.status === 'acknowledged' ? 'text-accent-green' : 'text-accent-blue animate-pulse'}`}>\r\n                                    {alert.status === 'acknowledged' ? 'Seen by Dad Γ£à' : 'Sent...'}\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"text-sm text-center text-gray-500 p-4\">No messages sent yet.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default DirectMessageModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\EssentialsTrackerModule.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":10,"column":95,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the &apos;Daily Command Module' for a more unified daily workflow.\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the &lsquo;Daily Command Module' for a more unified daily workflow.\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the &#39;Daily Command Module' for a more unified daily workflow.\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the &rsquo;Daily Command Module' for a more unified daily workflow.\r\n            "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":10,"column":116,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the 'Daily Command Module&apos; for a more unified daily workflow.\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the 'Daily Command Module&lsquo; for a more unified daily workflow.\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the 'Daily Command Module&#39; for a more unified daily workflow.\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[258,425],"text":"\r\n                This module has been deprecated. Its functionality is now integrated into the 'Daily Command Module&rsquo; for a more unified daily workflow.\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport ContentCard from '../ContentCard';\r\n\r\nconst EssentialsTrackerModule = () => {\r\n    return (\r\n        <ContentCard title=\"≡ƒÑù Daily Essentials\">\r\n            <p className=\"text-text-light text-opacity-80 text-center p-4\">\r\n                This module has been deprecated. Its functionality is now integrated into the 'Daily Command Module' for a more unified daily workflow.\r\n            </p>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default EssentialsTrackerModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\FamilyChatModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\FamilyModeStatusModule.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":76,"column":73,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2772,2788],"text":"Today&apos;s Schedule"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2772,2788],"text":"Today&lsquo;s Schedule"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2772,2788],"text":"Today&#39;s Schedule"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2772,2788],"text":"Today&rsquo;s Schedule"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React, { useMemo } from 'react';\r\nimport ContentCard from '../ContentCard.js';\r\nimport { useCurrentMode } from '../../hooks/useCurrentMode.js';\r\nimport { useTime } from '../../hooks/useTime.js';\r\n// FIX: Changed import for ChecklistItemData from checklist-data.js to types.ts\r\nimport { ALL_CHECKLIST_DATA } from '../../checklist-data.js';\r\nimport type { ChecklistItemData } from '../../types.js';\r\n\r\n\r\nconst FamilyModeStatusModule: React.FC = () => {\r\n    const currentMode = useCurrentMode();\r\n    const { date: now, day } = useTime();\r\n\r\n    const isFamilyMode = currentMode === 'Family Structure';\r\n\r\n    const scheduleInfo = useMemo(() => {\r\n        if (!isFamilyMode) {\r\n            return {\r\n                currentActivity: \"Quiet Independent Play\",\r\n                fullSchedule: [],\r\n            };\r\n        }\r\n\r\n        const scheduleIdMap: { [key: number]: string } = {\r\n            0: 'fsm-sunday',   // Sunday\r\n            1: 'fsm-monday',   // Monday\r\n            5: 'fsm-friday',   // Friday\r\n            6: 'fsm-saturday', // Saturday\r\n        };\r\n        const scheduleId = scheduleIdMap[day];\r\n        \r\n        const familySchedule = ALL_CHECKLIST_DATA.find(s => s.id === scheduleId)?.items;\r\n\r\n        if (!familySchedule) {\r\n            return {\r\n                currentActivity: \"Scheduled Activity\",\r\n                fullSchedule: [],\r\n            };\r\n        }\r\n        \r\n        const currentHourDecimal = now.getHours() + (now.getMinutes() / 60);\r\n\r\n        let currentActivity = \"Free Play\"; // Default\r\n        const fullSchedule = familySchedule.map((item: ChecklistItemData) => {\r\n            const isActive = item.startHour !== undefined && item.endHour !== undefined && currentHourDecimal >= item.startHour && currentHourDecimal < item.endHour;\r\n            if (isActive) {\r\n                currentActivity = item.label;\r\n            }\r\n            return {\r\n                ...item,\r\n                isActive,\r\n            };\r\n        });\r\n\r\n        return { currentActivity, fullSchedule };\r\n\r\n    }, [isFamilyMode, day, now]);\r\n\r\n\r\n    const modeInfo = {\r\n        title: isFamilyMode ? \"≡ƒæ¿ΓÇì≡ƒæºΓÇì≡ƒæª Family Time\" : \"≡ƒ¢á∩╕Å Dad's Work Time\",\r\n        color: isFamilyMode ? 'border-accent-teal' : 'border-accent-blue',\r\n        textColor: isFamilyMode ? 'text-accent-teal' : 'text-accent-blue',\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"Family Status\" showHeader={false}>\r\n            <div className={`p-4 rounded-lg border-2 ${modeInfo.color}`}>\r\n                <h3 className={`text-2xl font-bold text-center ${modeInfo.textColor}`}>{modeInfo.title}</h3>\r\n                \r\n                {isFamilyMode ? (\r\n                    <div className=\"mt-4\">\r\n                        <h4 className=\"font-bold text-center mb-2\">Today's Schedule</h4>\r\n                        <ul className=\"space-y-1 text-sm max-h-60 overflow-y-auto pr-2\">\r\n                            {scheduleInfo.fullSchedule.map(item => (\r\n                                <li key={item.id} className={`p-2 rounded-md transition-colors ${item.isActive ? 'bg-accent-teal/20' : 'bg-gray-800'}`}>\r\n                                    <span className={`font-bold w-24 inline-block ${item.isActive ? 'text-accent-teal' : 'text-gray-400'}`}>{item.time}</span>\r\n                                    <span className=\"ml-2\">{item.label}</span>\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                ) : (\r\n                     <div className=\"text-center mt-2\">\r\n                        <p className=\"text-sm text-gray-400\">Current Activity:</p>\r\n                        <p className=\"text-xl font-semibold\">{scheduleInfo.currentActivity}</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default FamilyModeStatusModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\GemAdminModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'persona' is missing in props validation","line":9,"column":27,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'persona.charAt' is missing in props validation","line":22,"column":66,"nodeType":"Identifier","messageId":"missingPropType","endLine":22,"endColumn":72},{"ruleId":"react/prop-types","severity":2,"message":"'persona.slice' is missing in props validation","line":22,"column":100,"nodeType":"Identifier","messageId":"missingPropType","endLine":22,"endColumn":105}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../ContentCard.js';\r\nimport { ALL_GEMS } from '../../constants.js';\r\n\r\nconst GemAdminModule = ({ persona }) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const collectedGems = appState.collectedGems[persona] || [];\r\n\r\n    const handleAward = (gemId) => {\r\n        dispatch({ type: 'ADD_GEM', payload: { id: gemId, recipient: persona } });\r\n    };\r\n\r\n    const handleRevoke = (gemId) => {\r\n        dispatch({ type: 'REMOVE_GEM', payload: { id: gemId, recipient: persona } });\r\n    };\r\n\r\n    return (\r\n        <ContentCard title={`ΓÜÖ∩╕Å Gem Administration for ${persona.charAt(0).toUpperCase() + persona.slice(1)}`} titleClassName=\"text-accent-warning text-xl\">\r\n            <p className=\"text-sm text-text-light text-opacity-80 mb-4\">\r\n                Manually award or revoke gems. This is an administrative tool and is only visible in Mod Mode.\r\n            </p>\r\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 max-h-80 overflow-y-auto pr-2\">\r\n                {ALL_GEMS.map(gem => {\r\n                    const isCollected = collectedGems.includes(gem.id);\r\n                    return (\r\n                        <div key={gem.id} className={`p-2 rounded-lg border flex flex-col items-center ${isCollected ? 'bg-accent-green/10 border-accent-green/30' : 'bg-gray-800 border-gray-700'}`}>\r\n                            <span className=\"text-3xl\">{gem.emoji}</span>\r\n                            <span className=\"text-xs text-center mt-1\">{gem.label}</span>\r\n                            <div className=\"flex gap-2 mt-2\">\r\n                                <button \r\n                                    onClick={() => handleAward(gem.id)}\r\n                                    disabled={isCollected}\r\n                                    className=\"px-2 py-1 text-xs font-semibold rounded bg-accent-blue text-background-dark disabled:bg-gray-600 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    Award\r\n                                </button>\r\n                                <button \r\n                                    onClick={() => handleRevoke(gem.id)}\r\n                                    disabled={!isCollected}\r\n                                    className=\"px-2 py-1 text-xs font-semibold rounded bg-red-800/80 text-red-300 disabled:bg-gray-600 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    Revoke\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default GemAdminModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\KidsStatusModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\KidsTrackerModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":9,"column":25,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":30},{"ruleId":"react/prop-types","severity":2,"message":"'isActive' is missing in props validation","line":9,"column":32,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":40},{"ruleId":"react/prop-types","severity":2,"message":"'onClick' is missing in props validation","line":9,"column":42,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":49},{"ruleId":"react/prop-types","severity":2,"message":"'name' is missing in props validation","line":20,"column":22,"nodeType":"Property","messageId":"missingPropType","endLine":20,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'idPrefix' is missing in props validation","line":20,"column":28,"nodeType":"Property","messageId":"missingPropType","endLine":20,"endColumn":36},{"ruleId":"react/prop-types","severity":2,"message":"'emoji' is missing in props validation","line":20,"column":38,"nodeType":"Property","messageId":"missingPropType","endLine":20,"endColumn":43}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext'; // Adjusted path\r\n\r\nimport ContentCard from '../ContentCard'; // Adjusted path\r\nimport TextInputItem from '../TextInputItem'; // Adjusted path\r\n\r\nconst StatusButton = ({ label, isActive, onClick }) => {\r\n    const baseClass = 'px-2 py-1 rounded-md text-xs font-semibold transition-colors w-full break-words';\r\n    const activeClass = 'bg-accent-blue text-background-dark';\r\n    const inactiveClass = 'bg-gray-700 hover:bg-gray-600';\r\n    return (\r\n        <button onClick={onClick} className={`${baseClass} ${isActive ? activeClass : inactiveClass}`}>\r\n            {label}\r\n        </button>\r\n    );\r\n};\r\n\r\nconst KidStatus = ({ name, idPrefix, emoji }) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const isWillow = name === 'Willow';\r\n    const location = isWillow ? appState.kidsWillowLocation : appState.kidsSebastianLocation;\r\n    \r\n    const setLocation = (loc) => {\r\n        dispatch({\r\n            type: 'SET_KID_LOCATION', payload: { kid: isWillow ? 'willow' : 'sebastian', location: loc }\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h3 className=\"text-lg font-semibold text-accent-teal mb-2\">{emoji} {name}</h3>\r\n            <div className=\"grid grid-cols-3 gap-2 mb-3\">\r\n                <StatusButton label=\"At Mom's\" isActive={location === \"At Mom's\"} onClick={() => setLocation(\"At Mom's\")} />\r\n                <StatusButton label=\"With Me\" isActive={location === \"With Me\"} onClick={() => setLocation(\"With Me\")} />\r\n                <StatusButton label=\"School/Other\" isActive={location === \"School/Other\"} onClick={() => setLocation(\"School/Other\")} />\r\n            </div>\r\n            <TextInputItem id={`${idPrefix}-note`} label=\"Note:\" placeholder=\"Quick update...\" />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst KidsTrackerModule = () => {\r\n    return (\r\n        <ContentCard title=\"≡ƒæ╢ Kids Status\">\r\n            <div className=\"space-y-4\">\r\n                <KidStatus name=\"Willow\" idPrefix=\"kids-willow\" emoji=\"≡ƒî╕\" />\r\n                <div className=\"border-t border-gray-700\"></div>\r\n                <KidStatus name=\"Sebastian\" idPrefix=\"kids-sebastian\" emoji=\"≡ƒªû\" />\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default KidsTrackerModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\ObserverModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\PendingRedemptionsModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\RewardStoreModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\StatusTrackerModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":8,"column":25,"nodeType":"Property","messageId":"missingPropType","endLine":8,"endColumn":30},{"ruleId":"react/prop-types","severity":2,"message":"'isActive' is missing in props validation","line":8,"column":32,"nodeType":"Property","messageId":"missingPropType","endLine":8,"endColumn":40},{"ruleId":"react/prop-types","severity":2,"message":"'onClick' is missing in props validation","line":8,"column":42,"nodeType":"Property","messageId":"missingPropType","endLine":8,"endColumn":49},{"ruleId":"react/prop-types","severity":2,"message":"'activeClass' is missing in props validation","line":8,"column":51,"nodeType":"Property","messageId":"missingPropType","endLine":8,"endColumn":92}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext'; // Adjusted path\r\n\r\nimport ContentCard from '../ContentCard'; // Adjusted path\r\n\r\nconst StatusButton = ({ label, isActive, onClick, activeClass = 'bg-accent-blue text-white' }) => {\r\n    const baseClass = 'px-3 py-1 rounded-md text-sm font-semibold transition-colors w-full break-words';\r\n    const inactiveClass = 'bg-gray-700 hover:bg-gray-600';\r\n    return (\r\n        <button\r\n            onClick={onClick}\r\n            className={`${baseClass} ${isActive ? activeClass : inactiveClass}`}\r\n            aria-pressed={isActive ? 'true' : 'false'}\r\n            aria-label={`Set status: ${label}`}\r\n            type=\"button\"\r\n        >\r\n            {label}\r\n        </button>\r\n    );\r\n};\r\n\r\nconst StatusTrackerModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n\r\n    const setMood = (mood) => dispatch({ type: 'SET_MOOD', payload: mood });\r\n    const setEnergy = (energy) => dispatch({ type: 'SET_ENERGY', payload: energy });\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒæñ Personal Status\">\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <h3 className=\"text-md font-semibold text-accent-teal mb-2\">≡ƒºá Mood</h3>\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                        <StatusButton label=\"Focused\" isActive={appState.statusMood === 'Focused'} onClick={() => setMood('Focused')} activeClass=\"bg-accent-green text-background-dark\" />\r\n                        <StatusButton label=\"Calm\" isActive={appState.statusMood === 'Calm'} onClick={() => setMood('Calm')} activeClass=\"bg-accent-blue text-background-dark\" />\r\n                        <StatusButton label=\"Overwhelmed\" isActive={appState.statusMood === 'Overwhelmed'} onClick={() => setMood('Overwhelmed')} activeClass=\"bg-red-800 text-white\" />\r\n                    </div>\r\n                </div>\r\n                 <div>\r\n                    <h3 className=\"text-md font-semibold text-accent-teal mb-2\">ΓÜí∩╕Å Energy</h3>\r\n                    <div className=\"grid grid-cols-3 gap-2\">\r\n                        <StatusButton label=\"High\" isActive={appState.statusEnergy === 'High'} onClick={() => setEnergy('High')} activeClass=\"bg-accent-green text-background-dark\" />\r\n                        <StatusButton label=\"Medium\" isActive={appState.statusEnergy === 'Medium'} onClick={() => setEnergy('Medium')} activeClass=\"bg-yellow-500 text-background-dark\" />\r\n                        <StatusButton label=\"Low\" isActive={appState.statusEnergy === 'Low'} onClick={() => setEnergy('Low')} activeClass=\"bg-red-800 text-white\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default StatusTrackerModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\WilliamCoreDashboardModule.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":13,"column":58,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the &apos;Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the &lsquo;Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the &#39;Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the &rsquo;Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":13,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module&apos;, which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module&lsquo;, which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module&#39;, which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module&rsquo;, which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":13,"column":172,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in &apos;Mod Mode'.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in &lsquo;Mod Mode'.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in &#39;Mod Mode'.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in &rsquo;Mod Mode'.\r\n        "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":13,"column":181,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode&apos;.\r\n        "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode&lsquo;.\r\n        "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode&#39;.\r\n        "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[486,680],"text":"\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode&rsquo;.\r\n        "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport ContentCard from '../ContentCard';\r\n\r\nconst WilliamCoreDashboardModule = () => {\r\n  return (\r\n    <ContentCard title=\"Core Dashboard (DEPRECATED)\">\r\n      <div className=\"flex flex-col items-center justify-center h-full text-center p-4\">\r\n        <p className=\"text-text-light text-opacity-80 font-semibold\">\r\n          This module has been deprecated and replaced.\r\n        </p>\r\n        <p className=\"text-sm text-text-light text-opacity-80 mt-2\">\r\n          Its functionality has been integrated into the 'Daily Command Module', which is now the new core module for your dashboard. You can safely remove this module in 'Mod Mode'.\r\n        </p>\r\n      </div>\r\n    </ContentCard>\r\n  );\r\n};\r\n\r\nexport default WilliamCoreDashboardModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\WonkyAIModule.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":69,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":69,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport useSafeAI from '@hooks/useSafeAI';\r\nimport { useAIPromptSafety } from '@hooks/useAIPromptSafety';\r\nimport AIConsentModal from '../AIConsentModal';\r\nimport PIIWarningModal from '../PIIWarningModal';\r\nimport { Button } from '../Button';\r\nimport { SecureMarkdown } from '../../utils/secureMarkdownRenderer.js';\r\nimport Skeleton from '../Skeleton';\r\nimport ContentCard from '@components/ContentCard';\r\nimport { useNeuroPrefs } from '@contexts/NeurodivergentPreferencesContext';\r\nimport { useAIEnabled } from '@contexts/FeatureFlagsContext';\r\n\r\nconst WonkyAIModule = () => {\r\n    const { prefs } = useNeuroPrefs();\r\n    const { simplifiedUi } = prefs;\r\n    const [prompt, setPrompt] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [response, setResponse] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [manualInput, setManualInput] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n    const { generate } = useSafeAI();\r\n    const [controller, setController] = useState<AbortController | null>(null);\r\n\r\n    const systemInstruction = `You are \"Wonky AI,\" an assistant for a neurodivergent systems diagnostician named William. Your core philosophy is \"Structure Engineered for Chaos\" and \"Anti-BS.\" Your responses MUST be:\r\n1.  **Direct and Unambiguous:** No fluff, no motivational platitudes (\"You can do it!\"). Use clear, concise language. State facts.\r\n2.  **Structured:** Use numbered lists, checklists, or markdown tables. Break down complex problems into small, actionable micro-tasks. Use markdown for formatting lists and bolding.\r\n3.  **System-Oriented:** Frame solutions as protocols, systems, or diagnostic procedures. Use engineering and systems-thinking metaphors.\r\n4.  **Neurodivergent-Aware:** Acknowledge and account for executive dysfunction, sensory overload, and decision paralysis in your solutions. Provide the simplest possible first step.\r\n5.  **Problem-Solving Focused:** Do not offer emotional support. Your job is to help the user diagnose the root cause of a problem and build a system to fix it.\r\nExample Query: \"I can't start cleaning my office.\"\r\nYour Response Style:\r\n\"Acknowledged. Executive dysfunction triggered. Initiating 'Office Reset Protocol'.\r\n**Diagnosis:** The task 'clean office' is too large and undefined, causing paralysis.\r\n**Solution:** Reframe as a sequence of micro-tasks.\r\n- Pick up ONE piece of trash off the floor.\r\n- Put ONE item on your desk back where it belongs.\r\n- Set a 5-minute timer.\r\nExecute the first step now.\"\r\nYour primary function is to be a tool that provides structure, not a coach that provides encouragement.`;\r\n\r\n    const aiEnabled = useAIEnabled();\r\n\r\n    const handleGenerate = async (safePrompt?: string) => {\r\n        if (!prompt.trim()) {\r\n            setError(\"Prompt cannot be empty. Define the problem.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        setResponse('');\r\n        const ctrl = new AbortController();\r\n        setController(ctrl);\r\n        try {\r\n                const result = await generate(safePrompt ?? prompt, { model: 'gemini-2.5-flash', config: { systemInstruction }, timeoutMs: 20000, skipPromptSafety: true, signal: ctrl.signal });\r\n                // if AI is disabled we return a manual placeholder - show a thin CTA\r\n                if (!aiEnabled) {\r\n                    setResponse('Manual mode active. Use the editor below to paste your notes or structure from templates.');\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n                    setResponse(result?.text || (result?.json ? JSON.stringify(result.json, null, 2) : ''));\r\n        } catch (e) {\r\n            setError(`Error: ${e.message || 'Failed to communicate with the AI model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n        setController(null);\r\n    };\r\n    \r\n    const handleSubmit = () => {\r\n        checkAndExecute(prompt, handleGenerate);\r\n    };\r\n\r\n    const handleEnterPress = (e) => {\r\n        if (e.key === 'Enter' && !loading) {\r\n            handleSubmit();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒºá Observer\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <div className=\"flex flex-col h-full\">\r\n                <div className=\"flex-grow overflow-y-auto p-4 bg-gray-800 rounded-md min-h-[200px] max-h-[400px] border border-gray-700 mb-4\">\r\n                    {loading ? (\r\n                        <div className=\"flex items-start h-full\">\r\n                            {simplifiedUi ? (\r\n                                <p className=\"text-sm text-text-light\">Diagnosing...</p>\r\n                            ) : (\r\n                                <>\r\n                                    <div className=\"flex-1 mr-4\">\r\n                                        <Skeleton lines={4} />\r\n                                    </div>\r\n                                    <div className=\"flex flex-col justify-center\">\r\n                                        <p className=\"text-sm text-text-light\">DiagnosingΓÇª</p>\r\n                                        <p className=\"text-xs text-text-light text-opacity-80\">This may take a few seconds ΓÇö you can cancel anytime.</p>\r\n                                    </div>\r\n                                </>\r\n                            )}\r\n                        </div>\r\n                    ) : error ? (\r\n                        <div className=\"text-red-400 whitespace-pre-wrap\"><p className=\"font-bold mb-2\">System Error:</p>{error}</div>\r\n                    ) : response ? (\r\n                                <div data-testid=\"ai-response\" className=\"prose prose-invert prose-sm max-w-none\">\r\n                            <SecureMarkdown content={response} />\r\n                        </div>\r\n                    ) : (\r\n                        <p className=\"text-text-light text-opacity-80 text-center flex items-center justify-center h-full\">\r\n                            Define a problem. The Observer will provide structure.\r\n                        </p>\r\n                    )}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        data-testid=\"ask-ai-input\"\r\n                        value={prompt}\r\n                        onChange={(e) => setPrompt(e.target.value)}\r\n                        onKeyDown={handleEnterPress}\r\n                        placeholder=\"Describe the chaos...\"\r\n                        className=\"flex-grow p-3 bg-gray-800 border border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue\"\r\n                        disabled={loading}\r\n                    />\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Button\r\n                            data-testid=\"ask-ai-btn\"\r\n                            onClick={handleSubmit}\r\n                            disabled={loading}\r\n                            className=\"disabled:bg-gray-600 disabled:cursor-not-allowed\"\r\n                            variant=\"primary\"\r\n                        >\r\n                            {loading ? '...' : 'Γ£¿ Ask AI'}\r\n                        </Button>\r\n                        {!aiEnabled && !simplifiedUi && (\r\n                            <div className=\"flex flex-col w-full\">\r\n                                <textarea\r\n                                    placeholder=\"Paste or write your own structured plan (AI disabled)\r\nUse the format from the policy: numbered steps, checklists, and a simple first step.\"\r\n                                    value={manualInput}\r\n                                    onChange={(e) => setManualInput(e.target.value)}\r\n                                    className=\"mt-2 p-2 bg-gray-800 rounded-md text-text-light\"\r\n                                />\r\n                                <div className=\"flex gap-2 mt-2\">\r\n                                    <Button variant=\"secondary\" onClick={() => setResponse(manualInput)}>Save Manual Response</Button>\r\n                                    <Button variant=\"secondary\" onClick={() => setManualInput('')}>Clear</Button>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n                        {loading && (\r\n                            <Button variant=\"secondary\" onClick={() => { controller?.abort(); setLoading(false); setController(null); }}>\r\n                                Cancel\r\n                            </Button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default WonkyAIModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\WorkspaceLaunchpadModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\AICommunicationCoachModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ContentCard' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SecureMarkdown' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'AIConsentModal' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'PIIWarningModal' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setOriginalText' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'translatedText' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'loading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":18,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'error' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":19,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":19,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'setIncomingText' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":21,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":21,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analysisResult' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":22,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":22,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analysisLoading' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":23,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'analysisError' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":24,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":24,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isPiiModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'piiMatches' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handlePiiConfirm' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":53},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handlePiiCancel' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":28,"column":55,"nodeType":null,"messageId":"unusedVar","endLine":28,"endColumn":70},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'isConsentModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleConfirm' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":29,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleCancel' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":29,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":29,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleTranslate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":37,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":37,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'handleAnalyze' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":72,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":72,"endColumn":24}],"suppressedMessages":[],"errorCount":22,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport useSafeAI from '../../../hooks/useSafeAI';\r\nimport ContentCard from '../../ContentCard'; // Adjusted path\r\nimport { SecureMarkdown } from '../../../utils/secureMarkdownRenderer';\r\nimport { useAIPromptSafety } from '../../../hooks/useAIPromptSafety';\r\nimport AIConsentModal from '../../AIConsentModal';\r\nimport PIIWarningModal from '../../PIIWarningModal';\r\nimport { logError } from '../../../utils/logger';\r\n\r\nconst AICommunicationCoachModule = () => {\r\n    const { generate } = useSafeAI();\r\n\r\n    const [mode, ] = useState('translate');\r\n    \r\n    const [originalText, setOriginalText] = useState('');\r\n    const [translatedText, setTranslatedText] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const [incomingText, setIncomingText] = useState('');\r\n    const [analysisResult, setAnalysisResult] = useState('');\r\n    const [analysisLoading, setAnalysisLoading] = useState(false);\r\n    const [analysisError, setAnalysisError] = useState('');\r\n\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel \r\n    } = useAIPromptSafety();\r\n    \r\n    useEffect(() => {\r\n        setError('');\r\n        setAnalysisError('');\r\n    }, [mode, originalText, incomingText]);\r\n\r\n    const handleTranslate = async () => {\r\n        if (!originalText.trim()) {\r\n            setError(\"Input message cannot be empty. Define the communication objective.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        setTranslatedText('');\r\n\r\n        const systemInstruction = `You are an expert communication coach specializing in translating direct, neurodivergent communication styles (like Autism/ADHD) into language that is clear, collaborative, and less likely to be misinterpreted by a neurotypical co-parent. Your goal is to preserve the core facts and intent of the message while rephrasing it to be constructive and low-conflict.\r\n\r\n    **Core Directives:**\r\n    1.  **Preserve Facts:** The essential information (who, what, where, when, why) must remain unchanged.\r\n    2.  **Remove Bluntness:** Replace declarative, demand-like statements with collaborative suggestions or questions.\r\n    3.  **Add 'I' Statements:** Reframe accusations or frustrations into statements about personal feelings or observations (e.g., \"You're always late\" becomes \"I feel stressed when pickup times are missed because it disrupts our evening schedule.\").\r\n    4.  **Inject Collaboration:** Use phrases like \"How can we work together on this?\", \"What are your thoughts on...?\", or \"Would it be possible to...\".\r\n    5.  **Assume Good Intent:** Frame the translated message as if the user and co-parent are a team solving a logistical problem for the benefit of their children.\r\n    6.  **Keep it Concise:** Do not add excessive fluff. The goal is clarity and reduced conflict, not a corporate email.\r\n\r\n    **Example Translation:**\r\n    -   **Original:** \"Bash's soccer cleats don't fit. You need to buy him new ones before Friday's game.\"\r\n    -   **Translated:** \"Hey, I noticed Bash's soccer cleats seem too small for him. With the game on Friday, could we coordinate on getting him a new pair? Let me know what works best for you.\"`;\r\n\r\n        try {\r\n            await checkAndExecute(originalText, async (safePrompt) => {\r\n                const result = await generate(safePrompt, { model: 'gemini-2.5-flash', config: { systemInstruction }, skipPromptSafety: true });\r\n                setTranslatedText(result?.text || '');\r\n            });\r\n        } catch (e) {\r\n            setError(`Error: ${e.message || 'Failed to communicate with the AI model.'}`);\r\n            logError('AICommunicationCoachModule.handleTranslate', e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleAnalyze = async () => {\r\n        if (!incomingText.trim()) {\r\n            setAnalysisError(\"Incoming message cannot be empty.\");\r\n            return;\r\n        }\r\n        setAnalysisLoading(true);\r\n        setAnalysisError('');\r\n        setAnalysisResult('');\r\n        setDraftedReply('');\r\n\r\n        const systemInstruction = `You are an expert communication coach specializing in de-escalating co-parenting conflicts. You analyze incoming messages for a neurodivergent user who needs help separating emotional subtext from factual information. Your goal is to help the user understand the message without reacting emotionally, so they can reply according to their low-conflict communication protocol.\r\n\r\n**Core Directives:**\r\n1.  **Identify Core Facts:** Extract the essential, objective information (who, what, when, where). What is the logistical request?\r\n2.  **Detect Potential Emotions:** Cautiously identify potential underlying emotions in the message (e.g., \"The phrasing 'as usual' might suggest frustration.\"). Use neutral, non-judgmental language.\r\n3.  **Filter Out 'Noise':** Identify parts of the message that are emotional, accusatory, or not constructive (e.g., sarcasm, blame).\r\n4.  **Suggest a Focus:** Advise the user on what to focus their reply on (always the logistical, child-focused part) and what to ignore.\r\n5.  **Draft a Neutral Reply:** Provide a pre-drafted, fact-based reply that the user can copy and paste. The reply must be BIFF (Brief, Informative, Friendly, Firm).\r\n6.  **Output Structure:** Return a markdown-formatted string with three sections: \"## Factual Core\", \"## Emotional Analysis\", and \"## Suggested Reply\".\r\n`;\r\n\r\n        try {\r\n            await checkAndExecute(incomingText, async (safePrompt) => {\r\n                const result = await generate(safePrompt, { model: 'gemini-2.5-flash', config: { systemInstruction }, skipPromptSafety: true });\r\n                setAnalysisResult(result?.text || '');\r\n            });\r\n\r\n        } catch (e) {\r\n            setAnalysisError(`Error: ${e.message || 'Failed to communicate with the AI model.'}`);\r\n            logError('AICommunicationCoachModule.handleAnalyze', e);\r\n        }\r\n        setAnalysisLoading(false);\r\n    };\r\n\r\n    // FIX: Added default export to the component.\r\n};\r\nexport default AICommunicationCoachModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\HandoffReportModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2084,2087],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2084,2087],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport useSafeAI from '../../../hooks/useSafeAI';\r\nimport { useAIPromptSafety } from '../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../AIConsentModal.js';\r\nimport PIIWarningModal from '../../PIIWarningModal.js';\r\nimport { SecureMarkdown } from '../../../utils/secureMarkdownRenderer.js';\r\n\r\nconst HandoffReportModule: React.FC = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const [health, setHealth] = useState('');\r\n    const [behavior, setBehavior] = useState('');\r\n    const [school, setSchool] = useState('');\r\n    const [logistics, setLogistics] = useState('');\r\n    const [summary, setSummary] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { checkAndExecute, isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel, isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain } = useAIPromptSafety();\r\n\r\n    const generatePrompt = () => `\r\n        You are an AI assistant helping a co-parent write a handoff report. Your tone must be neutral, factual, and collaborative, following the BIFF model (Brief, Informative, Friendly, Firm).\r\n        Convert the following bullet points into a concise, well-structured summary paragraph.\r\n\r\n        - Health Notes: ${health || \"None\"}\r\n        - Behavior Notes: ${behavior || \"None\"}\r\n        - School Notes: ${school || \"None\"}\r\n        - Logistics/Other Notes: ${logistics || \"None\"}\r\n    `;\r\n\r\n    const handleGenerateSummary = async () => {\r\n        setLoading(true);\r\n        setError('');\r\n        const prompt = generatePrompt();\r\n        try {\r\n            const { generate } = useSafeAI();\r\n            const result = await generate(prompt, { model: 'gemini-2.5-flash', timeoutMs: 20000, skipPromptSafety: true });\r\n            setSummary(result?.text || (result?.json ? JSON.stringify(result.json) : ''));\r\n        } catch (e: any) {\r\n            setError(`Failed to generate summary: ${e.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    \r\n    const triggerAnalysis = () => checkAndExecute(generatePrompt(), handleGenerateSummary);\r\n    \r\n    const handleLogReport = () => {\r\n        const fullReport = `\r\n**Handoff Report**\r\n\r\n**Health:**\r\n${health || \"N/A\"}\r\n\r\n**Behavior:**\r\n${behavior || \"N/A\"}\r\n\r\n**School:**\r\n${school || \"N/A\"}\r\n\r\n**Logistics:**\r\n${logistics || \"N/A\"}\r\n\r\n---\r\n**AI-Generated Summary:**\r\n${summary}\r\n        `.trim();\r\n\r\n        dispatch({\r\n            type: 'ADD_FAMILY_LOG_ENTRY',\r\n            payload: {\r\n                persona: appState.dashboardType, // This will be 'co-parenting' but log shows timestamp.\r\n                text: fullReport,\r\n                type: 'handoff',\r\n            }\r\n        });\r\n        \r\n        // Reset form\r\n        setHealth(''); setBehavior(''); setSchool(''); setLogistics(''); setSummary('');\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒôï Guided Handoff Report\" titleClassName=\"text-accent-blue text-xl\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <p className=\"text-md text-text-light text-opacity-80 mb-4\">\r\n                Fill out the checklist to prepare for a handoff, then generate an AI-assisted summary to send to your co-parent.\r\n            </p>\r\n            <div className=\"space-y-4\">\r\n                <div>\r\n                    <label htmlFor=\"handoff-health\" className=\"font-semibold text-accent-teal\">Health (Meds, issues, etc.)</label>\r\n                    <textarea id=\"handoff-health\" aria-label=\"Health notes\" value={health} onChange={e => setHealth(e.target.value)} rows={2} className=\"w-full p-2 mt-1 bg-gray-800 border border-gray-700 rounded\"/>\r\n                </div>\r\n                 <div>\r\n                    <label htmlFor=\"handoff-behavior\" className=\"font-semibold text-accent-teal\">Behavior (Mood, challenges, wins)</label>\r\n                    <textarea id=\"handoff-behavior\" aria-label=\"Behavior notes\" value={behavior} onChange={e => setBehavior(e.target.value)} rows={2} className=\"w-full p-2 mt-1 bg-gray-800 border border-gray-700 rounded\"/>\r\n                </div>\r\n                 <div>\r\n                    <label htmlFor=\"handoff-school\" className=\"font-semibold text-accent-teal\">School (Homework, events, feedback)</label>\r\n                    <textarea id=\"handoff-school\" aria-label=\"School notes\" value={school} onChange={e => setSchool(e.target.value)} rows={2} className=\"w-full p-2 mt-1 bg-gray-800 border border-gray-700 rounded\"/>\r\n                </div>\r\n                 <div>\r\n                    <label htmlFor=\"handoff-logistics\" className=\"font-semibold text-accent-teal\">Logistics (Items to transfer, schedule notes)</label>\r\n                    <textarea id=\"handoff-logistics\" aria-label=\"Logistics notes\" value={logistics} onChange={e => setLogistics(e.target.value)} rows={2} className=\"w-full p-2 mt-1 bg-gray-800 border border-gray-700 rounded\"/>\r\n                </div>\r\n            </div>\r\n\r\n            <button onClick={triggerAnalysis} disabled={loading} className=\"w-full mt-4 p-2 bg-accent-blue text-background-dark font-bold rounded\">\r\n                {loading ? 'Generating...' : 'Γ£¿ Generate BIFF Summary'}\r\n            </button>\r\n            \r\n            {error && <p className=\"text-red-400 text-sm mt-2\">{error}</p>}\r\n            \r\n            {summary && (\r\n                <div className=\"mt-4 pt-4 border-t border-gray-700\">\r\n                    <h4 className=\"font-bold text-accent-green mb-2\">AI-Generated Summary:</h4>\r\n                    <div className=\"p-3 bg-gray-800 rounded prose prose-invert prose-sm max-w-none\">\r\n                        <SecureMarkdown content={summary} />\r\n                    </div>\r\n                    <button onClick={handleLogReport} className=\"w-full mt-2 p-2 bg-accent-green text-background-dark font-bold rounded\">\r\n                        Save Report to Shared Log\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default HandoffReportModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\SharedCalendarModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\SharedChildProfileModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\SharedExpenseTrackerModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\co-parenting\\SharedFamilyLogModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\kids\\QuestLogModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\sebastian\\SebastianChecklistModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\sebastian\\SebastianGemCollectorModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\AIBrainDumpProcessorModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\AITaskSuggesterModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\AIWeeklyReviewAssistantModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\ActiveSopsDisplayModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":10,"column":10,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":10,"endColumn":13,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[390,393],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[390,393],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":67,"column":54,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the &quot;Active SOP Selector\" module to choose protocols to display here.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the &ldquo;Active SOP Selector\" module to choose protocols to display here.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the &#34;Active SOP Selector\" module to choose protocols to display here.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the &rdquo;Active SOP Selector\" module to choose protocols to display here.\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":67,"column":74,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the \"Active SOP Selector&quot; module to choose protocols to display here.\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the \"Active SOP Selector&ldquo; module to choose protocols to display here.\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the \"Active SOP Selector&#34; module to choose protocols to display here.\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[2482,2620],"text":"\r\n                    No active SOPs selected. Use the \"Active SOP Selector&rdquo; module to choose protocols to display here.\r\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\n// FIX: Imported SOP_DATA to resolve reference error.\r\nimport { SOP_DATA } from '../../../constants.js';\r\n\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface ActiveSopProps {\r\n    sop: any;\r\n}\r\nconst ActiveSop: React.FC<ActiveSopProps> = ({ sop }) => {\r\n    const { dispatch } = useAppState();\r\n\r\n    const handleViewSop = () => {\r\n        if (sop.viewId) {\r\n            dispatch({ type: 'SET_VIEW', payload: sop.viewId });\r\n        }\r\n    };\r\n    \r\n    return (\r\n        <div className=\"p-3 bg-gray-800 rounded-lg border border-gray-700\">\r\n            <h4 className=\"font-bold text-accent-green mb-2\">{sop.title}</h4>\r\n            {sop.steps && sop.steps.length > 0 && (\r\n                <ul className=\"list-none space-y-1 text-sm\">\r\n                    {sop.steps.slice(0, 3).map((step: string, index: number) => (\r\n                        <li key={index} className=\"text-text-light text-opacity-80 pl-2\">{step}</li>\r\n                    ))}\r\n                    {sop.steps.length > 3 && <li className=\"text-text-light text-opacity-80 pl-2\">...and more</li>}\r\n                </ul>\r\n            )}\r\n            {sop.viewId && (\r\n                <button \r\n                    onClick={handleViewSop} \r\n                    className=\"mt-3 text-sm font-semibold text-accent-blue hover:underline\"\r\n                >\r\n                    View Full Protocol &rarr;\r\n                </button>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst ActiveSopsDisplayModule = () => {\r\n    const { appState } = useAppState();\r\n    const { activeSops, userSops, modifiedSops } = appState;\r\n\r\n    const allSops = React.useMemo(() =>\r\n        SOP_DATA.map(sop => modifiedSops[sop.id] || sop).concat(userSops),\r\n        [modifiedSops, userSops]\r\n    );\r\n\r\n    const displayedSops = React.useMemo(() => \r\n        allSops.filter(sop => activeSops.includes(sop.id)),\r\n        [allSops, activeSops]\r\n    );\r\n\r\n    return (\r\n        <ContentCard title=\"Active SOPs\">\r\n            {displayedSops.length > 0 ? (\r\n                <div className=\"space-y-3 max-h-80 overflow-y-auto pr-2\">\r\n                    {displayedSops.map(sop => <ActiveSop key={sop.id} sop={sop} />)}\r\n                </div>\r\n            ) : (\r\n                <p className=\"text-center text-text-light text-opacity-80 p-4\">\r\n                    No active SOPs selected. Use the \"Active SOP Selector\" module to choose protocols to display here.\r\n                </p>\r\n            )}\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default ActiveSopsDisplayModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\ActiveSopsSelectorModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\BrainDumpModule.tsx","messages":[{"ruleId":null,"fatal":true,"severity":2,"message":"Parsing error: 'catch' or 'finally' expected.","line":82,"column":5,"nodeType":null}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":1,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useState, useRef } from 'react';\r\nimport { Type } from '@google/genai';\r\nimport useSafeAI from '../../../hooks/useSafeAI';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { useAIPromptSafety } from '../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../AIConsentModal.js';\r\nimport { Button } from '../../Button';\r\nimport PIIWarningModal from '../../PIIWarningModal.js';\r\n\r\nconst CalendarModal = ({ item, onClose, onSubmit }) => {\r\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\r\n    const [time, setTime] = useState('12:00');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        onSubmit(date, time);\r\n    };\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center\" onClick={onClose}>\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-6 border border-gray-700 w-full max-w-sm m-4\" onClick={e => e.stopPropagation()}>\r\n                <h3 className=\"text-xl font-bold text-accent-teal mb-4\">Schedule Appointment</h3>\r\n                <p className=\"text-sm mb-1\">Event: <span className=\"font-semibold\">{item.actionableItem}</span></p>\r\n                                <form onSubmit={handleSubmit} className=\"space-y-3\">\r\n                                        <div className=\"flex gap-2\">\r\n                                                <div className=\"w-full\">\r\n                                                    <label htmlFor=\"calendar-date\" className=\"sr-only\">Date</label>\r\n                                                    <input id=\"calendar-date\" type=\"date\" value={date} onChange={e => setDate(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required/>\r\n                                                </div>\r\n                                                <div>\r\n                                                    <label htmlFor=\"calendar-time\" className=\"sr-only\">Time</label>\r\n                                                    <input id=\"calendar-time\" type=\"time\" value={time} onChange={e => setTime(e.target.value)} className=\"p-2 bg-gray-800 border border-gray-600 rounded\" required/>\r\n                                                </div>\r\n                    </div>\r\n                    <div className=\"flex justify-end gap-2 pt-2\">\r\n                        <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-600 rounded\">Cancel</button>\r\n                            <Button type=\"button\" onClick={onClose} variant=\"secondary\" size=\"sm\">Cancel</Button>\r\n                                <Button type=\"submit\" variant=\"primary\" size=\"sm\">Save Event</Button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst BrainDumpModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { brainDumpText } = appState;\r\n\r\n    const [processedItems, setProcessedItems] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n                        try {\r\n                            const { generate } = useSafeAI();\r\n                            const response = await generate(prompt, {\r\n                                model: 'gemini-2.5-flash',\r\n                                responseMimeType: 'application/json',\r\n                                responseSchema: {\r\n                                    type: Type.OBJECT,\r\n                                    properties: {\r\n                                        processedItems: {\r\n                                            type: Type.ARRAY,\r\n                                            items: {\r\n                                                type: Type.OBJECT,\r\n                                                properties: {\r\n                                                    category: { type: Type.STRING },\r\n                                                    summary: { type: Type.STRING },\r\n                                                    actionableItem: { type: Type.STRING },\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                },\r\n                                timeoutMs: 20000\r\n                            });\r\n\r\n                            const jsonResponse = response.json;\r\n    };\r\n    \r\n    const handleClearAndArchive = () => {\r\n        if (!processedText) return;\r\n\r\n        const date = new Date().toLocaleString();\r\n        dispatch({\r\n            type: 'ADD_KNOWLEDGE_ENTRY',\r\n            payload: {\r\n                title: `Brain Dump Archive - ${date}`,\r\n                content: processedText,\r\n                tags: ['archive', 'braindump']\r\n            }\r\n        });\r\n        \r\n        handleClearAll();\r\n    };\r\n\r\n    const handleProcess = async (safePrompt?: string) => {\r\n        if (!brainDumpText.trim()) {\r\n            setError(\"Brain Dump is empty. There is no chaos to process.\");\r\n            return;\r\n        }\r\n        setLoading(true);\r\n        setError('');\r\n        setProcessedItems([]);\r\n        setActionedItems([]);\r\n        setProcessedText(brainDumpText); // Archive the text on process\r\n\r\n        const prompt = `\r\n            Analyze the following unstructured brain dump from a neurodivergent user. For each distinct thought, categorize it, create a concise summary, and extract a single concrete actionable item.\r\n\r\n            Brain Dump Text:\r\n        try {\r\n            const { generate } = useSafeAI();\r\n            const response = await generate(safePrompt ?? prompt, {\r\n                model: 'gemini-2.5-flash',\r\n                // contents will be set by useSafeAI via the safePrompt arg\r\n                config: {\r\n                    responseMimeType: 'application/json',\r\n                    responseSchema: {\r\n                        type: Type.OBJECT,\r\n                        properties: {\r\n                            processedItems: {\r\n                                type: Type.ARRAY,\r\n                                items: {\r\n                                    type: Type.OBJECT,\r\n                                    properties: {\r\n                                        category: { type: Type.STRING },\r\n                                        summary: { type: Type.STRING },\r\n                                        actionableItem: { type: Type.STRING },\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    },\r\n                }\r\n                , timeoutMs: 20000, skipPromptSafety: true\r\n            });\r\n            \r\n            const jsonResponse = response?.json ?? (response?.text ? JSON.parse(response.text) : null);\r\n            if (jsonResponse.processedItems && Array.isArray(jsonResponse.processedItems)) {\r\n                setProcessedItems(jsonResponse.processedItems);\r\n            } else {\r\n                throw new Error(\"Invalid response format from AI.\");\r\n            }\r\n\r\n        } catch (e) {\r\n            setError(`Error processing dump: ${e.message || 'Failed to communicate with model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n    \r\n    const handleStartRecording = async () => {\r\n        try {\r\n            const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n            const recorder = new MediaRecorder(stream);\r\n            mediaRecorderRef.current = recorder;\r\n            audioChunksRef.current = [];\r\n\r\n            recorder.ondataavailable = (event) => {\r\n                audioChunksRef.current.push(event.data);\r\n            };\r\n\r\n            recorder.onstop = async () => {\r\n                setTranscribing(true);\r\n                const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(audioBlob);\r\n                reader.onloadend = async () => {\r\n                    // FIX: Added type check for reader.result to ensure it's a string before splitting.\r\n                    if (typeof reader.result === 'string') {\r\n                        const base64Audio = reader.result.split(',')[1];\r\n                        try {\r\n                            const { generate } = useSafeAI();\r\n                            const result = await generate('Transcribe this audio recording.', {\r\n                                model: 'gemini-2.5-flash',\r\n                                inputs: [{ text: 'Transcribe this audio recording.' }, { inlineData: { mimeType: 'audio/webm', data: base64Audio } }],\r\n                                timeoutMs: 24000,\r\n                                skipPromptSafety: true\r\n                            });\r\n                            \r\n                            const newText = result.text;\r\n                            const timestamp = new Date().toLocaleString();\r\n                            const updatedBrainDump = `${brainDumpText}\\n\\n--- Voice Memo [${timestamp}] ---\\n${newText}`.trim();\r\n                            dispatch({ type: 'SET_BRAIN_DUMP', payload: updatedBrainDump });\r\n\r\n                        } catch (e) {\r\n                            setError(`Transcription failed: ${e.message}`);\r\n                        } finally {\r\n                            setTranscribing(false);\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n\r\n            recorder.start();\r\n            setIsRecording(true);\r\n        } catch (err) {\r\n            setError('Microphone access was denied or an error occurred.');\r\n            console.error('Error starting recording:', err);\r\n        }\r\n    };\r\n\r\n    const handleStopRecording = () => {\r\n        if (mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\r\n            mediaRecorderRef.current.stop();\r\n            mediaRecorderRef.current.stream.getTracks().forEach(track => track.stop());\r\n            setIsRecording(false);\r\n        }\r\n    };\r\n\r\n    const handleTriageAll = () => {\r\n        const itemsToTriage = processedItems.filter((_, index) => !actionedItems.includes(index));\r\n        \r\n        itemsToTriage.forEach(item => {\r\n            switch(item.category) {\r\n                case 'Task':\r\n                    dispatch({\r\n                        type: 'ADD_TASK',\r\n                        payload: { title: item.actionableItem, priority: 'Medium', dueDate: null }\r\n                    });\r\n                    break;\r\n                case 'Appointment':\r\n                    dispatch({\r\n                        type: 'ADD_CALENDAR_EVENT',\r\n                        payload: {\r\n                            title: `[NEEDS CONFIRMATION] ${item.actionableItem}`,\r\n                            date: new Date().toISOString(),\r\n                            type: 'appointment'\r\n                        }\r\n                    });\r\n                    break;\r\n                case 'Idea':\r\n                case 'Emotion':\r\n                case 'Reference':\r\n                    dispatch({\r\n                        type: 'ADD_KNOWLEDGE_ENTRY',\r\n                        payload: {\r\n                            title: item.summary,\r\n                            content: item.actionableItem,\r\n                            tags: [item.category.toLowerCase(), 'from-braindump']\r\n                        }\r\n                    });\r\n                    break;\r\n            }\r\n        });\r\n        setActionedItems(processedItems.map((_, index) => index));\r\n    };\r\n\r\n    const handleAddTask = (item, index) => {\r\n        dispatch({\r\n            type: 'ADD_TASK',\r\n            payload: {\r\n                title: item.actionableItem,\r\n                priority: 'Medium',\r\n                dueDate: null,\r\n            }\r\n        });\r\n        setActionedItems(prev => [...prev, index]);\r\n    };\r\n\r\n    const handleSendToVault = (item, index) => {\r\n        dispatch({\r\n            type: 'ADD_KNOWLEDGE_ENTRY',\r\n            payload: {\r\n                title: item.summary,\r\n                content: item.actionableItem,\r\n                tags: [item.category.toLowerCase(), 'from-braindump']\r\n            }\r\n        });\r\n        setActionedItems(prev => [...prev, index]);\r\n    };\r\n    \r\n    const handleScheduleClick = (item, index) => {\r\n        setSchedulingItem(item);\r\n        setSchedulingItemIndex(index);\r\n    };\r\n\r\n    const handleCalendarModalSubmit = (date, time) => {\r\n        if (!schedulingItem || schedulingItemIndex === null) return;\r\n        const dateWithTime = new Date(`${date}T${time}:00`);\r\n        dispatch({\r\n            type: 'ADD_CALENDAR_EVENT',\r\n            payload: {\r\n                title: schedulingItem.actionableItem,\r\n                date: dateWithTime.toISOString(),\r\n                type: 'appointment'\r\n            }\r\n        });\r\n        setActionedItems(prev => [...prev, schedulingItemIndex]);\r\n        setSchedulingItem(null);\r\n        setSchedulingItemIndex(null);\r\n    };\r\n\r\n    const categoryStyles = {\r\n        Task: { bg: 'bg-accent-blue/20', text: 'text-accent-blue' },\r\n        Idea: { bg: 'bg-accent-green/20', text: 'text-accent-green' },\r\n        Appointment: { bg: 'bg-yellow-500/20', text: 'text-yellow-400' },\r\n        Emotion: { bg: 'bg-purple-500/20', text: 'text-purple-400' },\r\n        Reference: { bg: 'bg-gray-500/20', text: 'text-gray-400' },\r\n    };\r\n\r\n    const renderActionButton = (item, index) => {\r\n        const isActioned = actionedItems.includes(index);\r\n        const baseButtonClass = \"ml-2 px-2 py-1 text-xs font-semibold rounded transition-colors flex-shrink-0\";\r\n        \r\n        if (isActioned) {\r\n            return <button disabled className={`${baseButtonClass} bg-gray-700 text-gray-400 cursor-not-allowed`}>Γ£ô Done</button>;\r\n        }\r\n\r\n        switch(item.category) {\r\n            case 'Task':\r\n                return <button onClick={() => handleAddTask(item, index)} className={`${baseButtonClass} bg-accent-green text-background-dark hover:bg-green-500`}>Add to Task Matrix</button>;\r\n            case 'Appointment':\r\n                return <button onClick={() => handleScheduleClick(item, index)} className={`${baseButtonClass} bg-yellow-500 text-background-dark hover:bg-yellow-400`}>Add to Calendar</button>;\r\n            case 'Idea':\r\n            case 'Emotion':\r\n            case 'Reference':\r\n                return <button onClick={() => handleSendToVault(item, index)} className={`${baseButtonClass} bg-accent-purple text-white hover:bg-purple-500`}>Send to Vault</button>;\r\n            default:\r\n                return null;\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒºá Brain Dump & Processor\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            {schedulingItem && <CalendarModal item={schedulingItem} onClose={() => {setSchedulingItem(null); setSchedulingItemIndex(null);}} onSubmit={handleCalendarModalSubmit} />}\r\n            <div className=\"flex flex-col h-full\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 mb-2\">\r\n                    Capture any thought, then process it with AI to extract and route actionable insights.\r\n                </p>\r\n                <textarea\r\n                    value={brainDumpText}\r\n                    onChange={handleChange}\r\n                    className=\"w-full p-3 bg-gray-800 border border-gray-700 rounded-md text-text-light placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-blue min-h-[150px]\"\r\n                    placeholder=\"Externalize chaos here...\"\r\n                />\r\n                <div className=\"flex justify-between items-center gap-2 mt-2\">\r\n                    {!isRecording ? (\r\n                        <Button\r\n                            onClick={handleStartRecording}\r\n                            disabled={transcribing}\r\n                            variant=\"primary\"\r\n                            size=\"sm\"\r\n                            className=\"flex items-center gap-2\"\r\n                        >\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M7 4a3 3 0 016 0v4a3 3 0 11-6 0V4zm4 10.93A7.001 7.001 0 0017 8a1 1 0 10-2 0A5 5 0 015 8a1 1 0 00-2 0 7.001 7.001 0 006 6.93V17H6a1 1 0 100 2h8a1 1 0 100-2h-3v-2.07z\" clipRule=\"evenodd\" /></svg>\r\n                            {transcribing ? 'Transcribing...' : 'Record Memo'}\r\n                        </button>\r\n                    ) : (\r\n                        <Button\r\n                            onClick={handleStopRecording}\r\n                            variant=\"danger\"\r\n                            size=\"sm\"\r\n                            className=\"flex items-center gap-2 animate-pulse\"\r\n                        >\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1zm4 0a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z\" clipRule=\"evenodd\" /></svg>\r\n                            Stop Recording\r\n                        <Button\r\n                    )}\r\n                    <button\r\n                            variant=\"primary\"\r\n                            size=\"sm\"\r\n                        disabled={loading || !brainDumpText.trim()}\r\n                        className=\"px-4 py-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed text-sm\"\r\n                    >\r\n                        {loading ? 'Processing...' : 'Γ£¿ Process with AI'}\r\n                    </button>\r\n                </div>\r\n\r\n                {error && <div className=\"mt-2 text-red-400 text-sm\">{error}</div>}\r\n\r\n                {processedItems.length > 0 && (\r\n                    <div className=\"mt-4 pt-3 border-t border-gray-700 flex-grow overflow-y-auto max-h-80 pr-2\">\r\n                        <div className=\"flex justify-between items-center mb-2\">\r\n                            <h4 className=\"font-semibold text-accent-green\">Processed Items</h4>\r\n                            <Button onClick={handleTriageAll} variant=\"primary\" size=\"sm\" className=\"text-xs\">Add All to System</Button>\r\n                        </div>\r\n                        <div className=\"space-y-2\">\r\n                            {processedItems.map((item, index) => {\r\n                                const style = categoryStyles[item.category] || categoryStyles.Reference;\r\n                                return (\r\n                                    <div key={index} className={`p-2 rounded-md border text-sm ${style.bg} border-gray-700`}>\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div className=\"flex-grow\">\r\n                                                <span className={`text-xs font-bold px-2 py-0.5 rounded-full ${style.bg} ${style.text}`}>{item.category}</span>\r\n                                                <p className=\"font-semibold mt-1\">{item.summary}</p>\r\n                                                <p className=\"text-xs text-gray-400\">{item.actionableItem}</p>\r\n                                            </div>\r\n                                            {renderActionButton(item, index)}\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                        <div className=\"mt-4 flex justify-end gap-2\">\r\n                            <Button onClick={handleClearAll} variant=\"secondary\" size=\"sm\" className=\"text-xs\">Clear All</Button>\r\n                             <Button onClick={handleClearAndArchive} variant=\"secondary\" size=\"sm\" className=\"text-xs text-yellow-400\">Clear & Archive Dump</Button>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default BrainDumpModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\CockpitModule.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":11,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":22},{"ruleId":"no-empty","severity":2,"message":"Empty block statement.","line":20,"column":112,"nodeType":"BlockStatement","messageId":"unexpected","endLine":20,"endColumn":114,"suggestions":[{"messageId":"suggestComment","data":{"type":"block"},"fix":{"range":[841,841],"text":" /* empty */ "},"desc":"Add comment inside empty block statement."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport CockpitProfileBuilderModal from '../../CockpitProfileBuilderModal.js';\r\n\r\nconst CockpitModule = () => {\r\n  const { appState, dispatch } = useAppState();\r\n  const [open, setOpen] = useState(false);\r\n  const stacks = appState?.profileStacks || [];\r\n  const activeId = appState?.activeProfileStackId || null;\r\n  const active = stacks.find(s => s.id === activeId);\r\n\r\n  const handleApply = () => {\r\n    if (!activeId) return;\r\n    dispatch({ type: 'APPLY_PROFILE_STACK', payload: activeId });\r\n  };\r\n\r\n  // Debug mount logs for E2E trace visibility\r\n  React.useEffect(() => {\r\n    try { console.log('CockpitModule mounted, activeId:', activeId, 'stacks:', stacks.map(s => s.id)); } catch {}\r\n  }, [activeId, stacks]);\r\n\r\n  return (\r\n    <ContentCard title=\"Cockpit\" titleClassName=\"text-accent-teal\">\r\n      <div className=\"space-y-3\">\r\n        <div>\r\n          <div className=\"text-sm text-slate-400\">Active Stack</div>\r\n          <div data-testid=\"cockpit-active-stack\" className=\"font-semibold\">{active?.name || 'None'}</div>\r\n          <div className=\"flex gap-2 mt-2\">\r\n            <button data-testid=\"cockpit-apply-button\" onClick={handleApply} className=\"p-2 bg-sanctuary-accent text-white rounded\">Apply</button>\r\n            <button data-testid=\"cockpit-open-builder\" onClick={() => setOpen(true)} className=\"p-2 border rounded\">Open Builder</button>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <div className=\"text-sm text-slate-400\">Quick Stacks</div>\r\n          <div className=\"flex gap-2 mt-2 flex-wrap\">\r\n            {stacks.map(s => (\r\n              <button data-testid={`cockpit-quick-stack-${s.id}`} key={s.id} onClick={() => dispatch({ type: 'SET_ACTIVE_PROFILE_STACK', payload: s.id })} className={`px-2 py-1 rounded border ${s.id === activeId ? 'bg-sanctuary-accent text-white' : ''}`}>\r\n                {s.name}\r\n              </button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {open && (\r\n        <CockpitProfileBuilderModal onClose={() => setOpen(false)} existing={active} />\r\n      )}\r\n    </ContentCard>\r\n  );\r\n};\r\n\r\nexport default CockpitModule;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\DailyBriefingModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\ExpenseTrackerModule.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":112,"column":88,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5096,5117],"text":"This Month&apos;s Spending"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5096,5117],"text":"This Month&lsquo;s Spending"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5096,5117],"text":"This Month&#39;s Spending"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5096,5117],"text":"This Month&rsquo;s Spending"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\n\r\nconst ExpenseTrackerModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { expenses } = appState;\r\n\r\n    const [description, setDescription] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [category, setCategory] = useState('Other');\r\n\r\n    const handleSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const numAmount = parseFloat(amount);\r\n        if (!description.trim() || isNaN(numAmount) || numAmount <= 0) return;\r\n\r\n        dispatch({\r\n            type: 'ADD_EXPENSE',\r\n            payload: {\r\n                description: description.trim(),\r\n                amount: numAmount,\r\n                category,\r\n            },\r\n        });\r\n        setDescription('');\r\n        setAmount('');\r\n        setCategory('Other');\r\n    };\r\n    \r\n    const handleDelete = (id: string) => {\r\n        dispatch({ type: 'REMOVE_EXPENSE', payload: id });\r\n    };\r\n\r\n    const monthlySummary = useMemo(() => {\r\n        const now = new Date();\r\n        const currentMonth = now.getMonth();\r\n        const currentYear = now.getFullYear();\r\n\r\n        const summary = expenses\r\n            .filter(exp => {\r\n                const expDate = new Date(exp.date);\r\n                return expDate.getMonth() === currentMonth && expDate.getFullYear() === currentYear;\r\n            })\r\n            // FIX: Typed the accumulator to ensure `acc` properties are treated as numbers.\r\n            .reduce((acc, exp) => {\r\n                acc[exp.category] = (acc[exp.category] || 0) + exp.amount;\r\n                return acc;\r\n            }, {} as Record<string, number>);\r\n\r\n        // FIX: Cast Object.values to number[] to satisfy TypeScript.\r\n        const total = (Object.values(summary) as number[]).reduce((sum, val) => sum + val, 0);\r\n\r\n        return { summary, total };\r\n    }, [expenses]);\r\n\r\n    const categories = ['Housing', 'Utilities', 'Groceries', 'Transport', 'Health', 'Kids', 'Personal', 'Other'];\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒÆ╕ Simple Expense Tracker\">\r\n            <div className=\"flex flex-col h-full\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 mb-3\">\r\n                    Quickly log expenses to track spending patterns. All data is for the current month.\r\n                </p>\r\n                \r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    {/* Add Expense Form */}\r\n                    <form onSubmit={handleSubmit} className=\"space-y-2 p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n                        <h4 className=\"font-semibold text-accent-green\">Log New Expense</h4>\r\n                        <label htmlFor=\"expense-description\" className=\"sr-only\">Description</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"expense-description\"\r\n                            placeholder=\"Description (e.g., Groceries)\"\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            className=\"w-full p-2 bg-gray-900 border border-gray-600 rounded-md\"\r\n                            required\r\n                        />\r\n                                <label htmlFor=\"expense-amount\" className=\"sr-only\">Amount</label>\r\n                                <input\r\n                            type=\"number\"\r\n                                     id=\"expense-amount\"\r\n                                     placeholder=\"Amount\"\r\n                            value={amount}\r\n                            onChange={(e) => setAmount(e.target.value)}\r\n                            className=\"w-full p-2 bg-gray-900 border border-gray-600 rounded-md\"\r\n                            required\r\n                            step=\"0.01\"\r\n                            min=\"0.01\"\r\n                        />\r\n                        <label htmlFor=\"expense-category\" className=\"sr-only\">Category</label>\r\n                        <select\r\n                            id=\"expense-category\"\r\n                            value={category}\r\n                            onChange={(e) => setCategory(e.target.value)}\r\n                            className=\"w-full p-2 bg-gray-900 border border-gray-600 rounded-md\"\r\n                        >\r\n                            {categories.map(cat => <option key={cat} value={cat}>{cat}</option>)}\r\n                        </select>\r\n                        <button type=\"submit\" className=\"w-full p-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                            Add Expense\r\n                        </button>\r\n                    </form>\r\n\r\n                    {/* Monthly Summary */}\r\n                    <div className=\"p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n                        <h4 className=\"font-semibold text-accent-green mb-2\">This Month's Spending</h4>\r\n                        <div className=\"text-2xl font-bold mb-2\">\r\n                            Total: ${monthlySummary.total.toFixed(2)}\r\n                        </div>\r\n                        <div className=\"space-y-1 text-sm\">\r\n                            {Object.entries(monthlySummary.summary).map(([cat, total]) => (\r\n                                <div key={cat} className=\"flex justify-between\">\r\n                                    <span>{cat}:</span>\r\n                                    {/* FIX: Cast total to number to use toFixed. */}\r\n                                    <span className=\"font-semibold\">${(total as number).toFixed(2)}</span>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Recent Transactions */}\r\n                <div className=\"mt-4\">\r\n                    <h4 className=\"font-semibold text-accent-teal mb-2\">Recent Transactions</h4>\r\n                    <div className=\"space-y-2 max-h-40 overflow-y-auto pr-2\">\r\n                        {expenses.slice(0, 10).map(exp => (\r\n                            <div key={exp.id} className=\"flex justify-between items-center text-sm p-2 bg-gray-800 rounded-md\">\r\n                                <div>\r\n                                    <p className=\"font-semibold\">{exp.description}</p>\r\n                                    <p className=\"text-xs text-gray-400\">{exp.category} - {new Date(exp.date).toLocaleDateString()}</p>\r\n                                </div>\r\n                                <div className=\"flex items-center gap-3\">\r\n                                    <span className=\"font-bold text-accent-blue\">${(Number(exp.amount)).toFixed(2)}</span>\r\n                                     <button onClick={() => handleDelete(exp.id)} className=\"text-red-500 hover:text-red-400\" aria-label={`Delete expense ${exp.description}`}>\r\n                                        ≡ƒùæ∩╕Å\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default ExpenseTrackerModule;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\FinancialSnapshotModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useRef' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useProgressVar' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":22},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":67,"column":74,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2803,2824],"text":"This Month&apos;s Overview"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2803,2824],"text":"This Month&lsquo;s Overview"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2803,2824],"text":"This Month&#39;s Overview"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2803,2824],"text":"This Month&rsquo;s Overview"},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\n\r\nimport React, { useState, useMemo, useRef } from 'react';\r\nimport useProgressVar from '@hooks/useProgressVar';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\n\r\nconst FinancialSnapshotModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { expenses, financialBudgets } = appState;\r\n    const [editingCategory, setEditingCategory] = useState<string | null>(null);\r\n    const [budgetValue, setBudgetValue] = useState('');\r\n\r\n    const monthlySummary = useMemo(() => {\r\n        const now = new Date();\r\n        const currentMonth = now.getMonth();\r\n        const currentYear = now.getFullYear();\r\n\r\n        return expenses\r\n            .filter(exp => {\r\n                const expDate = new Date(exp.date);\r\n                return expDate.getMonth() === currentMonth && expDate.getFullYear() === currentYear;\r\n            })\r\n            // FIX: Typed the accumulator to ensure `acc` properties are treated as numbers.\r\n            .reduce((acc, exp) => {\r\n                acc[exp.category] = (acc[exp.category] || 0) + exp.amount;\r\n                return acc;\r\n            }, {} as Record<string, number>);\r\n    }, [expenses]);\r\n    \r\n    // FIX: Cast Object.values to number[] to fix reduce type error.\r\n    const totalSpent = (Object.values(monthlySummary) as number[]).reduce((sum, val) => sum + val, 0);\r\n    const totalBudget = (Object.values(financialBudgets) as number[]).reduce((sum, val) => sum + val, 0);\r\n\r\n    const categories = ['Housing', 'Utilities', 'Groceries', 'Transport', 'Health', 'Kids', 'Personal', 'Other'];\r\n\r\n    const handleSetBudget = (category: string) => {\r\n        const amount = parseFloat(budgetValue);\r\n        if (!isNaN(amount) && amount >= 0) {\r\n            dispatch({ type: 'SET_FINANCIAL_BUDGET', payload: { category, amount } });\r\n        }\r\n        setEditingCategory(null);\r\n        setBudgetValue('');\r\n    };\r\n\r\n    const handleEditClick = (category: string) => {\r\n        setEditingCategory(category);\r\n        setBudgetValue(String(financialBudgets[category] || ''));\r\n    };\r\n    \r\n    const getProgressBarColor = (percentage: number) => {\r\n        if (percentage > 100) return 'bg-red-500';\r\n        if (percentage > 75) return 'bg-yellow-500';\r\n        return 'bg-accent-green';\r\n    };\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒôè Financial Snapshot\">\r\n            <div className=\"flex flex-col h-full\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 mb-4\">\r\n                    Set monthly budgets and track spending against them for a high-level overview.\r\n                </p>\r\n\r\n                <div className=\"mb-4 p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n                    <h4 className=\"font-bold text-accent-teal\">This Month's Overview</h4>\r\n                    <p className=\"text-2xl font-bold\">${totalSpent.toFixed(2)} <span className=\"text-lg font-normal text-gray-400\">spent of</span> ${totalBudget.toFixed(2)}</p>\r\n                    <div className=\"w-full bg-gray-700 rounded-full h-2.5 mt-2\" role=\"progressbar\" aria-label={`Spending vs budget: ${Math.round((totalBudget > 0 ? totalSpent/totalBudget : 0)*100)}%`}> \r\n                        <div ref={(el) => el && el.style.setProperty('--progress', `${Math.min(100, (totalBudget > 0 ? totalSpent/totalBudget : 0)*100)}%`)} className={`${getProgressBarColor((totalBudget > 0 ? totalSpent/totalBudget : 0)*100)} h-2.5 rounded-full progress-fill`}></div>\r\n                        <span className=\"sr-only\">Spending vs budget: {Math.round((totalBudget > 0 ? totalSpent/totalBudget : 0)*100)}%</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"flex-grow space-y-2 overflow-y-auto max-h-80 pr-2\">\r\n                    {categories.map(category => {\r\n                        const spent = Number(monthlySummary[category] || 0);\r\n                        const budget = Number(financialBudgets[category] || 0);\r\n                        const percentage = budget > 0 ? (spent / budget) * 100 : 0;\r\n                        \r\n                        return (\r\n                            <div key={category} className=\"p-3 bg-gray-800 rounded-md\">\r\n                                <div className=\"flex justify-between items-center mb-1\">\r\n                                    <span className=\"font-semibold\">{category}</span>\r\n                                    {editingCategory === category ? (\r\n                                        <form onSubmit={(e) => { e.preventDefault(); handleSetBudget(category); }} className=\"flex items-center gap-1\">\r\n                                            <input type=\"number\" value={budgetValue} onChange={e => setBudgetValue(e.target.value)} className=\"w-20 p-1 text-sm bg-gray-900 border border-gray-600 rounded\" placeholder=\"0\" autoFocus onBlur={() => setEditingCategory(null)} />\r\n                                            <button type=\"submit\" className=\"text-xs px-2 py-1 bg-accent-green text-background-dark rounded\">Set</button>\r\n                                        </form>\r\n                                    ) : (\r\n                                        <button onClick={() => handleEditClick(category)} className=\"text-sm text-gray-400 hover:text-white\">\r\n                                            ${spent.toFixed(2)} / <span className=\"font-bold\">${budget.toFixed(2)}</span>\r\n                                        </button>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"w-full bg-gray-700 rounded-full h-1.5\" role=\"progressbar\" aria-label={`${category} spending: ${Math.round(percentage)}%`}>\r\n                                    <div ref={(el) => el && el.style.setProperty('--progress', `${Math.min(100, percentage)}%`)} className={`${getProgressBarColor(percentage)} h-1.5 rounded-full progress-fill`}></div>\r\n                                    <span className=\"sr-only\">{category} spending: {Math.round(percentage)}%</span>\r\n                                </div>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default FinancialSnapshotModule;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\HabitStreakTrackerModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\KnowledgeCaptureVaultModule.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":127,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":127,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { Button } from '../../Button';\r\nimport { Type } from '@google/genai';\r\nimport useSafeAI from '../../../hooks/useSafeAI';\r\nimport { useAIPromptSafety } from '../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../AIConsentModal.js';\r\nimport PIIWarningModal from '../../PIIWarningModal.js';\r\n\r\nconst KnowledgeCaptureVaultModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { knowledgeVaultEntries } = appState;\r\n\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [isFormVisible, setFormVisible] = useState(false);\r\n    const [editingEntry, setEditingEntry] = useState(null);\r\n\r\n    // New state for related notes\r\n    const [relatedNotes, setRelatedNotes] = useState({});\r\n    const [loadingRelated, setLoadingRelated] = useState({});\r\n    const [relatedError, setRelatedError] = useState({});\r\n    const { checkAndExecute, isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel, isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain } = useAIPromptSafety();\r\n\r\n\r\n    // Form state\r\n    const [title, setTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [tags, setTags] = useState('');\r\n    \r\n    const activeEntries = useMemo(() => knowledgeVaultEntries.filter(e => !e.isArchived), [knowledgeVaultEntries]);\r\n\r\n    const openAddForm = () => {\r\n        setEditingEntry(null);\r\n        setTitle('');\r\n        setContent('');\r\n        setTags('');\r\n        setFormVisible(true);\r\n    };\r\n\r\n    const openEditForm = (entry) => {\r\n        setEditingEntry(entry);\r\n        setTitle(entry.title);\r\n        setContent(entry.content);\r\n        setTags(entry.tags.join(', '));\r\n        setFormVisible(true);\r\n    };\r\n    \r\n    const handleFormSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!title.trim() || !content.trim()) return;\r\n        \r\n        const tagsArray = tags.split(',').map(t => t.trim()).filter(Boolean);\r\n\r\n        if (editingEntry) {\r\n            dispatch({\r\n                type: 'UPDATE_KNOWLEDGE_ENTRY',\r\n                payload: { ...editingEntry, title: title.trim(), content: content.trim(), tags: tagsArray }\r\n            });\r\n        } else {\r\n            dispatch({\r\n                type: 'ADD_KNOWLEDGE_ENTRY',\r\n                payload: { title: title.trim(), content: content.trim(), tags: tagsArray }\r\n            });\r\n        }\r\n        \r\n        setFormVisible(false);\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        if (window.confirm(\"Are you sure you want to permanently delete this knowledge entry?\")) {\r\n            dispatch({ type: 'REMOVE_KNOWLEDGE_ENTRY', payload: id });\r\n        }\r\n    };\r\n    \r\n    const handleArchive = (id) => {\r\n        dispatch({ type: 'ARCHIVE_KNOWLEDGE_ENTRY', payload: id });\r\n    };\r\n\r\n    const findRelatedNotes = async (entry) => {\r\n        setLoadingRelated(prev => ({ ...prev, [entry.id]: true }));\r\n        setRelatedError(prev => ({ ...prev, [entry.id]: '' }));\r\n\r\n        const otherEntries = activeEntries.filter(e => e.id !== entry.id);\r\n        if (otherEntries.length === 0) {\r\n            setLoadingRelated(prev => ({ ...prev, [entry.id]: false }));\r\n            setRelatedNotes(prev => ({ ...prev, [entry.id]: [] }));\r\n            return;\r\n        }\r\n\r\n        const prompt = `\r\n            Analyze the content of the Primary Note. From the list of Other Note Titles, identify the top 3 most thematically related notes.\r\n\r\n            Primary Note Content:\r\n            \"\"\"\r\n            ${entry.title}\r\n            ${entry.content}\r\n            \"\"\"\r\n\r\n            Other Note Titles (with their IDs):\r\n            ${otherEntries.map(e => `- ID: \"${e.id}\", Title: \"${e.title}\"`).join('\\n')}\r\n        `;\r\n\r\n        try {\r\n            const { generate } = useSafeAI();\r\n            const response = await generate(prompt, {\r\n                model: 'gemini-2.5-flash',\r\n                responseMimeType: 'application/json',\r\n                responseSchema: {\r\n                    type: Type.OBJECT,\r\n                    properties: {\r\n                        relatedIds: { type: Type.ARRAY, items: { type: Type.STRING } }\r\n                    }\r\n                },\r\n                timeoutMs: 20000,\r\n                skipPromptSafety: true\r\n            });\r\n            const { relatedIds } = response.json || (response.text ? JSON.parse(response.text) : {});\r\n            const foundNotes = otherEntries.filter(e => relatedIds.includes(e.id));\r\n            setRelatedNotes(prev => ({ ...prev, [entry.id]: foundNotes }));\r\n        } catch (e) {\r\n            setRelatedError(prev => ({ ...prev, [entry.id]: `AI analysis failed: ${e.message}` }));\r\n            console.error(e);\r\n        } finally {\r\n            setLoadingRelated(prev => ({ ...prev, [entry.id]: false }));\r\n        }\r\n    };\r\n    \r\n    const handleToggleEntry = (entry, isOpen) => {\r\n        if (isOpen && !relatedNotes[entry.id] && !loadingRelated[entry.id]) {\r\n            checkAndExecute(entry.content, () => findRelatedNotes(entry));\r\n        }\r\n    };\r\n    \r\n    const jumpToNote = (noteId) => {\r\n        const element = document.getElementById(`entry-details-${noteId}`);\r\n        if (element) {\r\n            element.scrollIntoView({ behavior: 'smooth', block: 'center' });\r\n            element.setAttribute('open', '');\r\n        }\r\n    };\r\n\r\n    const filteredEntries = useMemo(() => {\r\n        if (!searchTerm.trim()) return activeEntries;\r\n        const lowerSearch = searchTerm.toLowerCase();\r\n        return activeEntries.filter(entry => \r\n            entry.title.toLowerCase().includes(lowerSearch) ||\r\n            entry.content.toLowerCase().includes(lowerSearch) ||\r\n            entry.tags.some(tag => tag.toLowerCase().includes(lowerSearch))\r\n        );\r\n    }, [searchTerm, activeEntries]);\r\n\r\n    if (isFormVisible) {\r\n        return (\r\n            <ContentCard title={editingEntry ? 'Edit Knowledge Entry' : 'Add Knowledge Entry'}>\r\n                <form onSubmit={handleFormSubmit} className=\"space-y-4\">\r\n                    <input type=\"text\" placeholder=\"Title\" value={title} onChange={e => setTitle(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required />\r\n                    <textarea placeholder=\"Content...\" value={content} onChange={e => setContent(e.target.value)} rows={8} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required />\r\n                    <input type=\"text\" placeholder=\"Tags (comma-separated)\" value={tags} onChange={e => setTags(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" />\r\n                    <div className=\"flex justify-end gap-2\">\r\n                        <Button type=\"button\" onClick={() => setFormVisible(false)} variant=\"secondary\" size=\"sm\">Cancel</Button>\r\n                        <Button type=\"submit\" variant=\"primary\" size=\"sm\">{editingEntry ? 'Save Changes' : 'Save Entry'}</Button>\r\n                    </div>\r\n                </form>\r\n            </ContentCard>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒºá Knowledge Synthesis Engine\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <div className=\"flex flex-col h-full\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 mb-3\">\r\n                    A searchable second brain that finds connections between your ideas.\r\n                </p>\r\n                <div className=\"flex gap-2 mb-3\">\r\n                    <input\r\n                        type=\"search\"\r\n                        placeholder=\"Search vault...\"\r\n                        value={searchTerm}\r\n                        onChange={e => setSearchTerm(e.target.value)}\r\n                        className=\"w-full p-2 bg-gray-800 border-2 border-gray-700 rounded\"\r\n                    />\r\n                    <Button onClick={openAddForm} variant=\"primary\" size=\"sm\">+ New</Button>\r\n                </div>\r\n                \r\n                <div className=\"flex-grow space-y-2 overflow-y-auto max-h-96 pr-2\">\r\n                    {filteredEntries.length > 0 ? (\r\n                        filteredEntries.map(entry => (\r\n                            <details key={entry.id} id={`entry-details-${entry.id}`} \r\n                                // FIX: Cast the event target to `HTMLDetailsElement` to safely access the `open` property and resolve the TypeScript error.\r\n                                onToggle={(e) => handleToggleEntry(entry, (e.target as HTMLDetailsElement).open)} \r\n                                className=\"p-3 bg-gray-800 rounded-md border border-gray-700 group\">\r\n                                <summary className=\"cursor-pointer font-bold text-accent-teal\">\r\n                                    {entry.title}\r\n                                </summary>\r\n                                <div className=\"pt-2 mt-2 border-t border-gray-600\">\r\n                                    <p className=\"whitespace-pre-wrap text-sm mb-2\">{entry.content}</p>\r\n                                    <div className=\"flex flex-wrap gap-1 mb-4\">\r\n                                        {entry.tags.map(tag => (\r\n                                            <span key={tag} className=\"text-xs bg-gray-700 px-2 py-0.5 rounded-full\">{tag}</span>\r\n                                        ))}\r\n                                    </div>\r\n                                    \r\n                                    {/* Related Notes Section */}\r\n                                    <div className=\"pt-2 border-t border-gray-600/50\">\r\n                                        <h5 className=\"text-xs font-bold text-accent-blue mb-2\">Related Notes:</h5>\r\n                                        {loadingRelated[entry.id] && <p className=\"text-xs text-gray-400 animate-pulse\">Finding connections...</p>}\r\n                                        {relatedError[entry.id] && <p className=\"text-xs text-red-400\">{relatedError[entry.id]}</p>}\r\n                                        {relatedNotes[entry.id] && (\r\n                                            relatedNotes[entry.id].length > 0 ? (\r\n                                                <div className=\"flex flex-col items-start gap-1\">\r\n                                                    {relatedNotes[entry.id].map(related => (\r\n                                                        <button key={related.id} onClick={() => jumpToNote(related.id)} className=\"text-xs text-accent-green hover:underline text-left\">\r\n                                                            - {related.title}\r\n                                                        </button>\r\n                                                    ))}\r\n                                                </div>\r\n                                            ) : (\r\n                                                <p className=\"text-xs text-gray-500\">No strong connections found.</p>\r\n                                            )\r\n                                        )}\r\n                                    </div>\r\n\r\n                                    <div className=\"flex justify-end gap-2 mt-2\">\r\n                                        <Button onClick={() => handleArchive(entry.id)} variant=\"secondary\" size=\"sm\" className=\"text-xs text-yellow-400\">Archive</Button>\r\n                                        <Button onClick={() => openEditForm(entry)} variant=\"secondary\" size=\"sm\" className=\"text-xs text-accent-blue\">Edit</Button>\r\n                                        <Button onClick={() => handleDelete(entry.id)} variant=\"danger\" size=\"sm\" className=\"text-xs\">Delete</Button>\r\n                                    </div>\r\n                                </div>\r\n                            </details>\r\n                        ))\r\n                    ) : (\r\n                        <p className=\"text-center text-sm text-gray-500 p-4\">No entries yet. Add one to get started.</p>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default KnowledgeCaptureVaultModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\LiveChatModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'LiveServerMessage' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":27},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":31,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: &quot;Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: &ldquo;Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: &#34;Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: &rdquo;Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":80,"column":36,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add &apos;Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add &lsquo;Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add &#39;Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add &rsquo;Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":80,"column":55,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget&apos; to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget&lsquo; to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget&#39; to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget&rsquo; to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":69,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.&quot;, \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.&ldquo;, \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.&#34;, \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.&rdquo;, \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":72,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", &quot;Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", &ldquo;Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", &#34;Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", &rdquo;Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":108,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.&quot;, \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.&ldquo;, \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.&#34;, \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.&rdquo;, \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":111,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", &quot;Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", &ldquo;Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", &#34;Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", &rdquo;Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":135,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...&quot;, \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...&ldquo;, \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...&#34;, \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...&rdquo;, \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":138,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", &quot;What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", &ldquo;What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", &#34;What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", &rdquo;What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":167,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?&quot;, \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?&ldquo;, \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?&#34;, \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?&rdquo;, \"Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":170,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", &quot;Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", &ldquo;Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", &#34;Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", &rdquo;Synthesize my notes on project management into a new SOP.\"\r\n                "},"desc":"Replace with `&rdquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`\"` can be escaped with `&quot;`, `&ldquo;`, `&#34;`, `&rdquo;`.","line":80,"column":228,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&quot;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.&quot;\r\n                "},"desc":"Replace with `&quot;`."},{"messageId":"replaceWithAlt","data":{"alt":"&ldquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.&ldquo;\r\n                "},"desc":"Replace with `&ldquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#34;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.&#34;\r\n                "},"desc":"Replace with `&#34;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rdquo;"},"fix":{"range":[3202,3450],"text":"\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.&rdquo;\r\n                "},"desc":"Replace with `&rdquo;`."}]}],"suppressedMessages":[],"errorCount":14,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useRef, useEffect, useCallback } from 'react';\r\nimport { LiveServerMessage, Modality } from '@google/genai';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { useLiveChatFunctions } from '../../../hooks/useLiveChatFunctions.js';\r\nimport { useLiveSession } from '../../../hooks/useLiveSession.js';\r\nimport { useAudioPlayback } from '../../../hooks/useAudioPlayback.js';\r\nimport { useTranscript } from '../../../hooks/useTranscript.js';\r\n\r\nconst LiveChatModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    \r\n    const {\r\n        transcript,\r\n        userStreamingText,\r\n        aiStreamingText,\r\n        addEntry,\r\n        updateEntry,\r\n        handleStreamingMessage,\r\n        clearStreamingText,\r\n    } = useTranscript();\r\n    \r\n    const { allTools, systemInstruction, handleToolCall } = useLiveChatFunctions(dispatch, appState, { addTranscriptEntry: addEntry, updateTranscriptEntry: updateEntry });\r\n    \r\n    const { isSpeaking, playAudioChunk, stopPlayback } = useAudioPlayback();\r\n\r\n    const sendToolResponseFunc = useRef((_response) => {});\r\n\r\n    const onMessageHandler = useCallback(async (message) => {\r\n        handleStreamingMessage(message);\r\n\r\n        if (message.toolCall) {\r\n          for (const fc of message.toolCall.functionCalls) {\r\n            const { result } = await handleToolCall(fc);\r\n            sendToolResponseFunc.current({ functionResponses: { id: fc.id, name: fc.name, response: { result } } });\r\n          }\r\n        }\r\n        \r\n        const base64Audio = message.serverContent?.modelTurn?.parts[0]?.inlineData.data;\r\n        if (base64Audio) {\r\n            playAudioChunk(base64Audio);\r\n        }\r\n        \r\n        if (message.serverContent?.interrupted) {\r\n           stopPlayback();\r\n           clearStreamingText();\r\n        }\r\n    }, [handleStreamingMessage, handleToolCall, playAudioChunk, stopPlayback, clearStreamingText]);\r\n\r\n    const { status: sessionStatus, error, userVolume, startSession, stopSession, sendToolResponse } = useLiveSession({\r\n        onMessage: onMessageHandler,\r\n        config: {\r\n            model: 'gemini-2.5-flash-native-audio-preview-09-2025',\r\n            config: {\r\n                responseModalities: [Modality.AUDIO],\r\n                outputAudioTranscription: {},\r\n                inputAudioTranscription: {},\r\n                tools: [{ functionDeclarations: allTools }],\r\n                systemInstruction,\r\n            },\r\n        }\r\n    });\r\n\r\n    sendToolResponseFunc.current = sendToolResponse;\r\n\r\n    const status = isSpeaking ? 'speaking' : sessionStatus;\r\n    const isSessionActive = status !== 'idle' && status !== 'error';\r\n\r\n    const handleStop = useCallback(() => {\r\n        stopPlayback();\r\n        stopSession();\r\n    }, [stopSession, stopPlayback]);\r\n\r\n    return (\r\n        <ContentCard title=\"≡ƒÄÖ∩╕Å Wonky AI Live Chat\">\r\n            <div className=\"flex flex-col h-full min-h-[450px]\">\r\n                <p className=\"text-sm text-text-light text-opacity-80 mb-2\">Start a real-time voice conversation for hands-free system control.</p>\r\n                <div className=\"text-xs text-gray-400 mb-3 italic\">\r\n                    Examples: \"Add 'Finalize Q3 budget' to my tasks.\", \"Open the Life Maintenance Protocol.\", \"Capture this thought...\", \"What are my tasks for today?\", \"Synthesize my notes on project management into a new SOP.\"\r\n                </div>\r\n                \r\n                <div className=\"relative w-32 h-32 mx-auto mb-4\">\r\n                    <svg className=\"w-full h-full\" viewBox=\"0 0 100 100\">\r\n                        <circle cx=\"50\" cy=\"50\" r=\"45\" stroke=\"rgba(52, 211, 153, 0.2)\" strokeWidth=\"2\" fill=\"none\" />\r\n                        {status === 'speaking' && <circle cx=\"50\" cy=\"50\" r=\"45\" stroke=\"#1abc9c\" strokeWidth=\"3\" fill=\"none\" className=\"animate-pulse\" />}\r\n                        {status === 'connecting' && <circle cx=\"50\" cy=\"50\" r=\"45\" stroke=\"#58a6ff\" strokeWidth=\"2\" fill=\"none\" className=\"animate-pulse-slow\" />}\r\n                        <circle\r\n                            cx=\"50\"\r\n                            cy=\"50\"\r\n                            r=\"45\"\r\n                            stroke=\"#58a6ff\"\r\n                            strokeWidth=\"3\"\r\n                            fill=\"none\"\r\n                            strokeDasharray={283}\r\n                            strokeDashoffset={283 * (1 - Math.min(1, userVolume * 2))}\r\n                            opacity={status === 'listening' ? 1 : 0}\r\n                            className=\"dash-circle\"\r\n                        />\r\n                    </svg>\r\n                    <div className=\"absolute inset-0 flex items-center justify-center text-3xl\">{status === 'speaking' ? '≡ƒî▒' : '≡ƒÄñ'}</div>\r\n                </div>\r\n\r\n                <div className=\"text-center text-sm font-semibold mb-3 capitalize text-accent-teal\">{status}</div>\r\n\r\n                <div className=\"flex-grow overflow-y-auto p-3 bg-gray-800 rounded-md border border-gray-700 mb-4 space-y-4\">\r\n                    {transcript.map(entry => (\r\n                        <div key={entry.id} className={`flex items-end gap-2 ${entry.type === 'user' ? 'justify-end' : 'justify-start'} ${entry.type === 'system' ? 'justify-center' : ''}`}>\r\n                            {entry.type === 'ai' && <div className=\"flex-shrink-0 text-2xl w-8 h-8 flex items-center justify-center bg-card-dark rounded-full\">≡ƒî▒</div>}\r\n                            <div className={`max-w-[80%] p-3 rounded-xl ${ entry.type === 'user' ? 'bg-accent-blue text-background-dark rounded-br-none' : entry.type === 'system' ? 'bg-gray-700/50 text-text-light text-sm w-full' : 'bg-gray-700 text-text-light rounded-bl-none' }`}>\r\n                                <div className=\"text-sm break-words\">{entry.content}</div>\r\n                            </div>\r\n                            {entry.type === 'user' && <div className=\"flex-shrink-0 text-2xl w-8 h-8 flex items-center justify-center bg-card-dark rounded-full\">≡ƒæñ</div>}\r\n                        </div>\r\n                    ))}\r\n                    {userStreamingText && (\r\n                        <div className=\"flex items-end gap-2 justify-end\">\r\n                            <div className=\"max-w-[80%] p-3 rounded-xl bg-accent-blue text-background-dark rounded-br-none opacity-75\"><div className=\"text-sm break-words\">{userStreamingText}</div></div>\r\n                            <div className=\"flex-shrink-0 text-2xl w-8 h-8 flex items-center justify-center bg-card-dark rounded-full\">≡ƒæñ</div>\r\n                        </div>\r\n                    )}\r\n                    {aiStreamingText && (\r\n                        <div className=\"flex items-end gap-2 justify-start\">\r\n                            <div className=\"flex-shrink-0 text-2xl w-8 h-8 flex items-center justify-center bg-card-dark rounded-full\">≡ƒî▒</div>\r\n                            <div className=\"max-w-[80%] p-3 rounded-xl bg-gray-700 text-text-light rounded-bl-none opacity-75\"><div className=\"text-sm break-words blinking-cursor\">{aiStreamingText}</div></div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {error && <div className=\"text-red-400 text-sm mb-3 p-2 bg-red-900/30 rounded-md\">{error}</div>}\r\n                \r\n                <button onClick={isSessionActive ? handleStop : startSession} className={`w-full p-4 font-bold rounded-md transition-colors text-lg ${ isSessionActive ? 'bg-red-700 text-white hover:bg-red-600' : 'bg-accent-green text-background-dark hover:bg-green-500' }`}>\r\n                    {isSessionActive ? 'Stop Session' : 'Start Live Chat'}\r\n                </button>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default LiveChatModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\PomodoroTimerModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'targetMode' is missing in props validation","line":78,"column":27,"nodeType":"Property","messageId":"missingPropType","endLine":78,"endColumn":37},{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":78,"column":39,"nodeType":"Property","messageId":"missingPropType","endLine":78,"endColumn":44}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React, { useEffect, useRef, useState, useMemo } from 'react';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\nconst PomodoroTimerModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { mode, timeLeft, isActive, taskId, workSessionsCompleted } = appState.pomodoroState;\r\n    const { tasks, recurringTasks } = appState;\r\n    const intervalRef = useRef(null);\r\n    const [sessionEnded, setSessionEnded] = useState(false);\r\n\r\n    const activeTask = useMemo(() => {\r\n        if (!taskId) return null;\r\n        if (taskId.startsWith('recurring-')) {\r\n            return recurringTasks.find(t => t.id === taskId.replace('recurring-', ''));\r\n        }\r\n        return tasks.find(t => t.id === taskId);\r\n    }, [taskId, tasks, recurringTasks]);\r\n\r\n    useEffect(() => {\r\n        if (isActive && timeLeft > 0) {\r\n            intervalRef.current = window.setInterval(() => {\r\n                dispatch({ type: 'POMODORO_TICK' });\r\n            }, 1000);\r\n        } else {\r\n            if (intervalRef.current) clearInterval(intervalRef.current);\r\n            if (isActive && timeLeft === 0) {\r\n                // Session finished\r\n                dispatch({ type: 'POMODORO_TOGGLE' }); // Stop the timer logically\r\n                setSessionEnded(true);\r\n            }\r\n        }\r\n        return () => { if (intervalRef.current) clearInterval(intervalRef.current); };\r\n    }, [isActive, timeLeft, dispatch]);\r\n    \r\n    useEffect(() => { document.title = isActive ? `${formatTime(timeLeft)} - Wonky Sprout OS` : 'Wonky Sprout OS'; return () => { document.title = 'Wonky Sprout OS'; } }, [isActive, timeLeft]);\r\n\r\n    const handleToggle = () => {\r\n        if (sessionEnded) { // If session ended, default action is to start work\r\n            dispatch({ type: 'POMODORO_SET_MODE', payload: 'work' });\r\n            dispatch({ type: 'POMODORO_TOGGLE' });\r\n            setSessionEnded(false);\r\n        } else {\r\n            dispatch({ type: 'POMODORO_TOGGLE' });\r\n        }\r\n    };\r\n\r\n    const handleModeSwitch = (newMode) => {\r\n        dispatch({ type: 'POMODORO_SET_MODE', payload: newMode });\r\n        setSessionEnded(false);\r\n    };\r\n\r\n    const handleStartBreak = () => {\r\n        dispatch({ type: 'POMODORO_FINISH_SESSION_AND_START_BREAK' });\r\n        setSessionEnded(false);\r\n    };\r\n\r\n    const handleContinueTask = () => {\r\n        dispatch({ type: 'POMODORO_RESET' });\r\n        dispatch({ type: 'POMODORO_TOGGLE' });\r\n        setSessionEnded(false);\r\n    };\r\n\r\n    const handleCompleteAndNext = () => {\r\n        dispatch({ type: 'POMODORO_COMPLETE_TASK_AND_START_NEXT' });\r\n        setSessionEnded(false);\r\n    };\r\n\r\n    const formatTime = (seconds) => {\r\n        const mins = Math.floor(seconds / 60);\r\n        const secs = seconds % 60;\r\n        return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;\r\n    };\r\n\r\n    const ModeButton = ({ targetMode, label }) => (\r\n        <button onClick={() => handleModeSwitch(targetMode)} className={`px-3 py-1 rounded-md text-sm font-semibold transition-colors w-full ${mode === targetMode ? 'bg-accent-blue text-background-dark' : 'bg-gray-700 hover:bg-gray-600'}`}>\r\n            {label}\r\n        </button>\r\n    );\r\n\r\n    if (sessionEnded && mode === 'work') {\r\n        return (\r\n            <ContentCard title=\"ΓÅ▒∩╕Å Pomodoro: What's Next?\">\r\n                <div className=\"flex flex-col items-center text-center p-4\">\r\n                    <span className=\"text-4xl mb-3\">≡ƒÄë</span>\r\n                    <h3 className=\"text-xl font-bold text-accent-green\">Work Session Complete!</h3>\r\n                    <p className=\"text-gray-400 mb-4\">Task: {activeTask?.title || 'General Work'}</p>\r\n                    <div className=\"space-y-3 w-full max-w-xs\">\r\n                        <button onClick={handleStartBreak} className=\"w-full py-3 bg-accent-blue text-background-dark font-bold rounded\">Start Break</button>\r\n                        <button onClick={handleContinueTask} className=\"w-full py-2 bg-gray-600 rounded\">Continue This Task</button>\r\n                        <button onClick={handleCompleteAndNext} className=\"w-full py-2 bg-accent-green text-background-dark font-semibold rounded\">Γ£ô Complete & Start Next</button>\r\n                    </div>\r\n                </div>\r\n            </ContentCard>\r\n        );\r\n    }\r\n    \r\n    if (sessionEnded && (mode === 'shortBreak' || mode === 'longBreak')) {\r\n        return (\r\n             <ContentCard title=\"ΓÅ▒∩╕Å Pomodoro: Break Over\">\r\n                <div className=\"flex flex-col items-center text-center p-4\">\r\n                    <span className=\"text-4xl mb-3\">Γÿò∩╕Å</span>\r\n                    <h3 className=\"text-xl font-bold text-accent-green\">Break Finished!</h3>\r\n                    <p className=\"text-gray-400 mb-4\">Ready for the next session?</p>\r\n                    <button onClick={handleToggle} className=\"w-full max-w-xs py-3 bg-accent-green text-background-dark font-bold rounded\">\r\n                        Start Next Work Session\r\n                    </button>\r\n                </div>\r\n             </ContentCard>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ContentCard title=\"ΓÅ▒∩╕Å Pomodoro Timer\">\r\n            <div className=\"flex flex-col items-center\">\r\n                <div className=\"grid grid-cols-3 gap-2 w-full mb-4\">\r\n                    <ModeButton targetMode=\"work\" label=\"Work\" />\r\n                    <ModeButton targetMode=\"shortBreak\" label=\"Short Break\" />\r\n                    <ModeButton targetMode=\"longBreak\" label=\"Long Break\" />\r\n                </div>\r\n\r\n                {activeTask && (\r\n                    <div className=\"text-center p-2 bg-gray-800 rounded-md w-full mb-3 border border-gray-700\">\r\n                        <p className=\"text-xs text-accent-teal\">Current Task:</p>\r\n                        <p className=\"font-semibold truncate\">{activeTask.title}</p>\r\n                    </div>\r\n                )}\r\n                \r\n                <div className=\"font-mono text-6xl text-text-light my-4\">\r\n                    {formatTime(timeLeft)}\r\n                </div>\r\n\r\n                <div className=\"flex space-x-4\">\r\n                    <button onClick={handleToggle} className=\"px-8 py-3 bg-accent-green text-background-dark rounded-md hover:bg-green-600 font-semibold\">\r\n                        {isActive ? 'Pause' : 'Start'}\r\n                    </button>\r\n                    <button onClick={() => dispatch({type: 'POMODORO_RESET'})} className=\"px-8 py-3 bg-gray-600 text-text-light rounded-md hover:bg-gray-500 font-semibold\">\r\n                        Reset\r\n                    </button>\r\n                </div>\r\n                 <p className=\"text-xs text-gray-500 mt-3\">Sessions completed: {workSessionsCompleted}</p>\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default PomodoroTimerModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\QuickReferenceVaultModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\RecurringTaskEngineModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\SensoryCheckInModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":9,"column":24,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'isActive' is missing in props validation","line":9,"column":31,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'onClick' is missing in props validation","line":9,"column":41,"nodeType":"Property","messageId":"missingPropType","endLine":9,"endColumn":48},{"ruleId":"react/prop-types","severity":2,"message":"'sense' is missing in props validation","line":28,"column":23,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":28},{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":28,"column":30,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'emoji' is missing in props validation","line":28,"column":37,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":42},{"ruleId":"react/prop-types","severity":2,"message":"'onOverload' is missing in props validation","line":28,"column":44,"nodeType":"Property","messageId":"missingPropType","endLine":28,"endColumn":54}],"suppressedMessages":[],"errorCount":7,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\n\r\nimport React, { useState } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport SensoryOverloadModal from '../../SensoryOverloadModal.js';\r\n\r\nconst SenseButton = ({ label, isActive, onClick }) => {\r\n    const baseClass = 'px-2 py-1 rounded-md text-xs font-semibold transition-colors w-full break-words';\r\n    \r\n    const colorClasses = {\r\n        'Under': 'bg-blue-800/80 text-blue-200',\r\n        'OK': 'bg-green-800/80 text-green-200',\r\n        'Over': 'bg-red-800/80 text-red-200',\r\n    };\r\n\r\n    const activeClass = label ? colorClasses[label] : '';\r\n    const inactiveClass = 'bg-gray-700 hover:bg-gray-600';\r\n    \r\n    return (\r\n        <button onClick={onClick} className={`${baseClass} ${isActive ? activeClass : inactiveClass}`}>\r\n            {label}\r\n        </button>\r\n    );\r\n};\r\n\r\nconst SensoryRow = ({ sense, label, emoji, onOverload }) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const currentValue = appState.sensoryState[sense];\r\n\r\n    const setSenseValue = (value) => {\r\n        dispatch({ type: 'SET_SENSORY_STATE', payload: { sense, value } });\r\n        if (value === 'Over') {\r\n            onOverload();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex items-center gap-4\">\r\n            <h4 className=\"font-semibold text-accent-teal w-16 flex-shrink-0\">{emoji} {label}</h4>\r\n            <div className=\"grid grid-cols-3 gap-2 w-full\">\r\n                <SenseButton label=\"Under\" isActive={currentValue === 'Under'} onClick={() => setSenseValue('Under')} />\r\n                <SenseButton label=\"OK\" isActive={currentValue === 'OK'} onClick={() => setSenseValue('OK')} />\r\n                <SenseButton label=\"Over\" isActive={currentValue === 'Over'} onClick={() => setSenseValue('Over')} />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst SensoryCheckInModule = () => {\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n\r\n    return (\r\n        <>\r\n            <SensoryOverloadModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} />\r\n            <ContentCard title=\"≡ƒîí∩╕Å Sensory Check-in\">\r\n                 <p className=\"text-sm text-text-light text-opacity-80 mb-4\">\r\n                    Quickly log your current sensory state. Tap a selection again to clear it.\r\n                </p>\r\n                <div className=\"space-y-3\">\r\n                    <SensoryRow sense=\"sound\" label=\"Sound\" emoji=\"≡ƒöè\" onOverload={() => setIsModalOpen(true)} />\r\n                    <SensoryRow sense=\"sight\" label=\"Sight\" emoji=\"≡ƒæü∩╕Å\" onOverload={() => setIsModalOpen(true)} />\r\n                    <SensoryRow sense=\"touch\" label=\"Touch\" emoji=\"≡ƒñÜ\" onOverload={() => setIsModalOpen(true)} />\r\n                </div>\r\n            </ContentCard>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default SensoryCheckInModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\SensoryRegulationModule.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'useEffect' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":27,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":36}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useEffect } from 'react';\r\nimport ContentCard from '../../ContentCard.js';\r\n\r\nconst BubbleWrap = () => {\r\n    const [bubbles, setBubbles] = useState(() => Array(100).fill(false));\r\n\r\n    const popBubble = (index) => {\r\n        setBubbles(currentBubbles => {\r\n            const newBubbles = [...currentBubbles];\r\n            newBubbles[index] = true;\r\n            return newBubbles;\r\n        });\r\n    };\r\n\r\n    const resetBubbles = () => setBubbles(Array(100).fill(false));\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"grid grid-cols-10 gap-2\">\r\n                {bubbles.map((isPopped, index) => (\r\n                    <button\r\n                        key={index}\r\n                        onClick={() => popBubble(index)}\r\n                        className={`aspect-square rounded-full transition-all duration-150 transform ${\r\n                            isPopped \r\n                                ? 'bg-accent-blue/20 scale-90' \r\n                                : 'bg-accent-blue/50 hover:bg-accent-blue/80 active:scale-95'\r\n                        }`}\r\n                        aria-label={`Pop bubble ${index + 1}`}\r\n                    />\r\n                ))}\r\n            </div>\r\n            <button onClick={resetBubbles} className=\"w-full mt-4 p-2 bg-gray-700 rounded hover:bg-gray-600 font-semibold\">\r\n                Reset\r\n            </button>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst ButtonPusher = () => {\r\n    const colors = ['bg-red-500', 'bg-yellow-500', 'bg-green-500', 'bg-blue-500', 'bg-purple-500'];\r\n    const [buttons, setButtons] = useState(() => Array(25).fill(0));\r\n\r\n    const pushButton = (index) => {\r\n        setButtons(currentButtons => {\r\n            const newButtons = [...currentButtons];\r\n            newButtons[index] = (newButtons[index] + 1) % colors.length;\r\n            return newButtons;\r\n        });\r\n    };\r\n    \r\n    return (\r\n        <div className=\"grid grid-cols-5 gap-2\">\r\n            {buttons.map((colorIndex, index) => (\r\n                <button\r\n                    key={index}\r\n                    onClick={() => pushButton(index)}\r\n                    className={`aspect-square rounded-lg transition-colors duration-100 ${colors[colorIndex]}`}\r\n                    aria-label={`Push button ${index + 1}`}\r\n                />\r\n            ))}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst PopIt = () => {\r\n    const [pops, setPops] = useState(() => Array(36).fill(false));\r\n    const togglePop = (index) => {\r\n        setPops(p => {\r\n            const newPops = [...p];\r\n            newPops[index] = !newPops[index];\r\n            return newPops;\r\n        });\r\n    };\r\n    \r\n    return (\r\n        <div className=\"p-2 bg-gradient-to-br from-pink-500 to-purple-600 rounded-lg\">\r\n            <div className=\"grid grid-cols-6 gap-2\">\r\n                {pops.map((isPopped, index) => (\r\n                    <button\r\n                        key={index}\r\n                        onClick={() => togglePop(index)}\r\n                        className={`aspect-square rounded-full transition-all duration-150 transform ${\r\n                            isPopped ? 'bg-black/20 scale-90' : 'bg-white/30 hover:bg-white/50 active:scale-95'\r\n                        }`}\r\n                        aria-label={`Pop it bubble ${index + 1}`}\r\n                    />\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst SensoryRegulationModule = () => {\r\n    const [activeTool, setActiveTool] = useState('bubbleWrap');\r\n\r\n    const tools = {\r\n        bubbleWrap: { label: 'Bubble Wrap', component: <BubbleWrap /> },\r\n        buttonPusher: { label: 'Button Pusher', component: <ButtonPusher /> },\r\n        popIt: { label: 'Pop It', component: <PopIt /> },\r\n    };\r\n\r\n    // FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\n    interface TabButtonProps {\r\n        toolKey: string;\r\n        label: string;\r\n    }\r\n    const TabButton: React.FC<TabButtonProps> = ({ toolKey, label }) => (\r\n        <button\r\n            onClick={() => setActiveTool(toolKey)}\r\n            className={`px-3 py-2 text-sm font-semibold rounded-t-md transition-colors w-full ${\r\n                activeTool === toolKey\r\n                    ? 'bg-card-dark border-b-2 border-accent-blue text-accent-blue'\r\n                    : 'bg-gray-800 text-gray-400 hover:bg-gray-700'\r\n            }`}\r\n        >\r\n            {label}\r\n        </button>\r\n    );\r\n\r\n    return (\r\n        <ContentCard title=\"Sensory Regulation Toolkit\">\r\n             <div className=\"flex border-b border-gray-700\">\r\n                {Object.entries(tools).map(([key, { label }]) => (\r\n                    <TabButton key={key} toolKey={key} label={label} />\r\n                ))}\r\n            </div>\r\n            <div className=\"pt-4\">\r\n                {tools[activeTool].component}\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default SensoryRegulationModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\SopGeneratorModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\StrategicObjectivesModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'project' is missing in props validation","line":10,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":10,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":11,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":11,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":20,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":20,"endColumn":53},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":22,"column":25,"nodeType":"Identifier","messageId":"missingPropType","endLine":22,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":26,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":26,"endColumn":53},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":27,"column":25,"nodeType":"Identifier","messageId":"missingPropType","endLine":27,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":31,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":31,"endColumn":53},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":32,"column":25,"nodeType":"Identifier","messageId":"missingPropType","endLine":32,"endColumn":27},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":48,"column":36,"nodeType":"Identifier","messageId":"missingPropType","endLine":48,"endColumn":38},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":56,"column":71,"nodeType":"Identifier","messageId":"missingPropType","endLine":56,"endColumn":73},{"ruleId":"react/prop-types","severity":2,"message":"'project.id' is missing in props validation","line":60,"column":24,"nodeType":"Identifier","messageId":"missingPropType","endLine":60,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'project.title' is missing in props validation","line":70,"column":105,"nodeType":"Identifier","messageId":"missingPropType","endLine":70,"endColumn":110},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":94,"column":79,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[4362,4378],"text":"Today&apos;s Agenda ("},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[4362,4378],"text":"Today&lsquo;s Agenda ("},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[4362,4378],"text":"Today&#39;s Agenda ("},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[4362,4378],"text":"Today&rsquo;s Agenda ("},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":124,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":124,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6312,6315],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6312,6315],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":125,"column":12,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":125,"endColumn":15,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6329,6332],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6329,6332],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":126,"column":34,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":126,"endColumn":37,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6370,6373],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6370,6373],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":16,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useMemo } from 'react';\r\nimport useProgressVar from '@hooks/useProgressVar';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\n\r\n\r\n// --- PROJECT FOCUS MODAL ---\r\nconst ProjectFocusModal = ({\r\n    project,\r\n    onClose,\r\n}) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { tasks } = appState;\r\n    const [newTaskTitle, setNewTaskTitle] = useState('');\r\n\r\n    const todayStr = useMemo(() => new Date().toISOString().split('T')[0], []);\r\n\r\n    const backlogTasks = useMemo(() =>\r\n        tasks.filter(t => t.projectId === project.id && t.status === 'todo' && !t.dueDate)\r\n            .sort((a, b) => (a.createdAt > b.createdAt ? -1 : 1)),\r\n        [tasks, project.id]\r\n    );\r\n\r\n    const todaysProjectTasks = useMemo(() =>\r\n        tasks.filter(t => t.projectId === project.id && t.dueDate === todayStr && t.status === 'todo'),\r\n        [tasks, project.id, todayStr]\r\n    );\r\n    \r\n    const completedProjectTasks = useMemo(() =>\r\n        tasks.filter(t => t.projectId === project.id && t.status === 'done'),\r\n        [tasks, project.id]\r\n    );\r\n\r\n    const handleScheduleForToday = (taskId) => {\r\n        dispatch({ type: 'UPDATE_TASK', payload: { id: taskId, dueDate: todayStr } });\r\n    };\r\n\r\n    const handleQuickAddTask = (e) => {\r\n        e.preventDefault();\r\n        if (!newTaskTitle.trim()) return;\r\n        dispatch({\r\n            type: 'ADD_TASK',\r\n            payload: {\r\n                title: newTaskTitle.trim(),\r\n                priority: 'Medium',\r\n                dueDate: null,\r\n                projectId: project.id,\r\n            }\r\n        });\r\n        setNewTaskTitle('');\r\n    };\r\n\r\n    // Compute project progress for this focused project\r\n    const progress = React.useMemo(() => {\r\n        const linkedTasks = tasks.filter(t => t.projectId === project.id);\r\n        if (!linkedTasks || linkedTasks.length === 0) return 0;\r\n        const completedTasks = linkedTasks.filter(t => t.status === 'done').length;\r\n        return (completedTasks / linkedTasks.length) * 100;\r\n    }, [tasks, project.id]);\r\n\r\n    const progressRef = React.useRef<HTMLDivElement | null>(null);\r\n    useProgressVar(progressRef, progress);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-6 border border-gray-700 w-full max-w-2xl\" onClick={e => e.stopPropagation()}>\r\n                <header className=\"flex justify-between items-start mb-4\">\r\n                    <div>\r\n                        <h3 className=\"text-2xl font-bold text-accent-teal\">≡ƒÅù∩╕Å Project Focus: {project.title}</h3>\r\n                        <p className=\"text-sm text-gray-400\">Plan and execute tasks for this project.</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-white text-2xl\" aria-label=\"Close modal\">&times;</button>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 max-h-[70vh] overflow-y-auto pr-2\">\r\n                    {/* Backlog Column */}\r\n                    <div>\r\n                        <h4 className=\"font-bold text-accent-blue mb-2\">Project Backlog ({backlogTasks.length})</h4>\r\n                        <div className=\"space-y-2\">\r\n                            {backlogTasks.length > 0 ? backlogTasks.map(task => (\r\n                                <div key={task.id} className=\"p-2 bg-gray-800 rounded-md flex justify-between items-center text-sm\">\r\n                                    <span>{task.title}</span>\r\n                                    <button onClick={() => handleScheduleForToday(task.id)} className=\"px-2 py-1 text-xs bg-accent-green text-background-dark font-semibold rounded hover:bg-green-500 flex-shrink-0\">\r\n                                        Do Today\r\n                                    </button>\r\n                                </div>\r\n                            )) : <p className=\"text-xs text-gray-500 p-2\">No unscheduled tasks.</p>}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Today's Agenda for this project */}\r\n                    <div>\r\n                        <h4 className=\"font-bold text-accent-green mb-2\">Today's Agenda ({todaysProjectTasks.length})</h4>\r\n                        <div className=\"space-y-2\">\r\n                             {todaysProjectTasks.length > 0 ? todaysProjectTasks.map(task => (\r\n                                <div key={task.id} className=\"p-2 bg-gray-800 rounded-md text-sm\">\r\n                                    <span>{task.title}</span>\r\n                                </div>\r\n                             )) : <p className=\"text-xs text-gray-500 p-2\">No tasks scheduled for today.</p>}\r\n                        </div>\r\n                         <h4 className=\"font-bold text-gray-500 mt-4 mb-2\">Completed ({completedProjectTasks.length})</h4>\r\n                         <div className=\"space-y-2\">\r\n                             {completedProjectTasks.length > 0 ? completedProjectTasks.map(task => (\r\n                                <div key={task.id} className=\"p-2 bg-gray-800 rounded-md text-sm opacity-60\">\r\n                                    <span className=\"line-through\">{task.title}</span>\r\n                                </div>\r\n                             )) : <p className=\"text-xs text-gray-500 p-2\">No tasks completed yet.</p>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <form onSubmit={handleQuickAddTask} className=\"mt-4 pt-4 border-t border-gray-700 flex gap-2\">\r\n                    <input type=\"text\" value={newTaskTitle} onChange={e => setNewTaskTitle(e.target.value)} placeholder=\"Quick add task to this project...\" className=\"flex-grow p-2 bg-gray-900 border border-gray-600 rounded\" />\r\n                    <button type=\"submit\" className=\"px-4 bg-accent-blue text-background-dark font-bold rounded\">Add</button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface ProjectItemProps {\r\n    project: any;\r\n    tasks: any[];\r\n    setFocusedProject: (project: any) => void;\r\n}\r\nconst ProjectItem: React.FC<ProjectItemProps> = ({ project, tasks, setFocusedProject }) => {\r\n    const { progress, completed, total } = useMemo(() => {\r\n        const linkedTasks = tasks.filter(t => t.projectId === project.id);\r\n        if (linkedTasks.length === 0) return { progress: 0, completed: 0, total: 0 };\r\n\r\n        const completedTasks = linkedTasks.filter(t => t.status === 'done').length;\r\n        const progress = (completedTasks / linkedTasks.length) * 100;\r\n        return { progress, completed: completedTasks, total: linkedTasks.length };\r\n    }, [tasks, project.id]);\r\n\r\n    const progressRef = React.useRef<HTMLDivElement | null>(null);\r\n    useProgressVar(progressRef, progress);\r\n\r\n    return (\r\n        <button onClick={() => setFocusedProject(project)} className=\"w-full text-left p-3 bg-gray-800 rounded-md hover:bg-gray-700 transition-colors\">\r\n            <div className=\"flex justify-between items-center mb-1\">\r\n                <p className=\"font-semibold\">{project.title}</p>\r\n                <p className=\"text-xs text-gray-400\">{completed}/{total} tasks</p>\r\n            </div>\r\n            <div className=\"w-full bg-gray-700 rounded-full h-2.5\" role=\"progressbar\" aria-label={`Project progress: ${Math.round(progress)}%`}>\r\n                <div ref={progressRef} className=\"bg-accent-blue h-2.5 rounded-full progress-fill\" />\r\n                <span className=\"sr-only\">Project progress: {Math.round(progress)}%</span>\r\n            </div>\r\n        </button>\r\n    );\r\n};\r\n\r\nconst StrategicObjectivesModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { objectives, projects, tasks } = appState;\r\n\r\n    const [newObjectiveTitle, setNewObjectiveTitle] = useState('');\r\n    const [addingProjectTo, setAddingProjectTo] = useState(null);\r\n    const [newProjectTitle, setNewProjectTitle] = useState('');\r\n    const [newProjectStart, setNewProjectStart] = useState('');\r\n    const [newProjectEnd, setNewProjectEnd] = useState('');\r\n    const [focusedProject, setFocusedProject] = useState(null);\r\n\r\n    const handleAddObjective = (e) => {\r\n        e.preventDefault();\r\n        if (!newObjectiveTitle.trim()) return;\r\n        dispatch({ type: 'ADD_OBJECTIVE', payload: { title: newObjectiveTitle.trim() } });\r\n        setNewObjectiveTitle('');\r\n    };\r\n    \r\n    const handleAddProject = (e) => {\r\n        e.preventDefault();\r\n        if (!newProjectTitle.trim() || !addingProjectTo) return;\r\n        dispatch({ \r\n            type: 'ADD_PROJECT', \r\n            payload: { \r\n                title: newProjectTitle.trim(), \r\n                objectiveId: addingProjectTo,\r\n                startDate: newProjectStart || undefined,\r\n                endDate: newProjectEnd || undefined,\r\n            } \r\n        });\r\n        setNewProjectTitle('');\r\n        setNewProjectStart('');\r\n        setNewProjectEnd('');\r\n        setAddingProjectTo(null);\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {focusedProject && <ProjectFocusModal project={focusedProject} onClose={() => setFocusedProject(null)} />}\r\n            <ContentCard title=\"≡ƒÄ» Strategic Objectives\">\r\n                <div className=\"flex flex-col h-full\">\r\n                    <p className=\"text-sm text-text-light text-opacity-80 mb-4\">\r\n                        Define high-level objectives and break them into actionable projects. Click a project to focus.\r\n                    </p>\r\n\r\n                    <div className=\"flex-grow space-y-4 overflow-y-auto max-h-96 pr-2\">\r\n                        {objectives.filter(o => !o.isArchived).length > 0 ? (\r\n                            objectives.filter(o => !o.isArchived).map(objective => {\r\n                                const objectiveProjects = projects.filter(p => p.objectiveId === objective.id && !p.isArchived);\r\n                                return (\r\n                                    <details key={objective.id} className=\"p-3 bg-card-dark rounded-lg border border-gray-700 group\">\r\n                                        <summary className=\"cursor-pointer font-bold text-accent-green text-lg\">{objective.title}</summary>\r\n                                        <div className=\"pt-2 mt-2 border-t border-gray-600 space-y-2\">\r\n                                            {objectiveProjects.length > 0 ? (\r\n                                                objectiveProjects.map(proj => <ProjectItem key={proj.id} project={proj} tasks={tasks} setFocusedProject={setFocusedProject} />)\r\n                                            ) : (\r\n                                                <p className=\"text-sm text-gray-500 italic\">No projects defined for this objective.</p>\r\n                                            )}\r\n                                            {addingProjectTo === objective.id ? (\r\n                                                <form onSubmit={handleAddProject} className=\"p-2 space-y-2 bg-gray-900/50 rounded-md\">\r\n                                                    <input type=\"text\" value={newProjectTitle} onChange={e => setNewProjectTitle(e.target.value)} placeholder=\"New project title...\" className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" autoFocus />\r\n                                                    <div className=\"flex gap-2\">\r\n                                                        <input type=\"date\" value={newProjectStart} onChange={e => setNewProjectStart(e.target.value)} className=\"w-1/2 p-2 bg-gray-800 border border-gray-600 rounded\" title=\"Optional: Start Date\"/>\r\n                                                        <input type=\"date\" value={newProjectEnd} onChange={e => setNewProjectEnd(e.target.value)} className=\"w-1/2 p-2 bg-gray-800 border border-gray-600 rounded\" title=\"Optional: End Date\"/>\r\n                                                    </div>\r\n                                                    <div className=\"flex justify-end gap-2\">\r\n                                                        <button type=\"button\" onClick={() => setAddingProjectTo(null)} className=\"px-3 py-1 bg-gray-600 rounded text-sm\">Cancel</button>\r\n                                                        <button type=\"submit\" className=\"px-3 py-1 bg-accent-blue text-background-dark font-bold rounded text-sm\">Add</button>\r\n                                                    </div>\r\n                                                </form>\r\n                                            ) : (\r\n                                                <button onClick={() => setAddingProjectTo(objective.id)} className=\"text-xs text-accent-blue hover:underline mt-2\">+ Add Project</button>\r\n                                            )}\r\n                                        </div>\r\n                                    </details>\r\n                                );\r\n                            })\r\n                        ) : (\r\n                            <div className=\"text-center text-gray-500 p-8\">\r\n                                <span className=\"text-4xl\">≡ƒÄ»</span>\r\n                                <p className=\"mt-2 font-semibold\">Define Your Mission</p>\r\n                                <p className=\"text-sm\">Add your first long-term objective below to begin strategic planning.</p>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                    \r\n                    <form onSubmit={handleAddObjective} className=\"mt-auto pt-4 border-t border-gray-700 flex gap-2\">\r\n                        <input type=\"text\" placeholder=\"Add new objective...\" value={newObjectiveTitle} onChange={e => setNewObjectiveTitle(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required />\r\n                        <button type=\"submit\" className=\"px-4 bg-accent-green text-background-dark font-bold rounded hover:bg-green-500\">Add</button>\r\n                    </form>\r\n                </div>\r\n            </ContentCard>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default StrategicObjectivesModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\SystemDiagnosticsModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\SystemNudgeModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'nudge' is missing in props validation","line":22,"column":30,"nodeType":"Property","messageId":"missingPropType","endLine":22,"endColumn":35},{"ruleId":"react/prop-types","severity":2,"message":"'onDismiss' is missing in props validation","line":22,"column":37,"nodeType":"Property","messageId":"missingPropType","endLine":22,"endColumn":46},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.theme' is missing in props validation","line":23,"column":38,"nodeType":"Identifier","messageId":"missingPropType","endLine":23,"endColumn":43},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.icon' is missing in props validation","line":28,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":28,"endColumn":54},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.title' is missing in props validation","line":30,"column":80,"nodeType":"Identifier","messageId":"missingPropType","endLine":30,"endColumn":85},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.message' is missing in props validation","line":32,"column":32,"nodeType":"Identifier","messageId":"missingPropType","endLine":32,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.onAction' is missing in props validation","line":37,"column":40,"nodeType":"Identifier","messageId":"missingPropType","endLine":37,"endColumn":48},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.actionLabel' is missing in props validation","line":37,"column":85,"nodeType":"Identifier","messageId":"missingPropType","endLine":37,"endColumn":96},{"ruleId":"react/prop-types","severity":2,"message":"'nudge.id' is missing in props validation","line":38,"column":56,"nodeType":"Identifier","messageId":"missingPropType","endLine":38,"endColumn":58}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { Button } from '../../Button';\r\n\r\nconst themeClasses = {\r\n    info: {\r\n        gradient: 'from-sanctuary-focus/10 to-sanctuary-accent/10',\r\n        border: 'border-sanctuary-focus/30',\r\n        title: 'text-sanctuary-accent',\r\n    },\r\n    warning: {\r\n        gradient: 'from-sanctuary-warning/10 to-yellow-500/10',\r\n        border: 'border-sanctuary-warning/30',\r\n        title: 'text-sanctuary-warning',\r\n    },\r\n    reward: {\r\n        gradient: 'from-sanctuary-purple/10 to-pink-500/10',\r\n        border: 'border-sanctuary-purple/30',\r\n        title: 'text-sanctuary-purple',\r\n    },\r\n};\r\n\r\nconst SystemNudgeModule = ({ nudge, onDismiss }) => {\r\n    const theme = themeClasses[nudge.theme] || themeClasses.info;\r\n\r\n    return (\r\n        <div className={`p-6 bg-gradient-to-r ${theme.gradient} rounded-lg shadow-lg border ${theme.border} flex flex-col md:flex-row items-center justify-between gap-4 animate-pulse-slow`}>\r\n            <div className=\"flex items-center gap-4 text-left w-full\">\r\n                <div className=\"text-4xl\">{nudge.icon}</div>\r\n                <div>\r\n                    <h3 className={`text-2xl font-bold ${theme.title}`}>{nudge.title}</h3>\r\n                    <p className=\"text-sanctuary-text-main\">\r\n                        {nudge.message}\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div className=\"flex items-center gap-3 flex-shrink-0 mt-4 md:mt-0\">\r\n                <Button onClick={nudge.onAction} variant=\"primary\" size=\"sm\">{nudge.actionLabel}</Button>\r\n                <Button onClick={() => onDismiss(nudge.id)} variant=\"secondary\" size=\"sm\" aria-label=\"Dismiss notification\">&times;</Button>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SystemNudgeModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\TaskMatrixModule.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":17,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":17,"endColumn":11},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":18,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":18,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'isOpen' is missing in props validation","line":83,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":83,"endColumn":11},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":84,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":84,"endColumn":12},{"ruleId":"react/prop-types","severity":2,"message":"'templates' is missing in props validation","line":85,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":85,"endColumn":14},{"ruleId":"react/prop-types","severity":2,"message":"'onSelect' is missing in props validation","line":86,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":86,"endColumn":13},{"ruleId":"react/prop-types","severity":2,"message":"'templates.length' is missing in props validation","line":93,"column":28,"nodeType":"Identifier","messageId":"missingPropType","endLine":93,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'templates.map' is missing in props validation","line":95,"column":36,"nodeType":"Identifier","messageId":"missingPropType","endLine":95,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'inboxTasks' is missing in props validation","line":112,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":112,"endColumn":15},{"ruleId":"react/prop-types","severity":2,"message":"'triageTaskId' is missing in props validation","line":113,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":113,"endColumn":17},{"ruleId":"react/prop-types","severity":2,"message":"'inboxTasks.find' is missing in props validation","line":119,"column":50,"nodeType":"Identifier","messageId":"missingPropType","endLine":119,"endColumn":54},{"ruleId":"react/prop-types","severity":2,"message":"'inboxTasks.findIndex' is missing in props validation","line":123,"column":41,"nodeType":"Identifier","messageId":"missingPropType","endLine":123,"endColumn":50},{"ruleId":"react/prop-types","severity":2,"message":"'agenda' is missing in props validation","line":207,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":207,"endColumn":11},{"ruleId":"react/prop-types","severity":2,"message":"'focusTaskId' is missing in props validation","line":208,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":208,"endColumn":16},{"ruleId":"react/prop-types","severity":2,"message":"'snoozedTaskIds' is missing in props validation","line":209,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":209,"endColumn":19},{"ruleId":"react/prop-types","severity":2,"message":"'onStartTimer' is missing in props validation","line":210,"column":5,"nodeType":"Property","messageId":"missingPropType","endLine":210,"endColumn":17},{"ruleId":"react/prop-types","severity":2,"message":"'agenda.find' is missing in props validation","line":214,"column":46,"nodeType":"Identifier","messageId":"missingPropType","endLine":214,"endColumn":50},{"ruleId":"react/prop-types","severity":2,"message":"'agenda.findIndex' is missing in props validation","line":217,"column":37,"nodeType":"Identifier","messageId":"missingPropType","endLine":217,"endColumn":46},{"ruleId":"react/prop-types","severity":2,"message":"'agenda.length' is missing in props validation","line":218,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":218,"endColumn":57},{"ruleId":"react/prop-types","severity":2,"message":"'agenda[].itemType' is missing in props validation","line":220,"column":22,"nodeType":"Identifier","messageId":"missingPropType","endLine":220,"endColumn":30},{"ruleId":"react/prop-types","severity":2,"message":"'agenda[].completedAt' is missing in props validation","line":220,"column":52,"nodeType":"Identifier","messageId":"missingPropType","endLine":220,"endColumn":63},{"ruleId":"react/prop-types","severity":2,"message":"'snoozedTaskIds.includes' is missing in props validation","line":220,"column":83,"nodeType":"Identifier","messageId":"missingPropType","endLine":220,"endColumn":91},{"ruleId":"react/prop-types","severity":2,"message":"'agenda[].id' is missing in props validation","line":220,"column":97,"nodeType":"Identifier","messageId":"missingPropType","endLine":220,"endColumn":99},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":289,"column":11,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":289,"endColumn":14,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14053,14056],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14053,14056],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":290,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":290,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14095,14098],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14095,14098],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14166,14169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14166,14169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":293,"column":15,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":293,"endColumn":18,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[14195,14198],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[14195,14198],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/prop-types","severity":2,"message":"'label' is missing in props validation","line":497,"column":26,"nodeType":"Property","messageId":"missingPropType","endLine":497,"endColumn":31},{"ruleId":"react/prop-types","severity":2,"message":"'targetView' is missing in props validation","line":497,"column":33,"nodeType":"Property","messageId":"missingPropType","endLine":497,"endColumn":43},{"ruleId":"react/prop-types","severity":2,"message":"'count' is missing in props validation","line":497,"column":45,"nodeType":"Property","messageId":"missingPropType","endLine":497,"endColumn":50}],"suppressedMessages":[],"errorCount":30,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport ContentCard from '../../ContentCard.js';\r\nimport { SOP_DATA } from '../../../constants.js';\r\nimport DailyTimeline from './task-matrix/DailyTimeline.js';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\nconst addDays = (date, days) => {\r\n    const result = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n};\r\n\r\n// --- URGENT TASK MODAL ---\r\nconst UrgentTaskModal = ({\r\n    isOpen,\r\n    onClose,\r\n}) => {\r\n    const { appState, dispatch } = useAppState();\r\n    const [title, setTitle] = useState('');\r\n    const [impact, setImpact] = useState('low');\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!title.trim()) return;\r\n\r\n        const todayStr = toYMD(new Date());\r\n        \r\n        dispatch({\r\n            type: 'ADD_TASK',\r\n            payload: { title: `URGENT: ${title.trim()}`, priority: 'High', dueDate: todayStr }\r\n        });\r\n\r\n        if (impact === 'high' && appState.isFocusModeActive && appState.focusModeTaskId) {\r\n            // Suggest snoozing the current task if in focus mode\r\n            dispatch({ type: 'SNOOZE_TASK', payload: { taskId: appState.focusModeTaskId } });\r\n            // In a more complex app, we might set the new urgent task as the focus task\r\n        }\r\n        \r\n        onClose();\r\n        setTitle('');\r\n        setImpact('low');\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-6 border border-accent-warning w-full max-w-lg\" onClick={e => e.stopPropagation()}>\r\n                <h3 className=\"text-2xl font-bold text-accent-warning mb-4\">≡ƒÜ¿ Urgent Task Interruption Protocol</h3>\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label htmlFor=\"urgent-task-title\" className=\"block text-sm font-medium mb-1\">What is the urgent task?</label>\r\n                        <input id=\"urgent-task-title\" type=\"text\" value={title} onChange={e => setTitle(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required autoFocus />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium mb-2\">Impact Assessment:</label>\r\n                        <div className=\"flex gap-4\">\r\n                            <button type=\"button\" onClick={() => setImpact('high')} className={`w-full p-3 rounded border-2 ${impact === 'high' ? 'bg-red-800/50 border-red-500' : 'bg-gray-800 border-gray-700 hover:border-red-600'}`}>\r\n                                <p className=\"font-bold\">High Impact</p>\r\n                                <p className=\"text-xs\">Must be done immediately, dropping everything else.</p>\r\n                            </button>\r\n                            <button type=\"button\" onClick={() => setImpact('low')} className={`w-full p-3 rounded border-2 ${impact === 'low' ? 'bg-yellow-800/50 border-yellow-500' : 'bg-gray-800 border-gray-700 hover:border-yellow-600'}`}>\r\n                                <p className=\"font-bold\">Low Impact</p>\r\n                                <p className=\"text-xs\">Urgent, but can be done after current commitments.</p>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"flex justify-end gap-2 pt-4\">\r\n                        <button type=\"button\" onClick={onClose} className=\"px-4 py-2 bg-gray-600 rounded\">Cancel</button>\r\n                        <button type=\"submit\" className=\"px-4 py-2 bg-accent-blue text-background-dark font-bold rounded\">Integrate Task</button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- SOP GENERATOR MODAL ---\r\nconst SopGeneratorModal = ({\r\n    isOpen,\r\n    onClose,\r\n    templates,\r\n    onSelect,\r\n}) => {\r\n    if (!isOpen) return null;\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center\" onClick={onClose}>\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-6 border border-gray-700 w-full max-w-lg m-4\" onClick={e => e.stopPropagation()}>\r\n                <h3 className=\"text-xl font-bold text-accent-teal mb-4\">Generate Tasks from SOP</h3>\r\n                {templates.length > 0 ? (\r\n                    <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                        {templates.map(sop => (\r\n                            <button key={sop.id} onClick={() => onSelect(sop)} className=\"w-full text-left p-3 bg-gray-800 hover:bg-gray-700 rounded-md\">\r\n                                <p className=\"font-semibold\">{sop.title}</p>\r\n                                <p className=\"text-xs text-gray-400\">{sop.taskTemplate?.length} tasks</p>\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <p className=\"text-center text-gray-400 p-4\">No SOPs with task templates found.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- TRIAGE MODE SUB-COMPONENT ---\r\nconst TriageView = ({\r\n    inboxTasks,\r\n    triageTaskId,\r\n}) => {\r\n    const { dispatch } = useAppState();\r\n    const [isScheduling, setIsScheduling] = useState(false);\r\n    const [scheduleDate, setScheduleDate] = useState(toYMD(addDays(new Date(), 7)));\r\n\r\n    const currentTask = useMemo(() => inboxTasks.find(item => item.id === triageTaskId), [inboxTasks, triageTaskId]);\r\n    \r\n    // FIX: Made deferId optional to allow calling without an argument.\r\n    const findNextTask = (deferId?: string) => {\r\n        const currentIndex = inboxTasks.findIndex(item => item.id === (deferId || triageTaskId));\r\n        return inboxTasks[currentIndex + 1] || null;\r\n    };\r\n\r\n    // FIX: Made deferId optional to allow calling without an argument.\r\n    const advanceToNext = (deferId?: string) => {\r\n        const nextTask = findNextTask(deferId);\r\n        if (nextTask) {\r\n            dispatch({ type: 'SET_TRIAGE_TASK', payload: { taskId: nextTask.id } });\r\n        } else {\r\n            dispatch({ type: 'STOP_TRIAGE_MODE' });\r\n        }\r\n    };\r\n    \r\n    const handleDoToday = () => {\r\n        if (!currentTask) return;\r\n        dispatch({ type: 'UPDATE_TASK', payload: { id: currentTask.id, dueDate: toYMD(new Date()) } });\r\n        advanceToNext();\r\n    };\r\n\r\n    const handleSchedule = () => {\r\n        if (!currentTask) return;\r\n        dispatch({ type: 'UPDATE_TASK', payload: { id: currentTask.id, dueDate: scheduleDate } });\r\n        setIsScheduling(false);\r\n        advanceToNext();\r\n    };\r\n\r\n    const handleDelete = () => {\r\n        if (!currentTask) return;\r\n        dispatch({ type: 'DELETE_TASK', payload: currentTask.id });\r\n        advanceToNext();\r\n    };\r\n    \r\n    const handleDefer = () => {\r\n        if (!currentTask) return;\r\n        advanceToNext(currentTask.id);\r\n    };\r\n\r\n    const handleExit = () => dispatch({ type: 'STOP_TRIAGE_MODE' });\r\n\r\n    if (!currentTask) {\r\n        return (\r\n            <div className=\"text-center p-8 flex flex-col items-center justify-center\">\r\n                <span className=\"text-5xl mb-4\">≡ƒôÑΓ£¿</span>\r\n                <h3 className=\"text-2xl font-bold text-accent-green\">Inbox Zero!</h3>\r\n                <p className=\"text-gray-400 mt-2\">All captured chaos has been processed into structure.</p>\r\n                <button onClick={handleExit} className=\"mt-6 px-6 py-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                    Exit Triage\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    return (\r\n        <div className=\"p-4 flex flex-col items-center justify-center min-h-[450px]\">\r\n            <p className=\"text-sm text-accent-teal mb-2 font-semibold\">PROCESS THIS ITEM:</p>\r\n            <div className=\"w-full max-w-lg p-6 bg-gray-800 rounded-lg border border-gray-700 text-center\">\r\n                <p className=\"text-2xl font-bold text-text-light\">{currentTask.title}</p>\r\n            </div>\r\n            \r\n            {isScheduling ? (\r\n                <div className=\"mt-4 flex items-center gap-2 p-3 bg-gray-800 rounded-md\">\r\n                    <label htmlFor=\"schedule-date\" className=\"sr-only\">Schedule Date</label>\r\n                    <input id=\"schedule-date\" type=\"date\" value={scheduleDate} onChange={e => setScheduleDate(e.target.value)} className=\"p-2 bg-gray-900 border border-gray-600 rounded\" />\r\n                    <button onClick={handleSchedule} className=\"px-4 py-2 bg-accent-green text-background-dark font-bold rounded\">Set Date</button>\r\n                    <button onClick={() => setIsScheduling(false)} className=\"px-4 py-2 bg-gray-600 rounded\">Cancel</button>\r\n                </div>\r\n            ) : (\r\n                <div className=\"mt-6 grid grid-cols-2 md:grid-cols-4 items-center gap-4\">\r\n                    <button onClick={handleDoToday} className=\"px-4 py-3 bg-accent-green text-background-dark font-bold rounded hover:bg-green-500\">Do Today</button>\r\n                    <button onClick={() => setIsScheduling(true)} className=\"px-4 py-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">Schedule</button>\r\n                    <button onClick={handleDefer} className=\"px-4 py-3 bg-gray-600 text-gray-300 rounded hover:bg-gray-500\">Defer</button>\r\n                    <button onClick={handleDelete} className=\"px-4 py-3 bg-red-800 text-red-200 rounded hover:bg-red-700\">Delete</button>\r\n                </div>\r\n            )}\r\n            \r\n            <button onClick={handleExit} className=\"mt-8 text-sm text-gray-500 hover:text-gray-300\">Exit Triage</button>\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\n// --- FOCUS MODE SUB-COMPONENT ---\r\nconst FocusView = ({\r\n    agenda,\r\n    focusTaskId,\r\n    snoozedTaskIds,\r\n    onStartTimer,\r\n}) => {\r\n    const { dispatch } = useAppState();\r\n\r\n    const currentTask = useMemo(() => agenda.find(item => item.id === focusTaskId), [agenda, focusTaskId]);\r\n    \r\n    const findNextTask = () => {\r\n        const currentIndex = agenda.findIndex(item => item.id === focusTaskId);\r\n        for (let i = currentIndex + 1; i < agenda.length; i++) {\r\n            const item = agenda[i];\r\n            if (item.itemType !== 'event' && !item.completedAt && !snoozedTaskIds.includes(item.id)) {\r\n                return item;\r\n            }\r\n        }\r\n        return null; // No more tasks\r\n    };\r\n\r\n    const handleComplete = () => {\r\n        if (!currentTask || currentTask.itemType === 'event') return;\r\n        \r\n        const actionType = currentTask.itemType === 'recurring' ? 'COMPLETE_RECURRING_TASK' : 'UPDATE_TASK';\r\n        const payload = actionType === 'UPDATE_TASK' \r\n            ? { id: currentTask.id, status: 'done' }\r\n            : currentTask.id.replace('recurring-', '');\r\n            \r\n        dispatch({ type: actionType, payload });\r\n\r\n        const nextTask = findNextTask();\r\n        dispatch({ type: 'SET_FOCUS_TASK', payload: { taskId: nextTask ? nextTask.id : null } });\r\n    };\r\n\r\n    const handleSnooze = () => {\r\n        if (!currentTask) return;\r\n        dispatch({ type: 'SNOOZE_TASK', payload: { taskId: currentTask.id } });\r\n        \r\n        const nextTask = findNextTask();\r\n        dispatch({ type: 'SET_FOCUS_TASK', payload: { taskId: nextTask ? nextTask.id : null } });\r\n    };\r\n\r\n    const handleExit = () => dispatch({ type: 'STOP_FOCUS_MODE' });\r\n\r\n    if (!currentTask) {\r\n        return (\r\n            <div className=\"text-center p-8 flex flex-col items-center justify-center\">\r\n                <span className=\"text-5xl mb-4\">≡ƒÄë</span>\r\n                <h3 className=\"text-2xl font-bold text-accent-green\">All Tasks for Today Complete!</h3>\r\n                <p className=\"text-gray-400 mt-2\">Excellent work. System is stable.</p>\r\n                <button onClick={handleExit} className=\"mt-6 px-6 py-3 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                    Exit Focus Mode\r\n                </button>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n    const priorityColors = { 'High': 'border-red-500', 'Medium': 'border-yellow-500', 'Low': 'border-gray-600' };\r\n    const task = currentTask; // We know it's a task in focus mode\r\n\r\n    return (\r\n        <div className=\"p-4 flex flex-col items-center justify-center min-h-[450px]\">\r\n            <p className=\"text-sm text-accent-teal mb-2 font-semibold\">THE NEXT OBJECTIVE IS:</p>\r\n            <div className={`w-full max-w-lg p-6 bg-gray-800 rounded-lg border-l-8 ${priorityColors[task.priority]}`}>\r\n                <p className=\"text-2xl font-bold text-text-light\">{task.title}</p>\r\n                <p className=\"text-sm text-gray-400 mt-2\">Priority: {task.priority}</p>\r\n            </div>\r\n            <div className=\"mt-6 flex flex-col sm:flex-row items-center gap-4\">\r\n                <button onClick={handleComplete} className=\"px-10 py-4 bg-accent-green text-background-dark font-bold rounded text-lg hover:bg-green-500 w-full sm:w-auto\">\r\n                    Γ£ô Complete\r\n                </button>\r\n                <button onClick={handleSnooze} className=\"px-4 py-2 bg-gray-600 text-gray-300 rounded hover:bg-gray-500\">Snooze (15m)</button>\r\n                <button onClick={() => onStartTimer(currentTask ? currentTask.id : null)} className=\"px-4 py-2 bg-accent-blue text-background-dark rounded hover:bg-blue-400\">Start 25-min Timer</button>\r\n            </div>\r\n            <button onClick={handleExit} className=\"mt-8 text-sm text-gray-500 hover:text-gray-300\">Exit Focus Mode</button>\r\n        </div>\r\n    );\r\n};\r\n\r\n// --- TASK ITEM SUB-COMPONENT ---\r\n// FIX: Explicitly typed component with React.FC and a props interface to handle the `key` prop correctly.\r\ninterface TaskItemProps {\r\n    task: any;\r\n    onUpdate: (id: string, updates: any) => void;\r\n    onDelete: (id: string) => void;\r\n    onEdit: (task: any) => void;\r\n    projects: any[];\r\n}\r\nconst TaskItem: React.FC<TaskItemProps> = ({\r\n    task,\r\n    onUpdate,\r\n    onDelete,\r\n    onEdit,\r\n    projects,\r\n}) => {\r\n    const isCompleted = task.status === 'done';\r\n    const priorityColors = {\r\n        'High': 'border-red-500',\r\n        'Medium': 'border-yellow-500',\r\n        'Low': 'border-gray-600',\r\n    };\r\n    const project = useMemo(() => \r\n        projects.find(p => p.id === task.projectId), \r\n        [projects, task.projectId]\r\n    );\r\n\r\n    return (\r\n        <div className={`p-3 bg-gray-800 rounded-md border-l-4 flex items-center gap-3 transition-opacity ${priorityColors[task.priority]} ${isCompleted ? 'opacity-50' : ''}`}>\r\n            <input\r\n                type=\"checkbox\"\r\n                checked={isCompleted}\r\n                onChange={() => onUpdate(task.id, { status: isCompleted ? 'todo' : 'done' })}\r\n                className=\"h-5 w-5 rounded bg-gray-700 border-gray-600 text-accent-blue focus:ring-accent-blue flex-shrink-0\"\r\n                aria-label={`Mark task as ${isCompleted ? 'not done' : 'done'}`}\r\n                // Recurring tasks cannot be \"un-completed\" from this view. Once done, they are recalculated.\r\n                disabled={isCompleted && task.itemType === 'recurring'}\r\n            />\r\n            <div className=\"flex-grow\">\r\n                <p className={`${isCompleted ? 'line-through text-gray-500' : ''}`}>{task.title}</p>\r\n                <div className=\"text-xs text-gray-400 flex items-center gap-2 flex-wrap mt-1\">\r\n                    {task.dueDate && <span>Due: {task.dueDate}</span>}\r\n                    {project && <span className=\"px-1.5 py-0.5 bg-purple-900/50 text-purple-300 rounded-full text-xs\">≡ƒÄ» {project.title}</span>}\r\n                    {task.itemType === 'recurring' && <span className=\"px-1.5 py-0.5 bg-blue-900/50 text-blue-300 rounded-full text-xs\">Recurring</span>}\r\n                </div>\r\n            </div>\r\n            {!isCompleted && (\r\n                 <div className=\"flex-shrink-0 flex gap-1\">\r\n                    {task.itemType !== 'recurring' && <button onClick={() => onEdit(task)} className=\"p-2 text-gray-400 hover:text-white\" aria-label=\"Edit task\">Γ£Å∩╕Å</button>}\r\n                    <button onClick={() => onDelete(task.id)} className=\"p-2 text-gray-400 hover:text-red-500\" aria-label=\"Delete task\">≡ƒùæ∩╕Å</button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\n\r\nconst TaskMatrixModule = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { tasks, recurringTasks, calendarEvents, isFocusModeActive, focusModeTaskId, snoozedTaskIds, userSops, modifiedSops, isTriageModeActive, triageTaskId, projects } = appState;\r\n    const [view, setView] = useState('today');\r\n    const [editingTask, setEditingTask] = useState(null);\r\n    const [isSopGeneratorOpen, setSopGeneratorOpen] = useState(false);\r\n    const [isUrgentModalOpen, setIsUrgentModalOpen] = useState(false);\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [dueDate, setDueDate] = useState('');\r\n    const [priority, setPriority] = useState('Medium');\r\n    const [projectId, setProjectId] = useState('');\r\n    \r\n    const detailsRef = React.useRef(null);\r\n\r\n    useEffect(() => {\r\n        if (editingTask) {\r\n            setTitle(editingTask.title);\r\n            setDueDate(editingTask.dueDate || '');\r\n            setPriority(editingTask.priority);\r\n            setProjectId(editingTask.projectId || '');\r\n            if (detailsRef.current) detailsRef.current.open = true;\r\n        } else {\r\n            setTitle(''); setDueDate(''); setPriority('Medium'); setProjectId('');\r\n        }\r\n    }, [editingTask]);\r\n\r\n    const todayStr = useMemo(() => toYMD(new Date()), []);\r\n    \r\n    const fullAgenda = useMemo(() => {\r\n        const today = new Date(); today.setHours(0, 0, 0, 0);\r\n        const todaysCalEvents = calendarEvents.filter(event => toYMD(new Date(event.date)) === todayStr).map(e => ({ ...e, itemType: 'event' }));\r\n        const dueRecurring = recurringTasks.filter(task => {\r\n                const lastEventDate = task.lastCompletedDate ? new Date(task.lastCompletedDate) : new Date(task.startDate);\r\n                const dueDate = addDays(lastEventDate, task.frequencyDays);\r\n                return Math.round((dueDate.getTime() - today.getTime()) / (1000 * 3600 * 24)) <= 0;\r\n            }).map(task => ({\r\n                ...task, id: `recurring-${task.id}`, status: 'todo', dueDate: todayStr, priority: 'Medium', createdAt: task.startDate, completedAt: null, itemType: 'recurring',\r\n            }));\r\n        const todayT = tasks.filter(t => t.status === 'todo' && t.dueDate === todayStr).map(t => ({ ...t, itemType: 'task' }));\r\n        \r\n        const agenda = [...todaysCalEvents, ...dueRecurring, ...todayT];\r\n        agenda.sort((a, b) => {\r\n            const timeA = a.itemType === 'event' ? new Date(a.date).getTime() : Infinity;\r\n            const timeB = b.itemType === 'event' ? new Date(b.date).getTime() : Infinity;\r\n            if (timeA !== timeB) return timeA - timeB;\r\n            const priorityOrder = { 'High': 1, 'Medium': 2, 'Low': 3 };\r\n            const priorityA = 'priority' in a ? priorityOrder[a.priority] : 4;\r\n            const priorityB = 'priority' in b ? priorityOrder[b.priority] : 4;\r\n            return priorityA - priorityB;\r\n        });\r\n        return agenda;\r\n    }, [calendarEvents, recurringTasks, tasks, todayStr]);\r\n\r\n    const { upcomingTasks, inboxTasks, completedTasks } = useMemo(() => {\r\n        return {\r\n            upcomingTasks: tasks.filter(t => t.status === 'todo' && t.dueDate && t.dueDate > todayStr).sort((a,b) => new Date(a.dueDate).getTime() - new Date(b.dueDate).getTime()),\r\n            inboxTasks: tasks.filter(t => t.status === 'todo' && !t.dueDate),\r\n            completedTasks: tasks.filter(t => t.status === 'done').sort((a,b) => new Date(b.completedAt).getTime() - new Date(a.completedAt).getTime()),\r\n        };\r\n    }, [tasks, todayStr]);\r\n\r\n    // SOP Task Generator Logic\r\n    const allSops = useMemo(() => \r\n        SOP_DATA.map(sop => modifiedSops[sop.id] || sop).concat(userSops),\r\n        [modifiedSops, userSops]\r\n    );\r\n    const sopTemplates = useMemo(() => \r\n        allSops.filter(sop => sop.taskTemplate && sop.taskTemplate.length > 0),\r\n        [allSops]\r\n    );\r\n    const handleGenerateFromSop = (sop) => {\r\n        sop.taskTemplate?.forEach(task => {\r\n            dispatch({\r\n                type: 'ADD_TASK',\r\n                payload: { title: task.title, priority: task.priority, dueDate: null }\r\n            });\r\n        });\r\n        setSopGeneratorOpen(false);\r\n        setView('inbox');\r\n    };\r\n\r\n    const handleFormSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (!title.trim()) return;\r\n        const taskPayload = {\r\n            title: title.trim(),\r\n            dueDate: dueDate || null,\r\n            priority,\r\n            projectId: projectId || undefined,\r\n        };\r\n\r\n        if (editingTask) {\r\n            dispatch({ type: 'UPDATE_TASK', payload: { id: editingTask.id, ...taskPayload } });\r\n            setEditingTask(null);\r\n        } else {\r\n            dispatch({ type: 'ADD_TASK', payload: taskPayload });\r\n        }\r\n        setTitle(''); setDueDate(''); setPriority('Medium'); setProjectId('');\r\n        if (detailsRef.current && !editingTask) detailsRef.current.open = false;\r\n    };\r\n    \r\n    const handleUpdateTask = (id, updates) => {\r\n        if (id.startsWith('recurring-')) {\r\n            dispatch({ type: 'COMPLETE_RECURRING_TASK', payload: id.replace('recurring-', '') });\r\n        } else {\r\n            dispatch({ type: 'UPDATE_TASK', payload: { id, ...updates } });\r\n        }\r\n    };\r\n\r\n    const handleDeleteTask = (id) => {\r\n        if (window.confirm(\"Are you sure you want to delete this task?\")) {\r\n            if (id.startsWith('recurring-')) {\r\n                dispatch({ type: 'REMOVE_RECURRING_TASK', payload: id.replace('recurring-', '') });\r\n            } else {\r\n                dispatch({ type: 'DELETE_TASK', payload: id });\r\n            }\r\n        }\r\n    };\r\n    \r\n    const handleEditClick = (task) => setEditingTask(task);\r\n    const handleCancelEdit = () => {\r\n        setEditingTask(null);\r\n        if (detailsRef.current) detailsRef.current.open = false;\r\n    };\r\n    \r\n    const handleStartFocus = () => {\r\n        const firstTask = fullAgenda.find(item => item.itemType !== 'event' && !item.completedAt);\r\n        dispatch({ type: 'START_FOCUS_MODE', payload: { firstTaskId: firstTask ? firstTask.id : null } });\r\n    };\r\n\r\n    const handleStartTriage = () => {\r\n        const firstTask = inboxTasks[0];\r\n        dispatch({ type: 'START_TRIAGE_MODE', payload: { firstTaskId: firstTask ? firstTask.id : null } });\r\n    };\r\n    \r\n    const handleStartTimer = (taskId) => {\r\n        if (!taskId) return;\r\n        dispatch({ type: 'POMODORO_SET_TASK_ID', payload: { taskId } });\r\n        dispatch({ type: 'POMODORO_SET_MODE', payload: 'work' });\r\n        dispatch({ type: 'POMODORO_TOGGLE' });\r\n        document.getElementById('module-pomodoro-timer-module')?.scrollIntoView({ behavior: 'smooth' });\r\n    };\r\n\r\n    const filteredList = useMemo(() => {\r\n        switch (view) {\r\n            case 'inbox': return inboxTasks.map(t => ({...t, itemType: 'task'}));\r\n            case 'today': return fullAgenda;\r\n            case 'upcoming': return upcomingTasks.map(t => ({...t, itemType: 'task'}));\r\n            case 'completed': return completedTasks.map(t => ({...t, itemType: 'task'}));\r\n            default: return [];\r\n        }\r\n    }, [view, fullAgenda, inboxTasks, upcomingTasks, completedTasks]);\r\n    \r\n    const TabButton = ({ label, targetView, count }) => (\r\n        <button onClick={() => setView(targetView)} className={`px-3 py-2 text-sm font-semibold rounded-t-md transition-colors w-full ${view === targetView ? 'bg-card-dark border-b-2 border-accent-blue text-accent-blue' : 'bg-gray-800 text-gray-400 hover:bg-gray-700'}`}>\r\n            {label} ({count})\r\n        </button>\r\n    );\r\n    \r\n    const isFocusPossible = fullAgenda.some(item => item.itemType !== 'event' && !item.completedAt);\r\n    const isTriagePossible = inboxTasks.length > 0;\r\n\r\n    if (isFocusModeActive) {\r\n        return (\r\n            <ContentCard title=\"ΓÜí∩╕Å Task Matrix: Focus Mode\">\r\n                <FocusView agenda={fullAgenda} focusTaskId={focusModeTaskId} snoozedTaskIds={snoozedTaskIds} onStartTimer={handleStartTimer} />\r\n            </ContentCard>\r\n        );\r\n    }\r\n\r\n    if (isTriageModeActive) {\r\n        return (\r\n            <ContentCard title=\"ΓÜí∩╕Å Task Matrix: Inbox Triage\">\r\n                <TriageView inboxTasks={inboxTasks} triageTaskId={triageTaskId} />\r\n            </ContentCard>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <ContentCard title=\"ΓÜí∩╕Å Task Matrix\">\r\n             <UrgentTaskModal isOpen={isUrgentModalOpen} onClose={() => setIsUrgentModalOpen(false)} />\r\n             <div className=\"flex flex-col h-full min-h-[500px]\">\r\n                <div className=\"flex border-b border-gray-700\">\r\n                    <TabButton label=\"Inbox\" targetView=\"inbox\" count={inboxTasks.length} />\r\n                    <TabButton label=\"Today\" targetView=\"today\" count={fullAgenda.length} />\r\n                    <TabButton label=\"Upcoming\" targetView=\"upcoming\" count={upcomingTasks.length} />\r\n                    <TabButton label=\"Completed\" targetView=\"completed\" count={completedTasks.length} />\r\n                </div>\r\n\r\n                <div className=\"flex-grow pt-4 overflow-y-auto max-h-[28rem] pr-2 space-y-4\">\r\n                     <div className=\"space-y-2\">\r\n                        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-2\">\r\n                            {view === 'today' && (\r\n                                <button onClick={handleStartFocus} disabled={!isFocusPossible} className=\"w-full p-2 bg-accent-teal text-background-dark font-bold rounded hover:bg-teal-400 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed text-sm\">\r\n                                Γ£¿ Start Focus Session\r\n                                </button>\r\n                            )}\r\n                            {view === 'inbox' && (\r\n                                <button onClick={handleStartTriage} disabled={!isTriagePossible} className=\"w-full p-2 bg-yellow-500 text-background-dark font-bold rounded hover:bg-yellow-400 transition-colors disabled:bg-gray-600 disabled:cursor-not-allowed text-sm\">\r\n                                ΓÜí∩╕Å Start Triage Session\r\n                                </button>\r\n                            )}\r\n                            {view === 'inbox' && (\r\n                                <button onClick={() => setSopGeneratorOpen(true)} className=\"w-full p-2 bg-accent-purple text-white font-bold rounded hover:bg-purple-500 transition-colors text-sm\">\r\n                                    Generate from SOP\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"grid grid-cols-2 gap-2\">\r\n                             <button onClick={() => dispatch({ type: 'SET_CONTEXT_CAPTURE_MODAL_OPEN', payload: true })} className=\"w-full p-2 bg-yellow-600 text-background-dark font-bold rounded hover:bg-yellow-500 transition-colors text-sm\">\r\n                               ΓÅ╕∩╕Å Interrupt\r\n                            </button>\r\n                             <button onClick={() => setIsUrgentModalOpen(true)} className=\"w-full p-2 bg-accent-warning text-background-dark font-bold rounded hover:bg-yellow-400 transition-colors text-sm\">\r\n                               ≡ƒÜ¿ Urgent Task\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                    {view === 'today' && (\r\n                        <DailyTimeline events={fullAgenda.filter(item => item.itemType === 'event')} />\r\n                    )}\r\n                    <div className=\"space-y-2\">\r\n                        {filteredList.length > 0 ? (\r\n                            filteredList.map(item => {\r\n                                if (item.itemType === 'event') {\r\n                                    return (\r\n                                        <div key={item.id} className=\"p-2 bg-gray-900/50 rounded-md flex items-center text-sm\">\r\n                                            <span className=\"mr-3\">≡ƒùô∩╕Å</span>\r\n                                            <span className=\"font-bold text-accent-blue w-20 flex-shrink-0\">{new Date(item.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}</span>\r\n                                            <span>{item.title}</span>\r\n                                        </div>\r\n                                    );\r\n                                }\r\n                                return <TaskItem key={item.id} task={item} onUpdate={handleUpdateTask} onDelete={handleDeleteTask} onEdit={handleEditClick} projects={projects} />;\r\n                            })\r\n                        ) : (\r\n                            <p className=\"text-center text-gray-500 pt-8\">No items in this view.</p>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                <details ref={detailsRef} className=\"mt-auto pt-4 border-t border-gray-700\">\r\n                    <summary className=\"cursor-pointer font-semibold text-accent-green\">{editingTask ? `Editing Task: ${editingTask.title}` : 'Add New Task'}</summary>\r\n                    <form onSubmit={handleFormSubmit} className=\"mt-2 space-y-2\">\r\n                        <input type=\"text\" placeholder=\"New task title...\" value={title} onChange={e => setTitle(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\" required />\r\n                        <div className=\"flex gap-2\">\r\n                            <input type=\"date\" value={dueDate} onChange={e => setDueDate(e.target.value)} className=\"w-1/2 p-2 bg-gray-800 border border-gray-600 rounded\" />\r\n                            <select value={priority} onChange={e => setPriority(e.target.value)} className=\"w-1/2 p-2 bg-gray-800 border border-gray-600 rounded\">\r\n                                <option>High</option><option>Medium</option><option>Low</option>\r\n                            </select>\r\n                        </div>\r\n                        <select value={projectId} onChange={e => setProjectId(e.target.value)} className=\"w-full p-2 bg-gray-800 border border-gray-600 rounded\">\r\n                            <option value=\"\">No Project</option>\r\n                            {projects.map(p => (\r\n                                <option key={p.id} value={p.id}>{p.title}</option>\r\n                            ))}\r\n                        </select>\r\n                        <div className=\"flex justify-end gap-2\">\r\n                            {editingTask && <button type=\"button\" onClick={handleCancelEdit} className=\"px-4 py-2 bg-gray-600 rounded hover:bg-gray-500\">Cancel</button>}\r\n                            <button type=\"submit\" className=\"px-4 py-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400\">\r\n                                {editingTask ? 'Update Task' : 'Add Task'}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                </details>\r\n                <SopGeneratorModal isOpen={isSopGeneratorOpen} onClose={() => setSopGeneratorOpen(false)} templates={sopTemplates} onSelect={handleGenerateFromSop} />\r\n            </div>\r\n        </ContentCard>\r\n    );\r\n};\r\n\r\nexport default TaskMatrixModule;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\WilliamCoreDashboardModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\daily-command\\AIBriefing.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":62,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":62,"endColumn":26},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":83,"column":31,"nodeType":"MemberExpression","messageId":"unexpected","endLine":83,"endColumn":44},{"ruleId":"react-hooks/exhaustive-deps","message":"Definition for rule 'react-hooks/exhaustive-deps' was not found.","line":89,"column":5,"endLine":89,"endColumn":60,"severity":2,"nodeType":null},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":115,"column":64,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click &apos;Refresh' to generate one.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click &lsquo;Refresh' to generate one.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click &#39;Refresh' to generate one.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click &rsquo;Refresh' to generate one.\r\n                    "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":115,"column":72,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click 'Refresh&apos; to generate one.\r\n                    "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click 'Refresh&lsquo; to generate one.\r\n                    "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click 'Refresh&#39; to generate one.\r\n                    "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[6156,6269],"text":"\r\n                        No briefing generated for today. Click 'Refresh&rsquo; to generate one.\r\n                    "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport useSafeAI from '../../../../hooks/useSafeAI';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { useCurrentMode } from '../../../../hooks/useCurrentMode.js';\r\nimport { SecureMarkdown } from '../../../../utils/secureMarkdownRenderer.js';\r\nimport { useAIPromptSafety } from '../../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../../AIConsentModal.js';\r\nimport PIIWarningModal from '../../../PIIWarningModal.js';\r\n\r\nconst BRIEFING_CACHE_KEY = 'wonky-sprout-daily-briefing';\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\n\r\nconst AIBriefing = () => {\r\n    const { appState } = useAppState();\r\n    const { calendarEvents, kidsWillowLocation, kidsSebastianLocation } = appState;\r\n    const currentMode = useCurrentMode();\r\n\r\n    const [briefing, setBriefing] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n\r\n    const generatePrompt = () => {\r\n        const today = new Date();\r\n        const todaysEvents = calendarEvents\r\n            .filter(event => new Date(event.date).toDateString() === today.toDateString())\r\n            .map(event => `- ${event.title} at ${new Date(event.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`);\r\n\r\n        return `\r\n            Generate a daily briefing for today, ${today.toLocaleDateString('en-US', { weekday: 'long', month: 'long', day: 'numeric' })}.\r\n            System Context:\r\n            - Current Operating Mode: ${currentMode}\r\n            - Today's Calendar Events: ${todaysEvents.length > 0 ? todaysEvents.join('\\n') : 'None'}\r\n            - Willow's Location: ${kidsWillowLocation || 'Not set'}\r\n            - Sebastian's Location: ${kidsSebastianLocation || 'Not set'}\r\n            Based on this context, create a briefing with a 1-sentence summary of the day's operational focus, a bulleted list of today's priorities from the calendar, a summary of kid logistics, and a brief, general weather outlook.\r\n        `;\r\n    };\r\n\r\n    const handleGenerate = async () => {\r\n        setLoading(true);\r\n        setError('');\r\n        \r\n        const prompt = generatePrompt();\r\n        const systemInstruction = \"You are the 'Wonky Sprout OS' briefing system. Your purpose is to provide a concise, structured, and actionable daily briefing. Your tone is factual and system-oriented. Use clear markdown formatting. Do not use motivational language.\";\r\n\r\n        try {\r\n            const { generate } = useSafeAI();\r\n            const result = await generate(prompt, { model: 'gemini-2.5-flash', timeoutMs: 20000, config: { systemInstruction, tools: [{ googleSearch: {} }] }, skipPromptSafety: true });\r\n            const resultText = result?.text || (result?.json ? JSON.stringify(result.json) : '');\r\n            setBriefing(resultText);\r\n\r\n            const todayStr = toYMD(new Date());\r\n            const cache = { date: todayStr, content: resultText };\r\n            localStorage.setItem(BRIEFING_CACHE_KEY, JSON.stringify(cache));\r\n        } catch (e) {\r\n            setError(`Error generating briefing: ${e.message || 'Failed to communicate with the model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const triggerAnalysis = () => {\r\n        const prompt = generatePrompt();\r\n        checkAndExecute(prompt, handleGenerate);\r\n    };\r\n\r\n    useEffect(() => {\r\n        const loadOrGenerateBriefing = () => {\r\n            const todayStr = toYMD(new Date());\r\n            const cachedData = localStorage.getItem(BRIEFING_CACHE_KEY);\r\n            if (cachedData) {\r\n                try {\r\n                    const parsedCache = JSON.parse(cachedData);\r\n                    if (parsedCache.date === todayStr && parsedCache.content) {\r\n                        setBriefing(parsedCache.content);\r\n                        return; // Valid cache found, do nothing more.\r\n                    }\r\n                } catch (e) { console.error(\"Failed to parse briefing cache\", e); }\r\n            }\r\n            // If we reach here, no valid cache was found. Generate a new one.\r\n            triggerAnalysis();\r\n        };\r\n        loadOrGenerateBriefing();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, []); \r\n\r\n    return (\r\n        <details className=\"p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <summary className=\"cursor-pointer font-bold text-accent-teal flex justify-between items-center\">\r\n                ≡ƒôä AI Briefing\r\n                <button\r\n                    onClick={(e) => { e.preventDefault(); triggerAnalysis(); }}\r\n                    disabled={loading}\r\n                    className=\"px-3 py-1 text-xs bg-accent-blue text-background-dark font-semibold rounded-md hover:bg-blue-400 disabled:bg-gray-600\"\r\n                >\r\n                    {loading ? '...' : 'Γ£¿ Refresh'}\r\n                </button>\r\n            </summary>\r\n             <div className=\"mt-2 pt-2 border-t border-gray-700\">\r\n                {loading && !briefing ? (\r\n                    <div className=\"flex items-center justify-center p-4\"><div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-accent-blue\"></div></div>\r\n                ) : error ? (\r\n                    <div className=\"text-red-400\">{error}</div>\r\n                ) : briefing ? (\r\n                    <div className=\"prose prose-invert prose-sm max-w-none\"><SecureMarkdown content={briefing} /></div>\r\n                ) : (\r\n                    <div className=\"text-center p-2 text-sm text-gray-500\">\r\n                        No briefing generated for today. Click 'Refresh' to generate one.\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </details>\r\n    );\r\n};\r\n\r\nexport default AIBriefing;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\daily-command\\CriticalTasks.tsx","messages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":89,"column":13,"nodeType":"MemberExpression","messageId":"unexpected","endLine":89,"endColumn":26},{"ruleId":"react/prop-types","severity":2,"message":"'task' is missing in props validation","line":103,"column":25,"nodeType":"Property","messageId":"missingPropType","endLine":103,"endColumn":29},{"ruleId":"react/prop-types","severity":2,"message":"'index' is missing in props validation","line":103,"column":31,"nodeType":"Property","messageId":"missingPropType","endLine":103,"endColumn":36},{"ruleId":"react/prop-types","severity":2,"message":"'task.title' is missing in props validation","line":114,"column":56,"nodeType":"Identifier","messageId":"missingPropType","endLine":114,"endColumn":61},{"ruleId":"react/prop-types","severity":2,"message":"'task.title' is missing in props validation","line":116,"column":51,"nodeType":"Identifier","messageId":"missingPropType","endLine":116,"endColumn":56}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useMemo } from 'react';\r\nimport { Type } from '@google/genai';\r\nimport useSafeAI from '../../../../hooks/useSafeAI';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\nimport { useAIPromptSafety } from '../../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../../AIConsentModal.js';\r\nimport PIIWarningModal from '../../../PIIWarningModal.js';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\n\r\nconst CriticalTasks = () => {\r\n    const { appState, dispatch } = useAppState();\r\n    const { statusMood, statusEnergy, calendarEvents, tasks } = appState;\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n\r\n    const todayStr = useMemo(() => toYMD(new Date()), []);\r\n\r\n    const criticalTasks = useMemo(() => {\r\n        return tasks\r\n            .filter(task => task.status === 'todo' && task.dueDate === todayStr && task.priority === 'High')\r\n            .slice(0, 3);\r\n    }, [tasks, todayStr]);\r\n    \r\n    const generatePrompt = () => {\r\n        const todaysEvents = calendarEvents\r\n            .filter(event => toYMD(new Date(event.date)) === todayStr)\r\n            .map(event => event.title);\r\n            \r\n        return `\r\n            Current status:\r\n            - Mood: ${statusMood || 'Not set'}\r\n            - Energy: ${statusEnergy || 'Not set'}\r\n            - Today's Calendar Events: ${todaysEvents.length > 0 ? todaysEvents.join(', ') : 'None'}\r\n\r\n            Based on this, generate the top 3 critical, actionable, and achievable tasks for today.\r\n        `;\r\n    };\r\n\r\n    const { generate } = useSafeAI();\r\n\r\n    const handleGenerate = async (safePrompt?: string) => {\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        const prompt = generatePrompt();\r\n\r\n        try {\r\n            const result = await generate(safePrompt ?? prompt, {\r\n                model: 'gemini-2.5-flash',\r\n                responseMimeType: 'application/json',\r\n                responseSchema: {\r\n                    type: Type.OBJECT,\r\n                    properties: {\r\n                        tasks: { type: Type.ARRAY, items: { type: Type.STRING } }\r\n                    }\r\n                },\r\n                timeoutMs: 20000,\r\n                skipPromptSafety: true\r\n            });\r\n\r\n            const jsonResponse = result?.json ?? (result?.text ? JSON.parse(result.text) : null);\r\n            if (jsonResponse.tasks && Array.isArray(jsonResponse.tasks)) {\r\n                const tasksToDelete = tasks\r\n                    .filter(task => task.dueDate === todayStr && task.priority === 'High' && task.status === 'todo')\r\n                    .map(task => task.id);\r\n                \r\n                tasksToDelete.forEach(id => {\r\n                    dispatch({ type: 'DELETE_TASK', payload: id });\r\n                });\r\n\r\n                jsonResponse.tasks.slice(0, 3).forEach((taskTitle) => {\r\n                    dispatch({\r\n                        type: 'ADD_TASK',\r\n                        payload: { title: taskTitle, priority: 'High', dueDate: todayStr }\r\n                    });\r\n                });\r\n            } else {\r\n                 throw new Error(\"Invalid response format from AI.\");\r\n            }\r\n\r\n        } catch (e) {\r\n            setError(`Error generating tasks: ${e.message || 'Failed to communicate with the model.'}`);\r\n            console.error(e);\r\n        }\r\n        setLoading(false);\r\n    };\r\n\r\n    const triggerGeneration = () => {\r\n        const prompt = generatePrompt();\r\n        checkAndExecute(prompt, handleGenerate);\r\n    };\r\n\r\n    const handleToggleComplete = (task) => {\r\n        dispatch({ type: 'UPDATE_TASK', payload: { id: task.id, status: 'done' } });\r\n    };\r\n\r\n    const TaskSlot = ({ task, index }) => {\r\n        if (!task) {\r\n            return <div className=\"p-3 text-gray-500 italic\">Objective {index + 1} not set...</div>;\r\n        }\r\n        return (\r\n            <div className=\"flex items-center gap-3 p-2 bg-gray-900/50 rounded-md\">\r\n                <input\r\n                    type=\"checkbox\"\r\n                    checked={false}\r\n                    onChange={() => handleToggleComplete(task)}\r\n                    className=\"h-5 w-5 rounded bg-gray-700 border-gray-600 text-accent-blue focus:ring-accent-blue\"\r\n                    aria-label={`Complete task: ${task.title}`}\r\n                />\r\n                <span className=\"flex-grow\">{task.title}</span>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <details className=\"p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <summary className=\"cursor-pointer font-bold text-accent-teal flex justify-between items-center\">\r\n                <span>≡ƒÄ» Critical Tasks</span>\r\n            </summary>\r\n             <div className=\"mt-2 pt-2 border-t border-gray-700 space-y-2\">\r\n                <div className=\"flex items-center justify-between\">\r\n                    <p className=\"text-xs text-gray-400 italic\">Showing High-priority tasks for today from the Task Matrix.</p>\r\n                    <button\r\n                        onClick={(e) => { e.preventDefault(); triggerGeneration(); }}\r\n                        disabled={loading}\r\n                        aria-label=\"Ask AI to generate critical tasks\"\r\n                        className=\"px-3 py-1 text-xs bg-accent-blue text-background-dark font-semibold rounded-md hover:bg-blue-400 disabled:bg-gray-600\"\r\n                    >\r\n                        {loading ? '...' : 'Γ£¿ Ask AI for Tasks'}\r\n                    </button>\r\n                </div>\r\n                {error && <div className=\"text-red-400 text-xs p-2 bg-red-900/30 rounded-md\">{error}</div>}\r\n                {/* moved the explanatory text above */}\r\n                <TaskSlot task={criticalTasks[0]} index={0} />\r\n                <TaskSlot task={criticalTasks[1]} index={1} />\r\n                <TaskSlot task={criticalTasks[2]} index={2} />\r\n                <button \r\n                    onClick={() => document.getElementById('module-task-matrix-module')?.scrollIntoView({ behavior: 'smooth' })}\r\n                    className=\"text-xs text-accent-blue hover:underline mt-2 w-full text-right\"\r\n                >\r\n                    Manage all tasks in Matrix &rarr;\r\n                </button>\r\n            </div>\r\n        </details>\r\n    );\r\n};\r\n\r\nexport default CriticalTasks;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\daily-command\\DailyEssentials.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\daily-command\\DailyHabits.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\daily-command\\TodaysAgenda.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":47,"column":26,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1965,2023],"text":"\r\n                ≡ƒùô∩╕Å Today&apos;s Agenda Summary\r\n            "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1965,2023],"text":"\r\n                ≡ƒùô∩╕Å Today&lsquo;s Agenda Summary\r\n            "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1965,2023],"text":"\r\n                ≡ƒùô∩╕Å Today&#39;s Agenda Summary\r\n            "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1965,2023],"text":"\r\n                ≡ƒùô∩╕Å Today&rsquo;s Agenda Summary\r\n            "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useMemo } from 'react';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\nconst addDays = (date, days) => {\r\n    const result = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n};\r\n\r\n\r\nconst TodaysAgenda = () => {\r\n    const { appState } = useAppState();\r\n    const { calendarEvents, recurringTasks, tasks } = appState;\r\n\r\n    const agendaCounts = useMemo(() => {\r\n        const today = new Date();\r\n        const todayStr = toYMD(today);\r\n        today.setHours(0, 0, 0, 0);\r\n\r\n        const eventCount = calendarEvents.filter(event => toYMD(new Date(event.date)) === todayStr).length;\r\n\r\n        const recurringTaskCount = recurringTasks.filter(task => {\r\n            const lastEventDate = task.lastCompletedDate ? new Date(task.lastCompletedDate) : new Date(task.startDate);\r\n            const dueDate = addDays(lastEventDate, task.frequencyDays);\r\n            const daysUntilDue = Math.round((dueDate.getTime() - today.getTime()) / (1000 * 3600 * 24));\r\n            return daysUntilDue <= 0;\r\n        }).length;\r\n            \r\n        const matrixTaskCount = tasks.filter(task => task.status === 'todo' && task.dueDate === todayStr).length;\r\n        \r\n        return { eventCount, taskCount: recurringTaskCount + matrixTaskCount };\r\n    }, [calendarEvents, recurringTasks, tasks]);\r\n\r\n    const handleViewAgenda = () => {\r\n        const taskMatrix = document.getElementById('module-task-matrix-module');\r\n        if (taskMatrix) {\r\n            taskMatrix.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n            // We can also try to force the 'today' tab to be active if needed,\r\n            // but for now, scrolling is the main goal.\r\n        }\r\n    };\r\n\r\n    return (\r\n        <details className=\"p-3 bg-gray-800 rounded-md border border-gray-700\">\r\n            <summary className=\"cursor-pointer font-bold text-accent-teal\">\r\n                ≡ƒùô∩╕Å Today's Agenda Summary\r\n            </summary>\r\n             <div className=\"mt-2 pt-2 border-t border-gray-700 space-y-2\">\r\n                <p className=\"text-center text-lg\">\r\n                    You have <span className=\"font-bold text-accent-blue\">{agendaCounts.taskCount} tasks</span> and <span className=\"font-bold text-accent-green\">{agendaCounts.eventCount} events</span> today.\r\n                </p>\r\n                <button \r\n                    onClick={handleViewAgenda}\r\n                    className=\"w-full mt-2 p-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 transition-colors\"\r\n                >\r\n                    View Full Agenda in Task Matrix\r\n                </button>\r\n            </div>\r\n        </details>\r\n    );\r\n};\r\n\r\nexport default TodaysAgenda;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\habit-tracker\\HabitDetailModal.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'habit' is missing in props validation","line":17,"column":29,"nodeType":"Property","messageId":"missingPropType","endLine":17,"endColumn":34},{"ruleId":"react/prop-types","severity":2,"message":"'log' is missing in props validation","line":17,"column":36,"nodeType":"Property","messageId":"missingPropType","endLine":17,"endColumn":39},{"ruleId":"react/prop-types","severity":2,"message":"'onClose' is missing in props validation","line":17,"column":41,"nodeType":"Property","messageId":"missingPropType","endLine":17,"endColumn":48},{"ruleId":"react/prop-types","severity":2,"message":"'habit.id' is missing in props validation","line":46,"column":55,"nodeType":"Identifier","messageId":"missingPropType","endLine":46,"endColumn":57},{"ruleId":"react/prop-types","severity":2,"message":"'habit.id' is missing in props validation","line":51,"column":15,"nodeType":"Identifier","messageId":"missingPropType","endLine":51,"endColumn":17},{"ruleId":"react/prop-types","severity":2,"message":"'habit.id' is missing in props validation","line":59,"column":86,"nodeType":"Identifier","messageId":"missingPropType","endLine":59,"endColumn":88},{"ruleId":"react/prop-types","severity":2,"message":"'habit.id' is missing in props validation","line":62,"column":15,"nodeType":"Identifier","messageId":"missingPropType","endLine":62,"endColumn":17},{"ruleId":"react/prop-types","severity":2,"message":"'habit.id' is missing in props validation","line":67,"column":63,"nodeType":"Identifier","messageId":"missingPropType","endLine":67,"endColumn":65},{"ruleId":"react/prop-types","severity":2,"message":"'habit.name' is missing in props validation","line":71,"column":123,"nodeType":"Identifier","messageId":"missingPropType","endLine":71,"endColumn":127},{"ruleId":"react/prop-types","severity":2,"message":"'habit.name' is missing in props validation","line":110,"column":84,"nodeType":"Identifier","messageId":"missingPropType","endLine":110,"endColumn":88},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":118,"column":83,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[5756,5779],"text":"This Month&apos;s Compliance"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[5756,5779],"text":"This Month&lsquo;s Compliance"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[5756,5779],"text":"This Month&#39;s Compliance"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[5756,5779],"text":"This Month&rsquo;s Compliance"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/prop-types","severity":2,"message":"'habit.currentStreak' is missing in props validation","line":141,"column":143,"nodeType":"Identifier","messageId":"missingPropType","endLine":141,"endColumn":156},{"ruleId":"react/prop-types","severity":2,"message":"'habit.longestStreak' is missing in props validation","line":142,"column":144,"nodeType":"Identifier","messageId":"missingPropType","endLine":142,"endColumn":157}],"suppressedMessages":[],"errorCount":13,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React, { useMemo, useState } from 'react';\r\n\r\nimport useSafeAI from '../../../../hooks/useSafeAI';\r\nimport { SecureMarkdown } from '../../../../utils/secureMarkdownRenderer.js';\r\nimport { useAIPromptSafety } from '../../../../hooks/useAIPromptSafety.js';\r\nimport AIConsentModal from '../../../AIConsentModal.js';\r\nimport PIIWarningModal from '../../../PIIWarningModal.js';\r\n// FIX: Imported utility function directly to fix type errors.\r\nimport { isHabitDoneOn } from '../../../../utils/habitUtils.js';\r\n\r\nconst toYMD = (date) => date.toISOString().split('T')[0];\r\n\r\n\r\n\r\nconst HabitDetailModal = ({ habit, log, onClose }) => {\r\n    const [analysis, setAnalysis] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const { \r\n        checkAndExecute, \r\n        isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel,\r\n        isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain \r\n    } = useAIPromptSafety();\r\n\r\n    const calendarData = useMemo(() => {\r\n        const today = new Date();\r\n        const firstDayOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\r\n        const lastDayOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);\r\n\r\n        const days = [];\r\n        // Add empty cells for days before the 1st of the month\r\n        for (let i = 0; i < firstDayOfMonth.getDay(); i++) {\r\n            days.push({ key: `empty-${i}`, isDay: false });\r\n        }\r\n\r\n        for (let d = 1; d <= lastDayOfMonth.getDate(); d++) {\r\n            const date = new Date(today.getFullYear(), today.getMonth(), d);\r\n            const ymd = toYMD(date);\r\n            days.push({\r\n                key: ymd,\r\n                isDay: true,\r\n                day: d,\r\n                isToday: ymd === toYMD(new Date()),\r\n                isCompleted: isHabitDoneOn(log, habit.id, ymd),\r\n                isFuture: date > today,\r\n            });\r\n        }\r\n        return days;\r\n    }, [habit.id, log]);\r\n    \r\n    const stats = useMemo(() => {\r\n        const last30Days = Object.keys(log).filter(date => {\r\n            const d = new Date(date);\r\n            const diffDays = (new Date().getTime() - d.getTime()) / (1000 * 3600 * 24);\r\n            return diffDays <= 30;\r\n        });\r\n        const completedInLast30 = last30Days.filter(date => isHabitDoneOn(log, habit.id, date)).length;\r\n        const completionRate = (completedInLast30 / 30) * 100;\r\n        return { completionRate };\r\n    }, [habit.id, log]);\r\n\r\n    const generatePrompt = () => {\r\n        const last30DaysLog = Object.keys(log)\r\n            .filter(date => new Date(date) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000))\r\n            .map(date => `${date}: ${isHabitDoneOn(log, habit.id, date) ? 'Completed' : 'Missed'}`)\r\n            .join('\\n');\r\n            \r\n        return `\r\n            You are a habit formation coach for a neurodivergent user. Analyze the compliance data for the habit \"${habit.name}\" over the last 30 days.\r\n\r\n            **Core Directives:**\r\n            1.  **Identify Patterns:** Look for specific days of the week where the habit is consistently missed (e.g., \"Mondays appear to be a challenge.\").\r\n            2.  **Highlight Success:** Note any consistent streaks or periods of high compliance.\r\n            3.  **Provide ONE Actionable Suggestion:** Based on the pattern, offer a single, concrete recommendation. Frame it as a system adjustment, not a judgment. (e.g., \"Recommendation: Link this habit to an existing routine on Mondays, or set a specific calendar reminder.\")\r\n            \r\n            **Compliance Data (Last 30 Days):**\r\n            ${last30DaysLog || \"No data.\"}\r\n\r\n            Generate a very brief analysis with \"## Pattern\" and \"## Recommendation\" sections.\r\n        `;\r\n    };\r\n\r\n    const { generate } = useSafeAI();\r\n\r\n    const handleAnalysis = async (safePrompt?: string) => {\r\n        setLoading(true);\r\n        setError('');\r\n        const prompt = generatePrompt();\r\n        try {\r\n            const result = await generate(safePrompt ?? prompt, { model: 'gemini-2.5-flash', timeoutMs: 20000, skipPromptSafety: true });\r\n            setAnalysis(result?.text || (result?.json ? JSON.stringify(result.json) : ''));\r\n        } catch (e) {\r\n            setError(`Analysis failed: ${e.message}`);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n    \r\n    const triggerAnalysis = () => checkAndExecute(generatePrompt(), handleAnalysis);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-70 z-50 flex items-center justify-center p-4\" onClick={onClose}>\r\n            {isConsentModalOpen && <AIConsentModal onConfirm={handleConfirm} onCancel={handleCancel} dontShowAgain={dontShowAgain} setDontShowAgain={setDontShowAgain} />}\r\n            {isPiiModalOpen && <PIIWarningModal isOpen={isPiiModalOpen} onCancel={handlePiiCancel} onConfirm={handlePiiConfirm} matches={piiMatches} />}\r\n            <div className=\"bg-card-dark rounded-lg shadow-2xl p-6 border border-gray-700 w-full max-w-2xl\" onClick={e => e.stopPropagation()}>\r\n                <header className=\"flex justify-between items-start mb-4\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-accent-teal\">{habit.name}</h2>\r\n                        <p className=\"text-sm text-gray-400\">Compliance & Analysis</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-white text-2xl\">&times;</button>\r\n                </header>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                    <div>\r\n                        <h3 className=\"font-bold text-accent-blue mb-2\">This Month's Compliance</h3>\r\n                        <div className=\"grid grid-cols-7 text-center text-xs font-bold text-gray-400 mb-1\">\r\n                            <div>S</div><div>M</div><div>T</div><div>W</div><div>T</div><div>F</div><div>S</div>\r\n                        </div>\r\n                        <div className=\"grid grid-cols-7 gap-1\">\r\n                            {calendarData.map(day => {\r\n                                if (!day.isDay) return <div key={day.key}></div>;\r\n                                return (\r\n                                    <div key={day.key} title={day.key} className={`w-full aspect-square flex items-center justify-center rounded-sm text-xs ${\r\n                                        day.isCompleted ? 'bg-accent-green text-background-dark font-bold' :\r\n                                        day.isFuture ? 'bg-gray-800/50 text-gray-600' : 'bg-gray-700'\r\n                                    } ${day.isToday ? 'ring-2 ring-accent-blue' : ''}`}>\r\n                                        {day.day}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-4\">\r\n                        <div>\r\n                            <h3 className=\"font-bold text-accent-blue mb-2\">Statistics</h3>\r\n                            <div className=\"p-3 bg-gray-800 rounded-md space-y-2 text-sm\">\r\n                                <div className=\"flex justify-between\"><span>Current Streak:</span><strong className=\"text-accent-blue\">{habit.currentStreak} ≡ƒöÑ</strong></div>\r\n                                <div className=\"flex justify-between\"><span>Longest Streak:</span><strong className=\"text-accent-green\">{habit.longestStreak} Γ¡É</strong></div>\r\n                                <div className=\"flex justify-between\"><span>30-Day Completion:</span><strong className=\"text-accent-teal\">{stats.completionRate.toFixed(0)}%</strong></div>\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                             <h3 className=\"font-bold text-accent-blue mb-2\">≡ƒñû AI Habit Coach</h3>\r\n                             <button onClick={triggerAnalysis} disabled={loading} className=\"w-full p-2 bg-accent-blue text-background-dark font-bold rounded hover:bg-blue-400 disabled:bg-gray-600\">\r\n                                {loading ? 'Analyzing...' : 'Γ£¿ Get Insight'}\r\n                             </button>\r\n                             <div className=\"mt-2 text-sm p-2 bg-gray-800 rounded-md min-h-[80px]\">\r\n                                {loading && <p className=\"animate-pulse\">Analyzing patterns...</p>}\r\n                                {error && <p className=\"text-red-400\">{error}</p>}\r\n                                {analysis && <div className=\"prose prose-invert prose-sm max-w-none\"><SecureMarkdown content={analysis} /></div>}\r\n                             </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default HabitDetailModal;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\knowledge-capture-vault\\KnowledgeCaptureVaultModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\william\\task-matrix\\DailyTimeline.tsx","messages":[{"ruleId":"react/prop-types","severity":2,"message":"'events' is missing in props validation","line":18,"column":26,"nodeType":"Property","messageId":"missingPropType","endLine":18,"endColumn":32},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":52,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1563,1582],"text":"Today&apos;s Time Blocks"},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1563,1582],"text":"Today&lsquo;s Time Blocks"},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1563,1582],"text":"Today&#39;s Time Blocks"},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1563,1582],"text":"Today&rsquo;s Time Blocks"},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"react/prop-types","severity":2,"message":"'events.map' is missing in props validation","line":56,"column":29,"nodeType":"Identifier","messageId":"missingPropType","endLine":56,"endColumn":32}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n\r\nimport React from 'react';\r\n\r\n\r\nconst eventTypeColors = {\r\n    appointment: 'bg-accent-blue',\r\n    school: 'bg-accent-green',\r\n    handoff: 'bg-accent-teal',\r\n    other: 'bg-gray-500',\r\n    'task-block': 'bg-accent-purple',\r\n};\r\n\r\nconst START_HOUR = 6; // 6 AM\r\nconst END_HOUR = 22.5; // 10:30 PM\r\nconst TOTAL_HOURS = END_HOUR - START_HOUR;\r\n\r\nconst DailyTimeline = ({ events }) => {\r\n\r\n    const getEventStyle = (event) => {\r\n        const startTime = new Date(event.date);\r\n        // Assume a 1-hour duration for all events for visualization, as end time is not stored.\r\n        const durationHours = 1;\r\n\r\n        const startHourDecimal = startTime.getHours() + startTime.getMinutes() / 60;\r\n        \r\n        // Don't render events that are outside the visible timeline range\r\n        if (startHourDecimal < START_HOUR || startHourDecimal >= END_HOUR) {\r\n            return { display: 'none' };\r\n        }\r\n\r\n        const leftPercentage = ((startHourDecimal - START_HOUR) / TOTAL_HOURS) * 100;\r\n        const widthPercentage = (durationHours / TOTAL_HOURS) * 100;\r\n\r\n        return {\r\n            left: `${leftPercentage}%`,\r\n            width: `${widthPercentage}%`,\r\n        };\r\n    };\r\n\r\n    const timeMarkers = [\r\n        { hour: 6, label: '6a' },\r\n        { hour: 9, label: '9a' },\r\n        { hour: 12, label: '12p' },\r\n        { hour: 15, label: '3p' },\r\n        { hour: 18, label: '6p' },\r\n        { hour: 21, label: '9p' },\r\n    ];\r\n\r\n    return (\r\n        <div className=\"mb-6\">\r\n            <h4 className=\"font-semibold text-accent-blue mb-2\">Today's Time Blocks</h4>\r\n            <div className=\"relative h-12 bg-gray-800 rounded-md p-1\">\r\n                {/* Timeline background */}\r\n                <div className=\"relative w-full h-full\">\r\n                    {events.map(event => (\r\n                        <div\r\n                            key={event.id}\r\n                            title={`${event.title} at ${new Date(event.date).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}`}\r\n                            className={`absolute top-0 h-full rounded opacity-80 ${eventTypeColors[event.type] || 'bg-gray-500'}`}\r\n                            ref={(el) => {\r\n                                if (!el) return;\r\n                                const s = getEventStyle(event);\r\n                                if (s.display === 'none') {\r\n                                    el.style.display = 'none';\r\n                                } else {\r\n                                    el.style.left = s.left;\r\n                                    el.style.width = s.width;\r\n                                }\r\n                            }}\r\n                        >\r\n                             <span className=\"text-xs text-white font-semibold truncate px-1 absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 hidden sm:inline\">\r\n                                {event.title}\r\n                            </span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                 {/* Time Markers */}\r\n                {timeMarkers.map(marker => (\r\n                    <div\r\n                        key={marker.hour}\r\n                        className=\"absolute top-full mt-1 text-xs text-gray-500 transform -translate-x-1/2\"\r\n                        ref={(el) => el && (el.style.left = `${((marker.hour - START_HOUR) / TOTAL_HOURS) * 100}%`)}\r\n                    >\r\n                        {marker.label}\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default DailyTimeline;","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\willow\\WillowChecklistModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\components\\modules\\willow\\WillowGemCollectorModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\contexts\\AIProtectionContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":50,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":53,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[289,292],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[289,292],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":24,"column":96,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":24,"endColumn":99,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1194,1197],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1194,1197],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useState, useCallback } from 'react';\r\nimport { useAIConsent } from '../hooks/useAIConsent.js';\r\n\r\n// Provide a centralised AI protection context so all components and hooks share the same consent/PII state.\r\nexport const AIProtectionContext = createContext<any>(null);\r\n\r\nexport const AIProtectionProvider: React.FC<{children: React.ReactNode}> = ({ children }) => {\r\n  const { checkConsentAndExecute, isConsentModalOpen, dontShowAgain, setDontShowAgain, handleConfirm, handleCancel } = useAIConsent();\r\n  const [isPiiModalOpen, setPiiModalOpen] = useState(false);\r\n  const [piiMatches, setPiiMatches] = useState<Array<{ type: string; value: string }>>([]);\r\n  const pendingActionRef: { current?: () => void } = { current: undefined };\r\n\r\n  const handlePiiConfirm = useCallback(() => {\r\n    if (pendingActionRef.current) pendingActionRef.current();\r\n    setPiiModalOpen(false);\r\n    pendingActionRef.current = undefined;\r\n  }, []);\r\n\r\n  const handlePiiCancel = useCallback(() => {\r\n    setPiiModalOpen(false);\r\n    pendingActionRef.current = undefined;\r\n  }, []);\r\n\r\n  const checkAndExecute = useCallback(async (input: string, fn: (safeInput: string) => Promise<any>) => {\r\n    if (typeof input !== 'string' || input.trim().length === 0) {\r\n      throw new Error('No input provided for AI prompt.');\r\n    }\r\n    // Simple PII pattern detection\r\n    const email = /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b/i;\r\n    const ssn = /\\b\\d{3}-\\d{2}-\\d{4}\\b/;\r\n    const card = /\\b(?:\\d[ -]*){13,19}\\b/;\r\n    const matches: Array<{ type: string; value: string }> = [];\r\n    const mEmail = input.match(email) || [];\r\n    const mSsn = input.match(ssn) || [];\r\n    const mCard = input.match(card) || [];\r\n    mEmail.forEach(v => matches.push({ type: 'email', value: v }));\r\n    mSsn.forEach(v => matches.push({ type: 'ssn', value: v }));\r\n    mCard.forEach(v => matches.push({ type: 'credit_card', value: v }));\r\n\r\n    if (matches.length > 0) {\r\n      setPiiMatches(matches);\r\n      pendingActionRef.current = () => checkConsentAndExecute(() => fn(input.trim()));\r\n      setPiiModalOpen(true);\r\n      return;\r\n    }\r\n\r\n    return checkConsentAndExecute(() => fn(input.trim()));\r\n  }, [checkConsentAndExecute]);\r\n\r\n  const value = { checkAndExecute, isPiiModalOpen, piiMatches, handlePiiConfirm, handlePiiCancel, isConsentModalOpen, handleConfirm, handleCancel, dontShowAgain, setDontShowAgain };\r\n  return <AIProtectionContext.Provider value={value}>{children}</AIProtectionContext.Provider>;\r\n};\r\n\r\nexport default AIProtectionProvider;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\contexts\\AppStateContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ViewType' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mood' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Energy' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'KidLocation' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sop' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SOP_DATA' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":18},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":63,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":63,"endColumn":48},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":64,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":64,"endColumn":64},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":91,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":91,"endColumn":57},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":97,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":97,"endColumn":79}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Legacy provider removed to prevent accidental provider duplication.\r\n// If you need a fallback local provider for quick tests, use `src/contexts/AppStateContext.tsx` instead.\r\nimport React from 'react';\r\nexport default React;\r\nimport { useLocalStorage } from '../hooks/useLocalStorage';\r\nimport { generateId } from '@utils/generateId';\r\nimport { AppState, Action, ViewType, Mood, Energy, KidLocation, Sop, CalendarEvent } from '../types';\r\nimport { SOP_DATA } from '../constants';\r\n\r\nconst defaultState: AppState = {\r\n  view: 'command-center',\r\n  checkedItems: {},\r\n  textInputs: {},\r\n  statusMood: null,\r\n  statusEnergy: null,\r\n  kidsWillowLocation: null,\r\n  kidsSebastianLocation: null,\r\n  collectedGems: {\r\n    willow: [],\r\n    sebastian: [],\r\n  },\r\n  // collectedAchievements: map of achievementId -> { unlockedAt: ISO timestamp }\r\n  collectedAchievements: {},\r\n  userSops: [],\r\n  modifiedSops: {},\r\n  isModMode: false,\r\n  calendarEvents: [],\r\n  habitTracker: { habits: [], log: {} as Record<string, string[]> },\r\n  expenses: [],\r\n  brainDumpText: '',\r\n};\r\n\r\nfunction appReducer(state: AppState, action: Action): AppState {\r\n  switch (action.type) {\r\n    case 'SET_VIEW':\r\n      return { ...state, view: action.payload };\r\n    case 'TOGGLE_CHECKED':\r\n      return {\r\n        ...state,\r\n        checkedItems: {\r\n          ...state.checkedItems,\r\n          [action.payload]: !state.checkedItems[action.payload],\r\n        },\r\n      };\r\n    case 'SET_TEXT_INPUT':\r\n      return {\r\n        ...state,\r\n        textInputs: {\r\n          ...state.textInputs,\r\n          [action.payload.id]: action.payload.value,\r\n        },\r\n      };\r\n    case 'SET_MOOD':\r\n      return { ...state, statusMood: action.payload };\r\n    case 'SET_ENERGY':\r\n      return { ...state, statusEnergy: action.payload };\r\n    case 'SET_KID_LOCATION':\r\n      if (action.payload.kid === 'willow') {\r\n        return { ...state, kidsWillowLocation: action.payload.location };\r\n      }\r\n      return { ...state, kidsSebastianLocation: action.payload.location };\r\n    case 'ADD_GEM':\r\n      const { id, recipient } = action.payload;\r\n      const currentGems = state.collectedGems[recipient] || [];\r\n      if (currentGems.includes(id)) return state;\r\n      return {\r\n        ...state,\r\n        collectedGems: {\r\n          ...state.collectedGems,\r\n          [recipient]: [...currentGems, id],\r\n        },\r\n      };\r\n    case 'ADD_ACHIEVEMENT':\r\n      // Use map shape for collectedAchievements: { [id]: { unlockedAt: string } }\r\n      if (state.collectedAchievements && state.collectedAchievements[action.payload]) return state;\r\n      return {\r\n        ...state,\r\n        collectedAchievements: {\r\n          ...state.collectedAchievements,\r\n          [action.payload]: { unlockedAt: new Date().toISOString() }\r\n        },\r\n      };\r\n    case 'ADD_SOP':\r\n      return { ...state, userSops: [...state.userSops, action.payload] };\r\n    case 'UPDATE_SOP':\r\n      return {\r\n        ...state,\r\n        modifiedSops: { ...state.modifiedSops, [action.payload.id]: action.payload },\r\n      };\r\n    case 'RESET_SOP':\r\n      const newModifiedSops = { ...state.modifiedSops };\r\n      delete newModifiedSops[action.payload];\r\n      return { ...state, modifiedSops: newModifiedSops };\r\n    case 'TOGGLE_MOD_MODE':\r\n      return { ...state, isModMode: !state.isModMode };\r\n    case 'ADD_CALENDAR_EVENT':\r\n      const newEvent: CalendarEvent = { ...action.payload, id: generateId() };\r\n      return {\r\n        ...state,\r\n        calendarEvents: [...state.calendarEvents, newEvent].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()),\r\n      };\r\n    case 'REMOVE_CALENDAR_EVENT':\r\n      return {\r\n        ...state,\r\n        calendarEvents: state.calendarEvents.filter(event => event.id !== action.payload),\r\n      };\r\n    case 'RESET_CHECKLISTS_AND_INPUTS':\r\n      return { ...state, checkedItems: {}, textInputs: {} };\r\n    case 'RESET_REWARDS':\r\n      return { ...state, collectedGems: { willow: [], sebastian: [] }, collectedAchievements: {} };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\ninterface AppStateContextType {\r\n  appState: AppState;\r\n  dispatch: React.Dispatch<Action>;\r\n}\r\n\r\nconst AppStateContext = createContext<AppStateContextType | undefined>(undefined);\r\n\r\nexport const AppStateProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [storedState, setStoredState] = useLocalStorage<AppState>('wonky-sprout-os-state', defaultState);\r\n  \r\n  const reducerWithLocalStorage = (state: AppState, action: Action) => {\r\n    const newState = appReducer(state, action);\r\n    setStoredState(newState);\r\n    return newState;\r\n  };\r\n  \r\n  const [appState, dispatch] = useReducer(reducerWithLocalStorage, storedState);\r\n\r\n  return (\r\n    <AppStateContext.Provider value={{ appState, dispatch }}>\r\n      {children}\r\n    </AppStateContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAppState = (): AppStateContextType => {\r\n  const context = useContext(AppStateContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAppState must be used within an AppStateProvider');\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\contexts\\legacy-AppStateContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ViewType' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Mood' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":42},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Energy' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":44,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":50},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'KidLocation' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":52,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":63},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Sop' is defined but never used. Allowed unused vars must match /^_/u.","line":7,"column":65,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":68},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'SOP_DATA' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":18},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":63,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":63,"endColumn":48},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":64,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":64,"endColumn":64},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":91,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":91,"endColumn":57},{"ruleId":"no-case-declarations","severity":2,"message":"Unexpected lexical declaration in case block.","line":97,"column":7,"nodeType":"VariableDeclaration","messageId":"unexpected","endLine":97,"endColumn":79}],"suppressedMessages":[],"errorCount":10,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Legacy provider removed to prevent accidental provider duplication.\r\n// If you need a fallback local provider for quick tests, use `src/contexts/AppStateContext.tsx` instead.\r\nimport React from 'react';\r\nexport default React;\r\nimport { useLocalStorage } from '../hooks/useLocalStorage';\r\nimport { generateId } from '@utils/generateId';\r\nimport { AppState, Action, ViewType, Mood, Energy, KidLocation, Sop, CalendarEvent } from '../types';\r\nimport { SOP_DATA } from '../constants';\r\n\r\nconst defaultState: AppState = {\r\n  view: 'command-center',\r\n  checkedItems: {},\r\n  textInputs: {},\r\n  statusMood: null,\r\n  statusEnergy: null,\r\n  kidsWillowLocation: null,\r\n  kidsSebastianLocation: null,\r\n  collectedGems: {\r\n    willow: [],\r\n    sebastian: [],\r\n  },\r\n  // collectedAchievements: map of achievementId -> { unlockedAt: ISO timestamp }\r\n  collectedAchievements: {},\r\n  userSops: [],\r\n  modifiedSops: {},\r\n  isModMode: false,\r\n  calendarEvents: [],\r\n  habitTracker: { habits: [], log: {} as Record<string, string[]> },\r\n  expenses: [],\r\n  brainDumpText: '',\r\n};\r\n\r\nfunction appReducer(state: AppState, action: Action): AppState {\r\n  switch (action.type) {\r\n    case 'SET_VIEW':\r\n      return { ...state, view: action.payload };\r\n    case 'TOGGLE_CHECKED':\r\n      return {\r\n        ...state,\r\n        checkedItems: {\r\n          ...state.checkedItems,\r\n          [action.payload]: !state.checkedItems[action.payload],\r\n        },\r\n      };\r\n    case 'SET_TEXT_INPUT':\r\n      return {\r\n        ...state,\r\n        textInputs: {\r\n          ...state.textInputs,\r\n          [action.payload.id]: action.payload.value,\r\n        },\r\n      };\r\n    case 'SET_MOOD':\r\n      return { ...state, statusMood: action.payload };\r\n    case 'SET_ENERGY':\r\n      return { ...state, statusEnergy: action.payload };\r\n    case 'SET_KID_LOCATION':\r\n      if (action.payload.kid === 'willow') {\r\n        return { ...state, kidsWillowLocation: action.payload.location };\r\n      }\r\n      return { ...state, kidsSebastianLocation: action.payload.location };\r\n    case 'ADD_GEM':\r\n      const { id, recipient } = action.payload;\r\n      const currentGems = state.collectedGems[recipient] || [];\r\n      if (currentGems.includes(id)) return state;\r\n      return {\r\n        ...state,\r\n        collectedGems: {\r\n          ...state.collectedGems,\r\n          [recipient]: [...currentGems, id],\r\n        },\r\n      };\r\n    case 'ADD_ACHIEVEMENT':\r\n      // Use map shape for collectedAchievements: { [id]: { unlockedAt: string } }\r\n      if (state.collectedAchievements && state.collectedAchievements[action.payload]) return state;\r\n      return {\r\n        ...state,\r\n        collectedAchievements: {\r\n          ...state.collectedAchievements,\r\n          [action.payload]: { unlockedAt: new Date().toISOString() }\r\n        },\r\n      };\r\n    case 'ADD_SOP':\r\n      return { ...state, userSops: [...state.userSops, action.payload] };\r\n    case 'UPDATE_SOP':\r\n      return {\r\n        ...state,\r\n        modifiedSops: { ...state.modifiedSops, [action.payload.id]: action.payload },\r\n      };\r\n    case 'RESET_SOP':\r\n      const newModifiedSops = { ...state.modifiedSops };\r\n      delete newModifiedSops[action.payload];\r\n      return { ...state, modifiedSops: newModifiedSops };\r\n    case 'TOGGLE_MOD_MODE':\r\n      return { ...state, isModMode: !state.isModMode };\r\n    case 'ADD_CALENDAR_EVENT':\r\n      const newEvent: CalendarEvent = { ...action.payload, id: generateId() };\r\n      return {\r\n        ...state,\r\n        calendarEvents: [...state.calendarEvents, newEvent].sort((a, b) => new Date(a.date).getTime() - new Date(b.date).getTime()),\r\n      };\r\n    case 'REMOVE_CALENDAR_EVENT':\r\n      return {\r\n        ...state,\r\n        calendarEvents: state.calendarEvents.filter(event => event.id !== action.payload),\r\n      };\r\n    case 'RESET_CHECKLISTS_AND_INPUTS':\r\n      return { ...state, checkedItems: {}, textInputs: {} };\r\n    case 'RESET_REWARDS':\r\n      return { ...state, collectedGems: { willow: [], sebastian: [] }, collectedAchievements: {} };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\ninterface AppStateContextType {\r\n  appState: AppState;\r\n  dispatch: React.Dispatch<Action>;\r\n}\r\n\r\nconst AppStateContext = createContext<AppStateContextType | undefined>(undefined);\r\n\r\nexport const AppStateProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\r\n  const [storedState, setStoredState] = useLocalStorage<AppState>('wonky-sprout-os-state', defaultState);\r\n  \r\n  const reducerWithLocalStorage = (state: AppState, action: Action) => {\r\n    const newState = appReducer(state, action);\r\n    setStoredState(newState);\r\n    return newState;\r\n  };\r\n  \r\n  const [appState, dispatch] = useReducer(reducerWithLocalStorage, storedState);\r\n\r\n  return (\r\n    <AppStateContext.Provider value={{ appState, dispatch }}>\r\n      {children}\r\n    </AppStateContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAppState = (): AppStateContextType => {\r\n  const context = useContext(AppStateContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAppState must be used within an AppStateProvider');\r\n  }\r\n  return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\defaultStates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\firebase.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\toolDeclarations.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useAIConsent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useAIPromptSafety.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useAchievementEngine.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useApplyNeuroPrefs.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useAudioPlayback.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useCommandPalette.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useCurrentMode.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useHaptics.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useLiveChatFunctions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useLiveSession.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useLocalStorage.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useProactiveAI.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useProactiveAI.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useProgressVar.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useSafeAI.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useSystemHealth.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useTime.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\hooks\\useTranscript.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\index.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\playwright.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\checklist-data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\AIConsentModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ActionableCue.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ArchiveLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\AuthScreen.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\CoParentingDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\Cockpit.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\CockpitModule.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\CommandCenter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\CommandPalette.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ContentCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ContextSwitchCaptureModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ContextSwitchRestoreModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ContextSwitchingProtocol.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\DailyDebrief.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\E2EDebugView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\E2EGate.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\GroundingRose.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\Header.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\LiveChatModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\LoadingSpinner.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\NeurodivergentOnboarding.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\PIIWarningModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\Portal.tsx","messages":[],"suppressedMessages":[{"ruleId":"react/prop-types","severity":2,"message":"'children' is missing in props validation","line":5,"column":61,"nodeType":"Property","messageId":"missingPropType","endLine":5,"endColumn":69,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ProfileStackBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ScrollToTopButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\SebastiansDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\SopCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\SopForm.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\SopVault.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\StrategicRoadmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\SystemResetModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\ToastContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\WeeklyReview.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\WilliamsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\WillowsDashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\WonkyAISetupGuide.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\WonkyToolkit.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\insights\\AITrendAnalysis.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\insights\\HabitHeatmap.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\components\\views\\BioHacksView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\constants.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\AIProtectionContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\AppStateContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\FeatureFlagsContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\NeurodivergentPreferencesContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\firebase.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\reducer.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\contexts\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\integrations\\googleWorkspace.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\services\\geminiService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\sops\\neuro\\neuro_sop_templates.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\types\\global.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\types\\habits.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\types\\shims.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\types\\telemetry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\generateId.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\globalErrorHandlers.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":48,"column":58,"nodeType":"MemberExpression","messageId":"unexpected","endLine":48,"endColumn":71,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":49,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":49,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\importExport.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\logger.ts","messages":[],"suppressedMessages":[{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":12,"column":25,"nodeType":"MemberExpression","messageId":"unexpected","endLine":12,"endColumn":38,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":16,"column":25,"nodeType":"MemberExpression","messageId":"unexpected","endLine":16,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":20,"column":25,"nodeType":"MemberExpression","messageId":"unexpected","endLine":20,"endColumn":37,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"no-console","severity":1,"message":"Unexpected console statement.","line":25,"column":3,"nodeType":"MemberExpression","messageId":"unexpected","endLine":25,"endColumn":16,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\promptSanitizer.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\src\\utils\\win.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\GroundingRose.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\Modal.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'second' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":17,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, screen, fireEvent } from '@testing-library/react';\r\nimport { vi } from 'vitest';\r\nimport { Modal } from '@components/Modal';\r\n\r\ndescribe('Modal focus trap and keyboard', () => {\r\n  it('traps focus inside and closes on ESC', () => {\r\n    const onClose = vi.fn();\r\n    render(\r\n      <Modal isOpen={true} onClose={onClose} ariaLabelledBy=\"test-title\">\r\n        <button>First</button>\r\n        <button>Second</button>\r\n      </Modal>\r\n    );\r\n\r\n    const first = screen.getByText('First');\r\n    const second = screen.getByText('Second');\r\n    first.focus();\r\n\r\n    // For keyboard behavior we test that Escape closes the modal. Focus trap behavior\r\n    // can vary across environments; the primary safety is that Escape closes.\r\n\r\n    // Escape closes\r\n    fireEvent.keyDown(document, { key: 'Escape' });\r\n    expect(onClose).toHaveBeenCalled();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\NeurodivergentPreferences.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\SopVault.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\WeeklyReview.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'renderHook' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":47},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'act' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":49,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":52},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useAppState' is defined but never used. Allowed unused vars must match /^_/u.","line":6,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, screen, fireEvent, renderHook, act } from '@testing-library/react';\r\nimport WeeklyReview from '../src/components/WeeklyReview';\r\nimport { FeatureFlagsProvider } from '@contexts/FeatureFlagsContext';\r\nimport { AppStateProvider } from '@contexts/AppStateContext';\r\nimport { useAppState } from '@contexts/AppStateContext';\r\n\r\ndescribe('WeeklyReview non-AI mode', () => {\r\n  it('fills in local heuristics when ai is disabled', async () => {\r\n    // Clear and set default state to ensure a consistent wizard mode\r\n    localStorage.removeItem('wonky-sprout-os-state');\r\n    localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false }));\r\n    // Set AI feature flag in localStorage for a non-AI run\r\n    localStorage.removeItem('wonky-sprout-os-state');\r\n    localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false }));\r\n    // Use the repository default state as a base (include all required keys)\r\n    const { defaultUserState } = await import('../defaultStates');\r\n    localStorage.setItem('wonky-sprout-os-state', JSON.stringify({ ...defaultUserState, weeklyReviewMode: 'wizard' }));\r\n    // Ensure the app is in wizard mode so the test can progress through the steps\r\n    const state = JSON.parse(localStorage.getItem('wonky-sprout-os-state') || '{}');\r\n    state.weeklyReviewMode = 'wizard';\r\n\r\n    // Use the AppStateProvider wrapper to get direct access to dispatch from the test\r\n    const wrapper = ({ children }: any) => (\r\n      <AppStateProvider>\r\n        <FeatureFlagsProvider>\r\n          {children}\r\n        </FeatureFlagsProvider>\r\n      </AppStateProvider>\r\n    );\r\n\r\n    // Provide wrapper and render WeeklyReview in explicit wizard mode to ensure deterministic flow\r\n    render(<WeeklyReview initialMode=\"wizard\" />, { wrapper });\r\n    // The component will mount in wizard mode since we pass initialMode\r\n\r\n    // Wait for the wizard first step to render\r\n\r\n    // Progress through wizard steps to the reflection step\r\n    // Use test id to prevent text mismatches\r\n\r\n    const proceedInboxBtn = await screen.findByTestId('weekly-review-proceed-inbox');\r\n    fireEvent.click(proceedInboxBtn);\r\n\r\n    const confirmCheckbox = await screen.findByLabelText(/I confirm all inboxes are cleared/i);\r\n    fireEvent.click(confirmCheckbox);\r\n\r\n    const proceedProgressBtn = await screen.findByTestId('weekly-review-proceed-progress');\r\n    fireEvent.click(proceedProgressBtn);\r\n\r\n    const proceedReflectionBtn = await screen.findByTestId('weekly-review-proceed-reflection');\r\n    expect(proceedReflectionBtn).toBeInTheDocument();\r\n    fireEvent.click(proceedReflectionBtn);\r\n\r\n    // Now the Assist button should be present\r\n    const assistBtn = await screen.findByRole('button', { name: /Assist with Reflection/i });\r\n    expect(assistBtn).toBeInTheDocument();\r\n\r\n    fireEvent.click(assistBtn);\r\n\r\n    // After clicking, the local heuristic should fill wins/focus/friction textareas; wait for them\r\n    const wins = await screen.findByPlaceholderText(/What went well this week/);\r\n    expect(wins).toBeInTheDocument();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\WonkyAIModule.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'screen' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fireEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":26,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'waitFor' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":37,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'beforeEach' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":46},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'afterEach' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'defaultUserState' is defined but never used. Allowed unused vars must match /^_/u.","line":8,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\nimport WonkyAIModule from '../components/modules/WonkyAIModule';\r\nimport { FeatureFlagsProvider } from '@contexts/FeatureFlagsContext';\r\nimport { AppStateProvider } from '@contexts/AppStateContext'; // Use src AppStateProvider for context compatibility\r\nimport { NeuroPrefsProvider } from '@contexts/NeurodivergentPreferencesContext';\r\nimport { defaultUserState } from '../defaultStates';\r\n\r\nvi.mock('../hooks/useAIPromptSafety', () => ({\r\n  useAIPromptSafety: () => ({\r\n    checkAndExecute: (input: any, fn: any) => fn(input),\r\n    isPiiModalOpen: false,\r\n    piiMatches: [],\r\n    handlePiiConfirm: () => {},\r\n    handlePiiCancel: () => {},\r\n    isConsentModalOpen: false,\r\n    handleConfirm: () => {},\r\n    handleCancel: () => {},\r\n    dontShowAgain: false,\r\n    setDontShowAgain: () => {},\r\n  }),\r\n}));\r\n\r\nvi.mock('../hooks/useSafeAI', () => ({\r\n  default: () => ({\r\n    generate: (p: string, opts: any) => new Promise((resolve, reject) => {\r\n      if (opts?.signal) {\r\n        opts.signal.addEventListener('abort', () => reject(new Error('aborted')));\r\n      }\r\n      // never resolve to simulate a long-running request\r\n    })\r\n  })\r\n}));\r\n\r\ndescribe('WonkyAIModule', () => {\r\n  it('renders ask AI button', () => {\r\n    const { getByRole } = render(\r\n      <AppStateProvider>\r\n        <FeatureFlagsProvider>\r\n          <NeuroPrefsProvider>\r\n            <WonkyAIModule />\r\n          </NeuroPrefsProvider>\r\n        </FeatureFlagsProvider>\r\n      </AppStateProvider>\r\n    );\r\n    expect(getByRole('button', { name: 'Γ£¿ Ask AI' })).toBeTruthy();\r\n  });\r\n  // Temporarily commenting out failing tests to unblock other development\r\n  // it('shows cancel button while loading and hides on cancel', async () => {\r\n  //   vi.useFakeTimers();\r\n\r\n  //   const { getByPlaceholderText, getByRole, queryByText } = render(\r\n  //     <AppStateProvider>\r\n  //       <FeatureFlagsProvider>\r\n  //         <NeuroPrefsProvider>\r\n  //           <WonkyAIModule />\r\n  //         </NeuroPrefsProvider>\r\n  //       </FeatureFlagsProvider>\r\n  //     </AppStateProvider>\r\n  //   );\r\n\r\n  //   const input = getByPlaceholderText(/Describe the chaos/i);\r\n  //   fireEvent.change(input, { target: { value: 'Test prompt' } });\r\n  //   fireEvent.click(getByRole('button', { name: 'Γ£¿ Ask AI' }));\r\n\r\n  //   await waitFor(() => expect(screen.getByText(/Diagnosing/)).toBeVisible());\r\n  //   fireEvent.click(getByRole('button', { name: 'Cancel' }));\r\n  //   await waitFor(() => expect(screen.queryByText(/Diagnosing/)).not.toBeInTheDocument());\r\n  //   expect(input).not.toBeDisabled();\r\n\r\n  //   vi.runOnlyPendingTimers();\r\n  //   vi.useRealTimers();\r\n  // });\r\n\r\n  // it('shows a manual editor when AI is disabled', async () => {\r\n  //   // Disable AI via localStorage before rendering\r\n  //   localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false }));\r\n\r\n  //   // Set simplifiedUi to false for this test to show manual editor\r\n  //   localStorage.setItem('wonky-sprout-os-state', JSON.stringify({ ...defaultUserState, neuroPrefs: { ...defaultUserState.neuroPrefs, simplifiedUi: false } }));\r\n\r\n  //   render(\r\n  //     <AppStateProvider>\r\n  //       <FeatureFlagsProvider>\r\n  //         <NeuroPrefsProvider>\r\n  //           <WonkyAIModule />\r\n  //         </NeuroPrefsProvider>\r\n  //       </FeatureFlagsProvider>\r\n  //     </AppStateProvider>\r\n  //   );\r\n\r\n  //   const input = screen.getByPlaceholderText(/Describe the chaos/i);\r\n  //   fireEvent.change(input, { target: { value: 'Test prompt' } });\r\n\r\n  //   const askBtn = screen.getByRole('button', { name: 'Γ£¿ Ask AI' });\r\n  //   expect(askBtn).toBeInTheDocument();\r\n\r\n  //   const manualArea = await screen.findByPlaceholderText(/Paste or write your own structured plan/i);\r\n  //   expect(manualArea).toBeInTheDocument();\r\n  //   fireEvent.change(manualArea, { target: { value: 'Manual response.' } });\r\n  //   fireEvent.click(screen.getByText('Save Manual Response'));\r\n  //   expect(await screen.findByText('Manual response.')).toBeInTheDocument();\r\n  // });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\WonkyToolkit.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\aiProtectionContext.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\a11y.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\ai_flow.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":105,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":105,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":120,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":120,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":132,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":132,"endColumn":15},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":149,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":149,"endColumn":17}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { retryClick } from './helpers/retryHelpers';\r\n\r\nimport axe from 'axe-core';\r\nimport applyAiStub from './helpers/aiStub';\r\n\r\ntest('basic AI flow from UI placeholder to telemetry @smoke', async ({ page, storageKey }) => {\r\n  // Capture console logs, page errors, and lifecycle events to help diagnose runtime failures\r\n  page.on('console', msg => console.log('PAGE LOG:', msg.type(), msg.text()));\r\n  page.on('pageerror', err => console.log('PAGE ERROR:', err.message));\r\n  page.on('close', () => console.log('PAGE EVENT: closed'));\r\n  page.on('crash', () => console.log('PAGE EVENT: crash'));\r\n  page.on('requestfailed', r => console.log('PAGE EVENT: requestfailed', r.url(), r.failure()?.errorText));\r\n  page.on('request', r => console.log('PAGE EVENT: request', r.method(), r.url()));\r\n  // Use a longer timeout for local dev; occasionally Vite/HMR can be slow.\r\n  // Ensure any stored app state does not override the default (e.g., command-center)\r\n  await page.addInitScript((key) => {\r\n    try { window.localStorage.removeItem(key as string); } catch { /* ignore */ }\r\n    try { window.localStorage.setItem(key as string, JSON.stringify({ initialSetupComplete: true })); } catch { /* ignore */ }\r\n    try { (window as any).__PLAYWRIGHT_SKIP_DEV_BYPASS__ = true; } catch { /* ignore */ }\r\n    try { localStorage.setItem('wonky-sprout-ai-consent-dont-show-again', 'true'); } catch { /* ignore */ }\r\n  }, storageKey);\r\n  // Opt into the Playwright server stub so the app uses the deterministic proxy\r\n  await page.addInitScript(() => { (window as any).__PLAYWRIGHT_AI_STUB__ = true; });\r\n  // Install an AI stub at the network layer BEFORE navigation to ensure the route is active\r\n  // before the app attempts any AI requests during bootstrap. Use `force` during local runs\r\n  // so contributors get deterministic results without modifying environment variables.\r\n  await applyAiStub(page, { force: true });\r\n  // Now navigate to the command center\r\n  await page.goto('/?forceView=command-center');\r\n  // If Playwright is enabling server-side AI stub set by the workflow, add an explicit query param\r\n  // so `index.html` sets the client-side `__PLAYWRIGHT_AI_STUB__` earliest.\r\n  const url = process.env.PLAYWRIGHT_AI_STUB === 'true' ? '/?use_ai_proxy=true' : '/';\r\n  // Ensure the entire DOM is settled after navigation and for the main title to be visible\r\n  await page.waitForLoadState('networkidle');\r\n  await expect(page.getByRole('heading', { name: 'The Cockpit' })).toBeVisible({ timeout: 10000 });\r\n  await page.goto(url, { timeout: 120_000, waitUntil: 'load' });\r\n  // log the flag so we can assert the page is using the Playwright AI stub\r\n  await page.evaluate(() => console.log('PLAYWRIGHT_AI_STUB flag:', (window as any).__PLAYWRIGHT_AI_STUB__));\r\n  // (applyAiStub moved above) network route already registered\r\n  await page.waitForLoadState('networkidle');\r\n    await page.getByRole('banner').waitFor({ timeout: 120_000 });\r\n  // Save a debug screenshot to inspect the state if there's a failure\r\n  await page.screenshot({ path: 'tests/e2e/debug/ai_flow_after_load.png', fullPage: true });\r\n  // Ensure page assets and dev server have finished loading\r\n  await page.waitForLoadState('networkidle');\r\n  // Ensure the first page loads\r\n  await expect(page).toHaveTitle(/Wonky/);\r\n\r\n  // Navigate to Command Center (ensures Wonky AI and modules are available)\r\n  await expect(page.getByRole('banner')).toBeVisible({ timeout: 10000 });\r\n  await page.waitForTimeout(150);\r\n\r\n  // Prefer a stable data-testid for navigation if present, otherwise fallback to role lookup\r\n  let commandCenterNav = page.getByTestId('nav-command-center');\r\n  // If multiple (older mobile/desktop duplicates), use the first visible\r\n  if ((await commandCenterNav.count()) > 1) commandCenterNav = commandCenterNav.first();\r\n  if (!(await commandCenterNav.count())) {\r\n    commandCenterNav = page.getByRole('button', { name: 'The Cockpit' });\r\n  }\r\n  if (await commandCenterNav.count()) {\r\n    await commandCenterNav.waitFor({ state: 'visible', timeout: 10000 });\r\n    await retryClick(commandCenterNav, { tries: 3 });\r\n  } else {\r\n    // Click the System menu to open the dropdown\r\n    let systemBtn = page.getByTestId('nav-system');\r\n    if (!(await systemBtn.count())) systemBtn = page.getByRole('button', { name: 'System' });\r\n    await systemBtn.click();\r\n    await page.waitForTimeout(150);\r\n    await page.getByRole('menu').waitFor({ state: 'visible', timeout: 5000 });\r\n    await page.waitForTimeout(100);\r\n    await retryClick(page.getByRole('menuitem', { name: 'The Cockpit' }), { tries: 3 });\r\n  }\r\n  // Wait for the Command Center view to be active\r\n  await expect(page.getByTestId('command-center-title')).toBeVisible({ timeout: 10000 });\r\n\r\n  // Example: find input placeholder (matching codebase input text)\r\n  // Wait for the AI input and ask button to become visible\r\n  await page.waitForSelector('input[placeholder=\"Describe the chaos...\"]', { timeout: 10000 });\r\n  // Use locator for robustness and wait until the element is visible\r\n  const aiInputLocator = page.locator('[data-testid=\"ask-ai-input\"]');\r\n  try {\r\n    await aiInputLocator.waitFor({ state: 'visible', timeout: 10000 });\r\n    // Use a non-PII prompt to avoid the PII modal during E2E runs\r\n    await aiInputLocator.fill('Diagnose my workflow blocking issue');\r\n  } catch {\r\n    // Fallback to placeholder based selection if data-testid isn't available\r\n    const fallbackInput = page.getByPlaceholder('Describe the chaos...');\r\n    await fallbackInput.waitFor({ state: 'visible', timeout: 10000 });\r\n    await fallbackInput.fill('Contact me at test@example.com');\r\n  }\r\n\r\n  // match either the labeled 'Ask AI' button or older 'Generate' label used in some builds\r\n  // Prefer data-testid when available ΓÇö this is robust across localized/emoji variants\r\n  // Prefer `data-testid` when available; otherwise try a text-based role check.\r\n  let askBtn = page.getByTestId ? page.getByTestId('ask-ai-btn') : page.getByRole('button', { name: /Ask AI|Generate|Γ£¿ Ask AI/i });\r\n  if (askBtn && (await askBtn.count()) === 0) {\r\n    askBtn = page.getByRole('button', { name: /Ask AI|Generate|Γ£¿ Ask AI/i });\r\n  }\r\n  await askBtn.waitFor({ state: 'visible', timeout: 30000 });\r\n  await askBtn.click();\r\n  // Wait for the backend AI call to complete for determinism\r\n  try {\r\n    await page.waitForResponse((resp) => resp.url().includes('/aiProxy') && resp.status() === 200, { timeout: 20000 });\r\n  } catch (err) {\r\n    // If the backend didn't respond, allow the UI to fall back to the non-AI message\r\n    console.warn('AI backend did not respond within timeout ΓÇö falling back on UI check');\r\n  }\r\n\r\n  // Post-submit flows vary: either a PII warning then consent modal or a consent modal directly, or a success result.\r\n  // Try PII flow first, then consent, then fallback to result text.\r\n  try {\r\n    await expect(page.getByTestId('pii-warning-title')).toBeVisible({ timeout: 5000 });\r\n    // Prefer data-testid for stable selection\r\n    if (page.getByTestId && (await page.getByTestId('pii-send-anyway').count())) {\r\n      await page.getByTestId('pii-send-anyway').click();\r\n    } else {\r\n      await page.getByRole('button', { name: /Send Anyway/i }).click();\r\n    }\r\n  } catch (err) {\r\n    // No PII modal ΓÇö that's fine.\r\n  }\r\n\r\n  try {\r\n    await expect(page.getByTestId('ai-consent-title')).toBeVisible({ timeout: 5000 });\r\n    // Click by test id when available for localization-safe selection\r\n    if (page.getByTestId && (await page.getByTestId('ai-consent-acknowledge').count())) {\r\n      await page.getByTestId('ai-consent-acknowledge').click();\r\n    } else {\r\n      await page.getByRole('button', { name: /Acknowledge & Proceed/i }).click();\r\n    }\r\n  } catch (err) {\r\n    // Consent modal might not appear if user previously consented ΓÇö proceed to check for success.\r\n  }\r\n\r\n  // AI will be called; check for either success text or the AI-fallback message used in non-AI mode\r\n  // AI results can vary: check for AI success or manual fallback or error message ΓÇö treat errors as handled for now\r\n  // Prefer the AI response container testid, fall back to a text match if not present\r\n  try {\r\n    await expect(page.getByTestId('ai-response')).toBeVisible({ timeout: 10000 });\r\n  } catch {\r\n    await expect(page.locator('text=/ok from ai|AI result|Manual mode active|ok from ai|System Error:/i')).toBeVisible({ timeout: 10000 });\r\n  }\r\n\r\n    // If PLAYWRIGHT_AI_STUB is set in CI, the test will rely on the stubbed network response\r\n    if (process.env.PLAYWRIGHT_AI_STUB === 'true') {\r\n      try {\r\n        await page.waitForResponse((resp) => resp.url().includes('/aiProxy') && resp.status() === 200, { timeout: 5000 });\r\n      } catch (e) {\r\n        // The stub was enabled but route wasn't hit; allow test to continueΓÇöthis should surface in CI.\r\n      }\r\n    }\r\n\r\n  // Accessibility check: run axe in the page after the modal is shown (use local dev dependency)\r\n  await page.addScriptTag({ content: axe.source });\r\n  const result = await page.evaluate(async () => await (window as any).axe.run());\r\n  console.log('PAGE LOG: Axe violations length', result.violations.length);\r\n  console.log('PAGE LOG: Axe violations ids', result.violations.map(v => v.id));\r\n  console.log('PAGE LOG: Axe violation impacts', result.violations.map(v => v.impact));\r\n  // Only fail on serious/critical violations (so small format issues don't block the E2E)\r\n  const serious = result.violations.filter((v: any) => v.impact === 'critical' || v.impact === 'serious');\r\n  if (serious.length) console.warn('Axe serious violations:', serious.map((s: any) => s.id));\r\n  expect(serious.length).toBe(0);\r\n\r\n  // Visual regression: snapshot the modal if present. If no modal appears (e.g., user consent already given\r\n  // or system error) take a debug screenshot instead and continue ΓÇö the modal is optional across environments.\r\n  const dialog = page.getByRole('dialog');\r\n  if ((await dialog.count()) > 0) {\r\n    await expect(dialog).toHaveScreenshot('pii-consent-modal.png');\r\n  } else {\r\n    // Not a failure ΓÇö capture a debug screenshot for triage\r\n    await page.screenshot({ path: 'tests/e2e/debug/ai_flow_no_modal.png', fullPage: true });\r\n  }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\airlock.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":76,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":76,"endColumn":13}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { ensureAppView, retryClick } from './helpers/retryHelpers';\r\n\r\ntest('Airlock ΓÇö Test Airlock Protocol opens modal and starts decompression timer @smoke', async ({ page, storageKey }) => {\r\n  test.setTimeout(180_000);\r\n  // 1) Force the app to the Cockpit (command-center) view\r\n  // Seed a deterministic state so the dashboard loads in the right view.\r\n  await page.addInitScript((init) => {\r\n    try { (window as any).__WONKY_TEST_INITIALIZE__ = init; } catch { /* ignore */ }\r\n  }, { dashboardType: 'william', view: 'command-center', initialSetupComplete: true });\r\n  await page.addInitScript((key) => {\r\n    try { (window as any).__E2E_STORAGE_KEY__ = key; } catch { /* ignore */ }\r\n  }, storageKey);\r\n  await page.goto('/?forceView=command-center');\r\n  await page.waitForLoadState('networkidle');\r\n  try { await ensureAppView(page, 'command-center'); } catch { /* ignore ΓÇö fallbacks below will make it visible */ }\r\n\r\n  // 2) Find the Test Airlock Protocol button ΓÇö prefer role-based lookup for stability\r\n  const testAirlockBtn = page.getByTestId('test-airlock-btn').first();\r\n  // List top-level buttons for diagnostics when tests are flaky\r\n  const allButtons = page.getByRole('button');\r\n  console.log('AIRLOCK_DEBUG_BUTTON_COUNT', await allButtons.count());\r\n  const listButtons = await allButtons.allInnerTexts();\r\n  console.log('AIRLOCK_DEBUG_BUTTON_NAMES', listButtons.slice(0, 20));\r\n  // Debug: dump some runtime info for flakiness analysis\r\n  const pageText = await page.locator('body').innerText();\r\n  console.log('AIRLOCK_DEBUG_PAGE_TEXT_HEADLINES', pageText.substring(0, 400));\r\n  const appStateBefore = await page.evaluate(() => (window as any).appState || null);\r\n  console.log('AIRLOCK_DEBUG_APPSTATE_BEFORE', appStateBefore);\r\n  await expect(testAirlockBtn).toBeVisible({ timeout: 15000 });\r\n\r\n  // 3) Click it and validate the modal appears\r\n  await retryClick(testAirlockBtn, { tries: 3 });\r\n  const appStateAfterClick = await page.evaluate(() => (window as any).appState || null);\r\n  console.log('AIRLOCK_DEBUG_APPSTATE_AFTER_CLICK', appStateAfterClick);\r\n  const foundAirlockBtn = await page.locator('button', { hasText: 'Test Airlock' }).count();\r\n  console.log('AIRLOCK_DEBUG_FOUND_AIRLOCK_BTN_COUNT', foundAirlockBtn);\r\n  // Wait for runtime app state flag the modal uses; fallback to dispatching actions\r\n  try {\r\n    await page.waitForFunction(() => !!(window as any).appState && (window as any).appState.isContextRestoreModalOpen === true, null, { timeout: 15000 });\r\n  } catch {\r\n    // Fallback: if the dispatch hook is exposed for E2E, use it to open the modal\r\n    const dispatchAvailable = await page.evaluate(() => typeof (window as any).__WONKY_TEST_DISPATCH__ === 'function');\r\n    if (dispatchAvailable) {\r\n      await page.evaluate(() => {\r\n        try { (window as any).__WONKY_TEST_DISPATCH__({ type: 'SET_SAVED_CONTEXT', payload: { view: 'command-center', dashboardType: 'william' } }); } catch { /* ignore */ }\r\n        try { (window as any).__WONKY_TEST_DISPATCH__({ type: 'SET_CONTEXT_RESTORE_MODAL_OPEN', payload: true }); } catch { /* ignore */ }\r\n      });\r\n      // allow UI to update\r\n      await page.waitForTimeout(300);\r\n    }\r\n  }\r\n  // Add a small wait to allow React to render the modal before checking the mount flag\r\n  await page.waitForTimeout(500);\r\n  // Wait for a diagnostic signal from the modal code that it has mounted (helps avoid portal timing races)\r\n  try {\r\n    await page.waitForFunction(() => !!(window as any).__WONKY_CONTEXT_RESTORE_MODAL_MOUNTED__, null, { timeout: 15000 });\r\n  } catch { console.warn('Modal mount signal not observed'); }\r\n  try {\r\n    const mounted = await page.evaluate(() => !!(window as any).__WONKY_CONTEXT_RESTORE_MODAL_MOUNTED__);\r\n    console.log('AIRLOCK_MODAL_MOUNTED', mounted);\r\n  } catch(e) { console.warn('Failed reading AIRLOCK_MODAL_MOUNTED flag', e); }\r\n  // Wait for the functional button to appear, giving it 30 seconds for the portal to attach.\r\n  const restoreButton = page.getByTestId('context-restore-restore-btn');\r\n  await expect(restoreButton).toBeVisible({ timeout: 30000 });\r\n  // Removed explicit style-based wait here ΓÇö using expect(modal).toBeVisible() above for clarity and timeout handling\r\n  // We assert the restore button is visible earlier and prefer that over role-based checks here\r\n\r\n  // Fulfill the task requirement immediately\r\n  await page.getByTestId('physical-task-checkbox').click();\r\n  await expect(page.getByTestId('physical-task-checkbox')).toBeChecked({ timeout: 5000 });\r\n  // Diagnostic: log the timer value to make sure test mode accelerated it\r\n  try {\r\n    const timerStr = await page.getByTestId('context-restore-timer').innerText();\r\n    console.log('AIRLOCK_DEBUG_TIMER_AFTER_CHECK', timerStr);\r\n  } catch (e) { console.warn('Could not read timer for debug'); }\r\n\r\n  // Wait for the modal and final button state (The Functional Check)\r\n\r\n  // Final assertion for functionality: in E2E we accelerate the timer ΓÇö allow 10s for the enablement\r\n  await expect(restoreButton).toBeEnabled({ timeout: 10000 });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\apothecary.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":18,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { ensureAppView, retryClick } from './helpers/retryHelpers';\r\nimport percySnapshot from '@percy/playwright';\r\n\r\ntest('Apothecary ΓÇö Navigation and content verification @smoke', async ({ page, storageKey }) => {\r\n  test.setTimeout(120_000);\r\n  // 1) Seed the app to the Cockpit view\r\n  await page.addInitScript((init) => {\r\n    try { (window as any).__WONKY_TEST_INITIALIZE__ = init; } catch { /* ignore */ }\r\n  }, { dashboardType: 'william', view: 'command-center', initialSetupComplete: true });\r\n  await page.addInitScript((key) => {\r\n    try { (window as any).__E2E_STORAGE_KEY__ = key; } catch { /* ignore */ }\r\n    try {\r\n      const seeded = { initialSetupComplete: true, view: 'command-center', dashboardType: 'william' };\r\n      const k = (key as string) || (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state';\r\n      window.localStorage.setItem(k, JSON.stringify(seeded));\r\n      try { (window as any).__E2E_FORCE_VIEW__ = 'command-center'; } catch { /* ignore */ }\r\n    } catch (e) { /* ignore */ }\r\n  }, storageKey);\r\n  await page.goto('/?force_e2e_view=command-center');\r\n  await page.waitForLoadState('networkidle');\r\n  await ensureAppView(page, 'command-center');\r\n\r\n  // 2) Click the Apothecary button ΓÇö text includes emoji; prefer role-based lookup\r\n  const apothecaryBtn = page.getByRole('button', { name: /The Apothecary|Apothecary|≡ƒÆè/i }).first();\r\n  await expect(apothecaryBtn).toBeVisible({ timeout: 15000 });\r\n  await retryClick(apothecaryBtn);\r\n\r\n  // 3) Assert we reached the bio-hacks view ΓÇö check header and three recipe cards\r\n  await page.waitForLoadState('networkidle');\r\n  await ensureAppView(page, 'bio-hacks');\r\n  await expect(page.getByRole('heading', { name: /≡ƒÆè The Apothecary/i })).toBeVisible({ timeout: 10000 });\r\n\r\n  // Verify the three recipes are present on the page\r\n  await expect(page.getByText(/The Lime Drag/i)).toBeVisible();\r\n  await expect(page.getByText(/The Shield/i)).toBeVisible();\r\n  await expect(page.getByText(/The Heavy Work/i)).toBeVisible();\r\n\r\n  // Percy snapshot for visual diffing (if Percy is enabled for the run)\r\n  try {\r\n    await percySnapshot(page, 'BioHacks ΓÇö Apothecary View');\r\n  } catch (e) {\r\n    console.warn('Percy snapshot skipped or percy not configured', e);\r\n  }\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\check-dashboard.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\cockpit.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":26,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":26,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":65,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":65,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest('Cockpit Module ΓÇö shows seeded active stack and can add a new profile stack', async ({ page }) => {\r\n  // Add a short timeout to avoid initial load race in CI/hot-reload environments\r\n  await page.waitForTimeout(1000);\r\n  // 1. Go to the dashboard (Force the view)\r\n  await page.goto('/?forceView=command-center');\r\n  await page.waitForLoadState('networkidle');\r\n\r\n  // 2. Verify Header (The Fuzzy Fix)\r\n  // Look for a Heading that contains \"Cockpit\" OR \"Profile\" OR \"Stack\"\r\n  // This makes it bulletproof against text changes.\r\n  const header = page.getByRole('heading', { name: /Cockpit|Profile|Stack/i }).first();\r\n  await expect(header).toBeVisible({ timeout: 10000 });\r\n\r\n  // 3. Verify Active Stack Card matches the seeded data, if present; otherwise we'll create a new stack\r\n  const activeStack = page.getByTestId('cockpit-active-stack').first();\r\n  try {\r\n    // Allow the Profile Stack component time to render its initial state\r\n    await page.waitForTimeout(1500);\r\n    // Explicitly wait for the appState to resolve profileStacks before asserting the UI\r\n    // Reduced timeout to 10s to fail faster and drive fallbacks sooner\r\n      await page.waitForFunction(() => {\r\n      try {\r\n        return (window as any).appState && Array.isArray((window as any).appState.profileStacks) && (window as any).appState.profileStacks.length > 0;\r\n      } catch (e) {\r\n        return false;\r\n      }\r\n      }, { timeout: 10000 });\r\n    await expect(activeStack).toBeVisible({ timeout: 5000 });\r\n  } catch {\r\n    // No active stack seeded in this environment ΓÇö open the builder and create one\r\n    let openBtn = page.getByTestId('cockpit-open-builder').first();\r\n    // fallback to role-based selectors if the test-id isn't present in the build\r\n    if (!(await page.isClosed()) && (await openBtn.count()) === 0) {\r\n      openBtn = page.getByRole('button', { name: /Open Builder|Add Stack|Create Stack|New Stack|Add Profile/i }).first();\r\n    }\r\n    // If we've still not found it, try the more common 'Add Stack' label directly\r\n    if (!(await page.isClosed()) && (await openBtn.count()) === 0) {\r\n      openBtn = page.getByRole('button', { name: /Add Stack/i }).first();\r\n    }\r\n    try {\r\n      if (!(await page.isClosed())) {\r\n          await expect(openBtn).toBeVisible({ timeout: 10000 });\r\n          await openBtn.click();\r\n      } else {\r\n        console.warn('COCKPIT: Page closed before open builder could be clicked; skipping create-flow');\r\n      }\r\n      // Build the profile stack: wait longer for the input to show\r\n      if (!(await page.isClosed())) {\r\n        if (!(await page.getByTestId('cockpit-name-input').count())) {\r\n          await page.waitForSelector('[data-testid=\"cockpit-name-input\"]', { timeout: 20000 });\r\n        }\r\n          if (!(await page.isClosed())) await page.getByTestId('cockpit-name-input').fill('Deep Work Mode', { timeout: 20000 });\r\n      }\r\n      // set persona & audio if those controls exist\r\n      if (!(await page.isClosed())) {\r\n        if ((await page.getByTestId('cockpit-persona-select').count()) > 0) await page.getByTestId('cockpit-persona-select').selectOption('william', { timeout: 10000 });\r\n        if ((await page.getByTestId('cockpit-audio-select').count()) > 0) await page.getByTestId('cockpit-audio-select').selectOption('audio-basic', { timeout: 10000 });\r\n      }\r\n      if (!(await page.isClosed())) {\r\n          await page.getByTestId('cockpit-save-apply').click({ timeout: 10000 });\r\n          await expect(page.getByTestId('cockpit-active-stack')).toBeVisible({ timeout: 5000 });\r\n      }\r\n    } catch (e) {\r\n      console.warn('COCKPIT: open builder not found or create-flow failed; skipping create-flow');\r\n    }\r\n    if (!(await page.isClosed()) && (await page.getByTestId('cockpit-name-input').count()) > 0) {\r\n      await page.getByTestId('cockpit-name-input').fill('Deep Work Mode', { timeout: 20000 });\r\n      if (!(await page.isClosed()) && (await page.getByTestId('cockpit-persona-select').count()) > 0) await page.getByTestId('cockpit-persona-select').selectOption('william', { timeout: 10000 });\r\n      if (!(await page.isClosed()) && (await page.getByTestId('cockpit-audio-select').count()) > 0) await page.getByTestId('cockpit-audio-select').selectOption('audio-basic', { timeout: 10000 });\r\n      if (!(await page.isClosed())) {\r\n          await page.getByTestId('cockpit-save-apply').click({ timeout: 10000 });\r\n          await expect(page.getByTestId('cockpit-active-stack')).toBeVisible({ timeout: 5000 });\r\n      }\r\n    } else {\r\n      console.warn('COCKPIT: cockpit-name-input not present; skipping profile stack creation');\r\n    }\r\n  }\r\n\r\n  // 4. Click \"Add Stack\" (Regex for case insensitivity)\r\n  if (await page.isClosed()) {\r\n      console.warn('COCKPIT: Page closed before Add Stack click; ending test early');\r\n      return;\r\n  }\r\n  try {\r\n    if (!(await page.isClosed())) {\r\n        await page.getByRole('button', { name: /Add Stack/i }).click();\r\n    } else {\r\n      console.warn('COCKPIT: Page closed before Add Stack click; ending test early');\r\n      return;\r\n    }\r\n  } catch (e) {\r\n    console.warn('COCKPIT: Add Stack click failed:', e);\r\n    if (await page.isClosed()) return;\r\n  }\r\n\r\n  // 5. Fill out form\r\n  if (await page.isClosed()) {\r\n      console.warn('COCKPIT: Page closed before form fill; ending test early');\r\n      return;\r\n  }\r\n  try {\r\n    if (!(await page.isClosed())) {\r\n        await page.getByPlaceholder(/Profile Name/i).fill('Deep Work Mode');\r\n    } else {\r\n      console.warn('COCKPIT: Page closed before form fill; ending test early');\r\n      return;\r\n    }\r\n  } catch (e) {\r\n    console.warn('COCKPIT: Profile Name fill failed', e);\r\n    if (await page.isClosed()) return;\r\n  }\r\n  \r\n  // Handle Persona Select (if it exists)\r\n  const personaSelect = page.getByLabel(/Persona/i);\r\n    if (!(await page.isClosed()) && await personaSelect.isVisible()) {\r\n      await personaSelect.selectOption('william');\r\n    }\r\n\r\n  // 6. Save\r\n  if (await page.isClosed()) {\r\n      console.warn('COCKPIT: Page closed before Save click; ending test early');\r\n      return;\r\n  }\r\n  try {\r\n    if (!(await page.isClosed())) {\r\n        await page.getByRole('button', { name: /Save/i }).click();\r\n    } else {\r\n      console.warn('COCKPIT: Page closed before Save click; ending test early');\r\n      return;\r\n    }\r\n  } catch (e) {\r\n    console.warn('COCKPIT: Save click failed', e);\r\n    if (await page.isClosed()) return;\r\n  }\r\n\r\n  // 7. Verify new stack appears\r\n  if (await page.isClosed()) {\r\n      console.warn('COCKPIT: Page closed before verifying new stack; ending test early');\r\n      return;\r\n  }\r\n  if (!(await page.isClosed())) {\r\n      await expect(page.getByText('Deep Work Mode')).toBeVisible();\r\n  } else {\r\n    console.warn('COCKPIT: Page closed before verifying new stack; ending test early');\r\n    return;\r\n  }\r\n});","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\env_check.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":11,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":11,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\n\r\ntest('Environment health checks - duplicate React detection @smoke', async ({ page }) => {\r\n  await page.goto('/', { waitUntil: 'load' });\r\n  await page.waitForLoadState('networkidle');\r\n  // Log the presence of an importmap string (helps debug CDN injection)\r\n  const hasImportMap = await page.evaluate(() => {\r\n    try {\r\n      const scripts = Array.from(document.querySelectorAll('script[type=\"importmap\"]'));\r\n      return scripts.map(s => s.textContent || s.innerHTML || '').join('\\n');\r\n    } catch (e) { return null; }\r\n  });\r\n  if (hasImportMap) {\r\n    // Attach the importmap to the test as a note for diagnostics\r\n    test.info().annotations.push({ type: 'note', description: `importmap (detected): ${String(hasImportMap).slice(0, 300)}` });\r\n  }\r\n  // Some builds don't expose the devtools hook; if missing, skip the check\r\n  const res = await page.evaluate(() => {\r\n    try {\r\n      const hook = (window as any).__REACT_DEVTOOLS_GLOBAL_HOOK__;\r\n      if (!hook) return { found: false };\r\n      const renderersMap = hook.renderers ?? hook._renderers ?? null;\r\n      // If renderers is a Map-like object with .size, use it\r\n      if (renderersMap && typeof renderersMap.size === 'number') {\r\n        const versions = [] as string[];\r\n        for (const r of renderersMap.values()) {\r\n          const v = r && (r.version || r.currentRendererVersion || r._rendererVersion || r.getRendererVersion && r.getRendererVersion());\r\n          versions.push(v || 'unknown');\r\n        }\r\n        return { found: true, count: renderersMap.size, versions };\r\n      }\r\n      // If the hook is present but we can't enumerate renderers, mark detected but unenumerable\r\n      return { found: true, count: 1 };\r\n    } catch (e) {\r\n      return { error: String(e) };\r\n    }\r\n  });\r\n\r\n  if (!res.found) {\r\n    // Nothing to check ΓÇö this is likely a production/minified build. Pass the test.\r\n    test.info().annotations.push({ type: 'note', description: 'React devtools hook not present; skipping duplicate React check' });\r\n    return;\r\n  }\r\n\r\n  // If multiple React renderers are attached, fail early and provide versions\r\n  if (res.count && res.count > 1) {\r\n    // Add an explicit note showing the versions found ΓÇö this is critical for diagnosing \"Invalid hook call\" errors.\r\n    test.info().annotations.push({ type: 'error', description: `Duplicate React renderers detected: ${JSON.stringify(res.versions)}` });\r\n    throw new Error(`Duplicate React renderers detected: ${JSON.stringify(res.versions)} ΓÇö Check ` +\r\n      '`index.html` importmap or Vite plugins to ensure React isn\\'t loaded twice.');\r\n  }\r\n  // If it's present but count <= 1, assume safe\r\n  expect(res.count <= 1).toBeTruthy();\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\grounding.spec.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\helpers\\aiStub.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\helpers\\errorCapture.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\helpers\\retryHelpers.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\kids_rewards.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'installErrorCapture' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'seededKeyCheck' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":75,"column":9,"nodeType":null,"messageId":"unusedVar","endLine":75,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":80,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":80,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":100,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":100,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":134,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":134,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":200,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":200,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_' is defined but never used.","line":208,"column":70,"nodeType":null,"messageId":"unusedVar","endLine":208,"endColumn":71},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":215,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":215,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":224,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":224,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":248,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":248,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { ensureAppView, retryClick } from './helpers/retryHelpers';\r\nimport applyAiStub from './helpers/aiStub';\r\nimport { installErrorCapture, errorCaptureScript } from './helpers/errorCapture';\r\n\r\ntest.skip('Kids corner and reward tiers visible @smoke', async ({ page }) => {\r\n  // Increase test-level timeout for multi-worker flakiness\r\n  test.setTimeout(120_000);\r\n  // Optional: start tracing for this test if CI or explicit debug flag is enabled\r\n  const testInfo = test.info();\r\n  const shouldTrace = !!process.env.WONKY_E2E_TRACE_TESTS || (!!process.env.CI && testInfo.retry > 0);\r\n  if (shouldTrace) await page.context().tracing.start({ screenshots: true, snapshots: true });\r\n    // Install E2E error capture script early so any early crash is recorded\r\n    const ec = errorCaptureScript;\r\n    await page.addInitScript(ec);\r\n\r\n  // Set a flag to force the AppStateProvider into the correct view for E2E\r\n  // Use addInitScript so the override is set before the app initializes\r\n  // Ensure no cross-test state from other workers; clear seed then set the forced view\r\n  await page.addInitScript((seedKey) => {\r\n    const key = (seedKey as string) || (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state';\r\n      try { window.localStorage.removeItem(key); } catch { /* ignore */ }\r\n    try { (window as any).__E2E_FORCE_VIEW__ = 'willows-dashboard'; } catch { /* ignore */ }\r\n  });\r\n \r\n  // Seed a complete app state to show Willow dashboard with all required keys\r\n  await page.addInitScript((seedKey) => {\r\n    try {\r\n      const state = {\r\n        dashboardType: 'willow',\r\n        view: 'willows-dashboard',\r\n        initialSetupComplete: true,\r\n        willowDashboardModules: [\r\n          'reward-store-module',\r\n          'willow-gem-collector-module'\r\n        ],\r\n        sebastianDashboardModules: [],\r\n        collectedGems: {\r\n          willow: ['morning-hair','morning-teeth','morning-clothes','morning-water','moms-wake'],\r\n          sebastian: []\r\n        },\r\n        checkedItems: {},\r\n        textInputs: {},\r\n        statusMood: 'Calm',\r\n        statusEnergy: 'Medium',\r\n        kidsWillowLocation: 'At Mom\\'s',\r\n        kidsSebastianLocation: 'At Mom\\'s',\r\n        collectedAchievements: {},\r\n        userSops: [],\r\n        savedContext: null,\r\n        toastNotifications: [],\r\n        chatMessages: [],\r\n        dismissedNudges: [],\r\n        sharedExpenses: [],\r\n        habitTracker: { log: {} },\r\n        isContextCaptureModalOpen: false,\r\n        isContextRestoreModalOpen: false,\r\n        onboardingStep: 0,\r\n        isModMode: false,\r\n        // Add any other required keys from defaultUserState here as needed\r\n      };\r\n      const key = (seedKey as string) || (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state';\r\n      window.localStorage.setItem(key, JSON.stringify(state));\r\n        try { (window as any).__PLAYWRIGHT_SKIP_DEV_BYPASS__ = true; } catch { /* ignore */ }\r\n      // Disable AI by default for this smoke test; we don't validate AI here.\r\n        try { window.localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false })); } catch { /* ignore */ }\r\n    } catch { /* ignore */ }\r\n  });\r\n  // Navigate to the app with an enforced forced-view query so it is set at the earliest stage\r\n  await page.goto('/?force_e2e_view=willows-dashboard', { waitUntil: 'load' });\r\n\r\n  // Verify seeding was applied in page context\r\n  const e2eForcePresent = await page.evaluate(() => !!(window as any).__E2E_FORCE_VIEW__);\r\n  console.log('WONKY_E2E_FORCE_PRESENT', e2eForcePresent);\r\n  const seededKeyCheck = await page.evaluate(() => (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state');\r\n  // Wait for a special console message from our error capture helper, if one appears\r\n  try {\r\n    const consoleMsg = await page.waitForEvent('console', { timeout: 2000, predicate: m => m.text().includes('WONKY_E2E_ERROR') || m.text().includes('WONKY_GLOBAL_ERROR_ONERROR') });\r\n    console.log('PW_MONITOR_CONSOLE', consoleMsg.type(), consoleMsg.text());\r\n  } catch (e) {\r\n    console.log('PW_MONITOR_CONSOLE', 'no early error console message');\r\n  }\r\n\r\n  // Ensure deterministic AI responses for the test run; `force` makes local runs stable.\r\n  await applyAiStub(page, { force: true });\r\n  // Winston: wire browser console to node logs to capture errors thrown during render\r\n  page.on('console', (msg) => console.log('PW_CONSOLE', msg.type(), msg.text()));\r\n  await page.goto('/', { waitUntil: 'load' });\r\n  await page.waitForLoadState('networkidle');\r\n  // Debug: log seeded localStorage and appState.view so we can verify what the app sees after reload\r\n  try {\r\n    const rawState = await page.evaluate(() => {\r\n      const key = (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state';\r\n      return window.localStorage.getItem(key);\r\n    });\r\n    console.log('WONKY_SEEDED_STATE_RAW', rawState);\r\n    const appView = await page.evaluate(() => {\r\n      try {\r\n        return window.appState?.view || null;\r\n      } catch (e) { return 'error'; }\r\n    });\r\n    console.log('WONKY_APPSTATE_VIEW', appView);\r\n  } catch (e) { console.warn('WONKY_SEEDED_STATE_RAW failed', e); }\r\n  // Debug modules present on the seeded state\r\n  try {\r\n    const modules = await page.evaluate(() => ({\r\n      view: (window as any).appState?.view,\r\n      dashboardType: (window as any).appState?.dashboardType,\r\n      willowDashboardModules: (window as any).appState?.willowDashboardModules\r\n    }));\r\n    console.log('WONKY_SEEDED_MODULES', modules);\r\n  } catch (e) { console.warn('WONKY_SEEDED_MODULES failed', e); }\r\n  // Debug: surface the last error captured by ErrorBoundary to the test logs\r\n  try {\r\n    const lastErr = await page.evaluate(() => (window as any).__WONKY_LAST_ERROR__ || null);\r\n    const lastErrRaw = await page.evaluate(() => window.localStorage.getItem('wonky-last-error'));\r\n    console.log('WONKY_LAST_ERROR_RAW', lastErrRaw);\r\n    // If the error is present in the DOM (ErrorBoundary rendered it), capture it and fail with the message\r\n    const domError = await page.getByTestId('wonky-last-error').allInnerTexts();\r\n    if (domError && domError.length > 0) {\r\n      throw new Error(`E2E Captured error from ErrorBoundary: ${domError.join('\\n')}`);\r\n    }\r\n    // If an error is present, fail early with the details so the Playwright log\r\n    // and Vitest output include the stack for debugging.\r\n    expect(lastErr).toBeNull();\r\n  } catch (e) { console.warn('Could not read WONKY_LAST_ERROR from page', e); }\r\n  // In DEV mode the app may show a different dashboard; navigate explicitly\r\n  // to the Little Sprouts / Willow dashboard if the kids corner isn't present.\r\n  // Default: look for the Kids corner heading (Little Sprouts). If not present, open the Command Center and click Little Sprouts.\r\n  await page.waitForLoadState('networkidle');\r\n  try {\r\n    // V1.0 known limitation: this flow is slow for some environments; we give it a generous timeout.\r\n    await expect(page.getByTestId('kids-corner-heading')).toBeVisible({ timeout: 120000 });\r\n  } catch (e) {\r\n      // Prefer direct navigation to the Little Sprouts -- it's present for Willow dashboards\r\n      // Prefer a testid on the navigation to avoid localization/label mismatch\r\n      // Prefer an explicit test-id for the child dashboard. We use a generic\r\n      // `nav-child-dashboard` so tests aren't tied to a specific person name.\r\n      let littleSproutsNav = page.getByTestId('nav-child-dashboard');\r\n      if (!(await littleSproutsNav.count())) littleSproutsNav = page.getByRole('button', { name: /Child Dashboard|Child|Little Sprouts|Willow's/i });\r\n      if (!(await littleSproutsNav.count())) {\r\n        // If not present, try the command center menu if available\r\n        let commandCenterNav = page.getByTestId('nav-command-center');\r\n        if ((await commandCenterNav.count()) > 1) commandCenterNav = commandCenterNav.first();\r\n        if (!(await commandCenterNav.count())) commandCenterNav = page.getByRole('button', { name: 'The Cockpit' });\r\n        if (await commandCenterNav.count()) {\r\n          await commandCenterNav.waitFor({ state: 'visible', timeout: 15000 });\r\n          await retryClick(commandCenterNav, { tries: 3 });\r\n          await retryClick(page.getByText(/Little Sprouts/i), { tries: 3 });\r\n        } else {\r\n          // Nothing matched ΓÇö try the System menu.\r\n          let systemBtn = page.getByTestId('nav-system');\r\n          let systemBtnCount = await systemBtn.count();\r\n          if (systemBtnCount === 0) {\r\n            systemBtn = page.getByRole('button', { name: /System/i });\r\n            systemBtnCount = await systemBtn.count();\r\n          }\r\n          if (systemBtnCount > 0) {\r\n            await retryClick(systemBtn, { tries: 3 });\r\n            await page.getByRole('menu').waitFor({ state: 'visible', timeout: 15000 });\r\n            const littleMenuCount = await page.getByRole('menuitem', { name: /Little Sprouts/i }).count();\r\n            if (littleMenuCount > 0) {\r\n              await retryClick(page.getByRole('menuitem', { name: /Little Sprouts/i }), { tries: 3 });\r\n            } else {\r\n              await retryClick(page.getByText(/Little Sprouts/i), { tries: 3 });\r\n            }\r\n          }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Helper for fallback navigation via system menu\r\n  const fallbackSystemMenuNav = async () => {\r\n    let systemBtn = page.getByTestId('nav-system');\r\n    let systemBtnCount = await systemBtn.count();\r\n    if (systemBtnCount === 0) {\r\n      systemBtn = page.getByRole('button', { name: /System/i });\r\n      systemBtnCount = await systemBtn.count();\r\n    }\r\n    if (systemBtnCount > 0) {\r\n      await retryClick(systemBtn, { tries: 3 });\r\n            await page.getByRole('menu').waitFor({ state: 'visible', timeout: 15000 });\r\n            const menuItem = page.getByRole('menuitem', { name: /Child Dashboard|Child|Willow's Sprout|Willow's|Little Sprouts/i });\r\n      const menuItemCount = await menuItem.count();\r\n      if (menuItemCount > 0) {\r\n        await retryClick(menuItem, { tries: 3 });\r\n        await page.waitForLoadState('networkidle');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Ensure we are on Willow's dashboard before checking for Reward Store or Dopamine Mining\r\n  let dashboardLoaded = false;\r\n  try {\r\n    await ensureAppView(page, 'willows-dashboard');\r\n    await page.waitForSelector('[data-testid=\"kids-reward-store\"]', { state: 'attached', timeout: 30000 });\r\n    await expect(page.getByTestId('kids-reward-store')).toBeVisible({ timeout: 15000 });\r\n    await expect(page.getByTestId('kids-gem-collection')).toBeVisible({ timeout: 15000 });\r\n    dashboardLoaded = true;\r\n  } catch (e) {\r\n    const nav = page.getByRole('button', { name: /Child Dashboard|Child|Willow's Sprout|Willow's/i });\r\n    const navCount = await nav.count();\r\n    if (navCount > 0) {\r\n      await retryClick(nav, { tries: 3 });\r\n      // Ensure dispatch is triggered: fallback to an evaluated click on the element\r\n      await nav.evaluate((el: HTMLElement) => el.click());\r\n      // Wait for appState view to update\r\n      try { await ensureAppView(page, 'willows-dashboard'); } catch (_) {}\r\n      await page.waitForLoadState('networkidle');\r\n      try {\r\n        await page.waitForSelector('[data-testid=\"kids-reward-store\"]', { state: 'attached', timeout: 30000 });\r\n        await expect(page.getByTestId('kids-reward-store')).toBeVisible({ timeout: 15000 });\r\n        await expect(page.getByTestId('kids-gem-collection')).toBeVisible({ timeout: 15000 });\r\n        dashboardLoaded = true;\r\n      } catch (err) {}\r\n    } else {\r\n      await fallbackSystemMenuNav();\r\n          try {\r\n          await ensureAppView(page, 'willows-dashboard');\r\n          await page.waitForSelector('[data-testid=\"kids-reward-store\"]', { state: 'attached', timeout: 30000 });\r\n          await expect(page.getByTestId('kids-reward-store')).toBeVisible({ timeout: 15000 });\r\n          await expect(page.getByTestId('kids-gem-collection')).toBeVisible({ timeout: 15000 });\r\n          dashboardLoaded = true;\r\n      } catch (err) {}\r\n    }\r\n  }\r\n  if (!dashboardLoaded) {\r\n    // Final attempt: re-seed state explicitly then reload to force correct dashboard\r\n    await page.evaluate(() => {\r\n      try {\r\n        const key = (window as any).__E2E_STORAGE_KEY__ || 'wonky-sprout-os-state';\r\n        const state = JSON.parse(window.localStorage.getItem(key) || '{}');\r\n        state.dashboardType = 'willow';\r\n        state.view = 'willows-dashboard';\r\n        state.initialSetupComplete = true;\r\n        state.willowDashboardModules = ['reward-store-module', 'willow-gem-collector-module'];\r\n        window.localStorage.setItem(key, JSON.stringify(state));\r\n          try { (window as any).__PLAYWRIGHT_SKIP_DEV_BYPASS__ = true; } catch { /* ignore */ }\r\n      } catch { /* ignore */ }\r\n    });\r\n    await page.reload({ waitUntil: 'load' });\r\n    await page.waitForLoadState('networkidle');\r\n    try {\r\n      await page.waitForSelector('[data-testid=\"kids-reward-store\"]', { state: 'attached', timeout: 30000 });\r\n      await expect(page.getByTestId('kids-reward-store')).toBeVisible({ timeout: 15000 });\r\n      await expect(page.getByTestId('kids-gem-collection')).toBeVisible({ timeout: 15000 });\r\n      dashboardLoaded = true;\r\n    } catch (e) {\r\n        await page.screenshot({ path: 'child_dashboard_not_loaded.png' });\r\n        throw new Error('Child dashboard not loaded: Reward Store or Dopamine Mining not visible');\r\n    }\r\n  }\r\n\r\n  // Stop tracing and save if we started it\r\n  try {\r\n    if (shouldTrace) await page.context().tracing.stop({ path: 'trace-kids_rewards.zip' });\r\n  } catch (e) { console.warn('Failed to stop tracing', e); }\r\n\r\n    // If the Reward Store is present, verify that a reward tier is visible and redemption works.\r\n    if ((await page.getByTestId('reward-tier-5').count()) > 0) {\r\n      const tier = page.getByTestId('reward-tier-5');\r\n      const redeemBtn = tier.getByRole('button', { name: /Redeem/i });\r\n      await expect(redeemBtn).toBeVisible({ timeout: 15000 });\r\n      await redeemBtn.click();\r\n      // After dispatch, the UI should update to show a Pending state\r\n      await expect(tier.getByRole('button', { name: /Pending/i })).toBeDisabled();\r\n    } else {\r\n      // Fallback: ensure the Dopamine Mining area exists and shows a progress message\r\n      await expect(page.getByTestId('kids-gem-collection')).toBeVisible();\r\n    }\r\n\r\n  // This test is intentionally simple; detailed redemption tests are in `kids_rewards_full.spec.ts`.\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\neuro_onboarding.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":25,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":25,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from '@playwright/test';\r\n\r\ntest.describe.skip('Neuro Onboarding', () => {\r\n  test.beforeEach(async ({ page }) => {\r\n    await page.goto('/?forceView=game-master-dashboard');\r\n    await page.waitForLoadState('networkidle');\r\n    // Ensure the Cockpit header is present before tests interact with the UI to prevent flakiness\r\n    const cockpitHeading = page.locator('h1, h2').filter({ hasText: /Cockpit|Command Center|Dashboard/i }).first();\r\n    await expect(cockpitHeading).toBeVisible({ timeout: 30000 });\r\n  });\r\n\r\n  test('Neuro Onboarding can be opened from command palette @smoke', async ({ page }) => {\r\n    // Allow longer time for slow environments or CI to open the command palette\r\n    test.setTimeout(150_000);\r\n    // Open Command Palette\r\n    await page.keyboard.press('Meta+K');\r\n    await page.waitForTimeout(500); // Allow animation\r\n    \r\n    // Type \"Neuro\" ΓÇö robust wait with retries for flaky environments\r\n    const waitInput = async () => {\r\n      for (let attempt = 0; attempt < 3; attempt++) {\r\n        try {\r\n          await page.waitForSelector('[placeholder*=\"Type a command\"]', { timeout: 120000 });\r\n          return true;\r\n        } catch (err) {\r\n          // Retry opening the command palette in case of animation or overlay issues\r\n          try {\r\n            await page.keyboard.press('Meta+K');\r\n          } catch {}\r\n          try {\r\n            await page.keyboard.press('Control+K');\r\n          } catch {}\r\n          // Small delay to allow animation/overlay to settle\r\n          await page.waitForTimeout(750);\r\n        }\r\n      }\r\n      return false;\r\n    };\r\n    const inputReady = await waitInput();\r\n    if (!inputReady) {\r\n      // Give a last-ditch reload one chance to recover\r\n      await page.reload({ waitUntil: 'networkidle' });\r\n      const recovery = await waitInput();\r\n      if (!recovery) throw new Error('Command palette did not appear after retries');\r\n    }\r\n    const input = page.getByPlaceholder(/Type a command|Search/i);\r\n    // Wait for command palette input to appear and allow a generous fill timeout for slow envs\r\n    await expect(input).toBeVisible({ timeout: 150000 });\r\n    await input.fill('Neuro', { timeout: 120000 });\r\n    await page.waitForTimeout(500);\r\n\r\n    // Click the first option that matches\r\n    await page.getByRole('option', { name: /Neuro/i }).first().click();\r\n\r\n    // Verify the Vault loaded (look for \"SOP\", \"Protocol\", or \"Vault\")\r\n    const header = page.locator('h1, h2').filter({ hasText: /SOP|Flight Protocol|Vault/i }).first();\r\n    await expect(header).toBeVisible({ timeout: 10000 });\r\n  });\r\n\r\n  test('SOP Vault imports neuro templates', async ({ page }) => {\r\n    // FIX: Handle the \"Multiple Elements\" error\r\n    // We grab the testID, but we explicitly say \"give me the first one\"\r\n    const navItem = page.getByTestId('nav-sop-vault').first();\r\n    \r\n    // If the nav item is hidden (mobile), open the menu first\r\n    if (!(await navItem.isVisible())) {\r\n        const mobileMenu = page.getByTestId('mobile-menu-button');\r\n        if (await mobileMenu.isVisible()) {\r\n             await mobileMenu.click();\r\n        }\r\n    }\r\n    \r\n    // Wait for Cockpit header to be visible before clicking navigation\r\n    const cockpitHeader = page.locator('h1, h2').filter({ hasText: /Cockpit|Command Center|Dashboard/i }).first();\r\n    await expect(cockpitHeader).toBeVisible({ timeout: 10000 });\r\n    await navItem.click();\r\n    await page.waitForLoadState('networkidle');\r\n\r\n    // Verify Import Button exists\r\n    await expect(page.getByText(/Import/i).first()).toBeVisible();\r\n    await page.getByText(/Import/i).first().click();\r\n\r\n    // Verify Neurodivergent Templates exist\r\n    await expect(page.getByText(/Neurodivergent/i).first()).toBeVisible();\r\n  });\r\n});","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\non_ai_flow.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":46,"column":14,"nodeType":null,"messageId":"unusedVar","endLine":46,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err2' is defined but never used.","line":50,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":50,"endColumn":20},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err3' is defined but never used.","line":55,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":55,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":93,"column":12,"nodeType":null,"messageId":"unusedVar","endLine":93,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { retryClick } from './helpers/retryHelpers';\r\n\r\ntest('app works without AI - manual flow @smoke', async ({ page, storageKey }) => {\r\n  // Ensure AI is disabled via localStorage before app boot\r\n  await page.addInitScript(() => localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false })));\r\n  await page.addInitScript((key) => { try { window.localStorage.removeItem(key as string); } catch { /* ignore */ } }, storageKey);\r\n  await page.goto('/?forceView=command-center', { timeout: 120_000, waitUntil: 'load' });\r\n    // Allow more time for network idle during local dev/hmr\r\n    await page.waitForLoadState('networkidle', { timeout: 120_000 });\r\n  await page.getByRole('banner').waitFor({ timeout: 120_000 });\r\n  await page.screenshot({ path: 'tests/e2e/debug/non_ai_after_load.png', fullPage: true });\r\n  await expect(page).toHaveTitle(/Wonky/);\r\n\r\n  // Navigate to the weekly review\r\n    await page.addInitScript((key) => { try { window.localStorage.removeItem(key as string); } catch { /* ignore */ } }, storageKey);\r\n    // Ensure the entire DOM is settled after navigation and for the main title to be visible\r\n    await page.waitForLoadState('networkidle');\r\n    await expect(page.getByRole('heading', { name: 'The Cockpit' })).toBeVisible({ timeout: 10000 });\r\n\r\n    // Prefer stable data-testid if available\r\n    let commandCenterNav = page.getByTestId('nav-command-center');\r\n    if ((await commandCenterNav.count()) > 1) commandCenterNav = commandCenterNav.first();\r\n    if (!(await commandCenterNav.count())) {\r\n      commandCenterNav = page.getByRole('button', { name: /The Cockpit|Command Center/i });\r\n    }\r\n    if (await commandCenterNav.count()) {\r\n      await commandCenterNav.waitFor({ state: 'visible', timeout: 10000 });\r\n        await retryClick(commandCenterNav, { tries: 3 });\r\n    } else {\r\n      let systemBtn = page.getByTestId('nav-system');\r\n      if (!(await systemBtn.count())) systemBtn = page.getByRole('button', { name: 'System' });\r\n      await retryClick(systemBtn, { tries: 3 });\r\n      await page.waitForTimeout(150);\r\n      await page.getByRole('menu').waitFor({ state: 'visible', timeout: 5000 });\r\n      await page.waitForTimeout(100);\r\n      await retryClick(page.getByRole('menuitem', { name: /The Cockpit|Command Center/i }), { tries: 3 });\r\n    }\r\n    await expect(page.getByTestId('command-center-title')).toBeVisible({ timeout: 10000 });\r\n      await page.click('body');\r\n      await page.keyboard.press('Control+K');\r\n    await page.waitForTimeout(250); // small buffer for open animation\r\n    try {\r\n      // Command palette should show 'Weekly Review' quickly; otherwise allow a longer fallback\r\n      await page.waitForSelector('text=Weekly Review', { timeout: 3000 });\r\n    } catch (err) {\r\n      await page.keyboard.press('Meta+K');\r\n      try {\r\n        await page.waitForSelector('text=Weekly Review', { timeout: 3000 });\r\n      } catch (err2) {\r\n        // Final fallback to dispatch - this was previously used but is less reliable\r\n        await page.evaluate(() => window.dispatchEvent(new KeyboardEvent('keydown', { key: 'k', ctrlKey: true })));\r\n        try {\r\n          await page.waitForSelector('text=Weekly Review', { timeout: 10000 });\r\n        } catch (err3) {\r\n          // If the palette still fails, fall back to header nav -> System -> Weekly Review\r\n          let systemBtn2 = page.getByTestId('nav-system');\r\n          if (!(await systemBtn2.count())) systemBtn2 = page.getByRole('button', { name: 'System' });\r\n          await retryClick(systemBtn2, { tries: 3 });\r\n          await retryClick(page.getByRole('menuitem', { name: 'Weekly Review' }), { tries: 3 });\r\n          await page.waitForSelector('text=Weekly Review', { timeout: 10000 });\r\n        }\r\n      }\r\n    }\r\n    // Click Weekly Review ΓÇö prefer stable data-testid on the header. Fall back to System menu\r\n    // Prefer the wizard-specific nav item to avoid ambiguity with other Weekly Review UIs\r\n    let weeklyLink = page.getByTestId('nav-weekly-review-wizard');\r\n    if ((await weeklyLink.count()) === 0) weeklyLink = page.getByTestId('nav-weekly-review');\r\n    if ((await weeklyLink.count()) === 0) {\r\n      weeklyLink = page.getByRole('button', { name: /Weekly Review/i });\r\n    }\r\n    if ((await weeklyLink.count()) === 0) {\r\n      // Last fallback: open the system menu and click the menu item\r\n      let systemBtn4 = page.getByTestId('nav-system');\r\n      if (!(await systemBtn4.count())) systemBtn4 = page.getByRole('button', { name: 'System' });\r\n      await retryClick(systemBtn4, { tries: 3 });\r\n      weeklyLink = page.getByRole('menuitem', { name: 'Weekly Review' });\r\n    }\r\n      await retryClick(weeklyLink, { tries: 3 });\r\n\r\n  // Advance to step 4 (may need to follow steps)\r\n  // Prefer the exact button, but fallback to partial text or a next-step affordance if the label differs.\r\n  // Prefer testid for the proceed button then fallback to text-based selectors\r\n  let proceedInboxBtn = page.getByTestId ? page.getByTestId('weekly-review-proceed-inbox') : page.locator('button', { hasText: /Proceed to Inbox Clearing|Proceed to Inbox|Next|Continue|Proceed/i });\r\n  if ((await proceedInboxBtn.count()) === 0) proceedInboxBtn = page.getByRole('button', { name: /Proceed to Inbox/i });\r\n  if ((await proceedInboxBtn.count()) === 0) proceedInboxBtn = page.getByText(/Proceed to Inbox Clearing|Proceed to Inbox/i);\r\n  if ((await proceedInboxBtn.count()) === 0) proceedInboxBtn = page.getByText(/Proceed to Inbox/i);\r\n  // Wait for the button to appear and become enabled ΓÇö many variants of UI exist, so allow fallback\r\n  try {\r\n    await proceedInboxBtn.waitFor({ state: 'visible', timeout: 10000 });\r\n    await expect(proceedInboxBtn).toBeEnabled({ timeout: 10000 });\r\n      await retryClick(proceedInboxBtn, { tries: 3 });\r\n  } catch (err) {\r\n    // If the wizard isn't available (different Weekly Review view), attempt direct reflection assist step\r\n    const assistExists = (await page.getByRole('button', { name: /Assist with Reflection/i }).count()) > 0;\r\n    if (assistExists) {\r\n      // Directly click the assist button to validate non-AI heuristics\r\n      await page.getByRole('button', { name: /Assist with Reflection/i }).click();\r\n    } else {\r\n      // UI mismatch ΓÇö log and bail this part of the flow to avoid flakiness\r\n      console.warn('Weekly Review wizard not available in this view; skipping wizard flow.');\r\n      return; // end test here ΓÇö don't fail for missing wizard in different builds\r\n    }\r\n  }\r\n    await retryClick(page.getByTestId ? page.getByTestId('weekly-review-proceed-progress') : page.getByRole('button', { name: /Proceed to Progress Review/i }), { tries: 3 });\r\n    await retryClick(page.getByTestId ? page.getByTestId('weekly-review-proceed-reflection') : page.getByRole('button', { name: /Proceed to Reflection/i }), { tries: 3 });\r\n\r\n  // In reflection step, click 'Assist with Reflection' which will use local heuristics when AI disabled\r\n  const assistBtn = page.getByTestId && (await page.getByTestId('weekly-review-assist').count()) ? page.getByTestId('weekly-review-assist') : await page.getByRole('button', { name: /Assist with Reflection/i });\r\n  await assistBtn.click();\r\n\r\n  // Textareas should fill with local heuristic content\r\n  const wins = await page.getByPlaceholder('Γ£à What went well this week? (Wins)');\r\n  await expect(wins).not.toBeEmpty();\r\n\r\n  // Save the reflection - not dependent on AI\r\n  await (page.getByTestId ? page.getByTestId('weekly-review-save') : page.getByRole('button', { name: /Save Reflection to Vault/i })).click();\r\n  await expect(page.getByTestId('weekly-review-complete')).toBeVisible();\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\piiConsentFlow.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\playwright-fixtures.d.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\playwright-fixtures.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'BrowserContext' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":29},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Page' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":31,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"// Import the real Playwright module directly for extension.\r\nimport { test as base, expect } from '@playwright/test';\r\nimport type { BrowserContext, Page } from '@playwright/test';\r\n\r\nexport const test = base.extend<{ storageKey: string }>({\r\n  // This fixture is worker-scoped so each worker gets a unique storageKey\r\n  storageKey: [async (_, use, workerInfo) => {\r\n    const key = `wonky-sprout-os-state-${workerInfo.workerIndex || Math.random().toString(36).slice(2)}`;\r\n    await use(key);\r\n  }, { scope: 'worker' }],\r\n\r\n  // Override the `page` fixture to inject the storageKey into the page\r\n  page: async ({ page, storageKey }, use) => {\r\n    // Ensure the worker key is available to the page before any script runs\r\n    await page.addInitScript((key) => {\r\n      try { (window as any).__E2E_STORAGE_KEY__ = key; } catch { /* ignore */ }\r\n    }, storageKey);\r\n    // Mark this run as an E2E test mode so components can accelerate timers.\r\n    await page.addInitScript(() => {\r\n      try { (window as any).__WONKY_E2E_TEST_MODE__ = true; } catch { /* ignore */ }\r\n    });\r\n    // Add global error and console logging for all pages in this context\r\n    page.on('pageerror', (exception) => {\r\n      console.error(`PW_PAGE_ERROR [${test.info().title}]:`, exception);\r\n      // Additionally, store the error in localStorage so tests can retrieve it\r\n      // and assert against it if necessary (e.g., if the error boundary fails).\r\n      try { window.localStorage.setItem('wonky-last-error', exception.stack || exception.message); } catch { /* ignore */ }\r\n    });\r\n    page.on('console', (msg) => {\r\n      // Only log warnings and errors to avoid spamming the console\r\n      if (msg.type() === 'error' || msg.type() === 'warn') {\r\n        console.log(`PW_CONSOLE_LOG [${test.info().title}][${msg.type()}]:`, msg.text());\r\n      }\r\n    });\r\n    // Capture lifecycle events for better triage when pages close/crash unexpectedly.\r\n    page.on('close', () => console.log(`PW_PAGE_CLOSE [${test.info().title}] page closed`));\r\n    page.on('crash', () => console.error(`PW_PAGE_CRASH [${test.info().title}] page crashed`));\r\n    await use(page);\r\n  },\r\n});\r\n\r\nexport { expect };\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\redemption_admin.spec.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'expect' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":16,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ensureAppView' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":23},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'retryClick' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'applyAiStub' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":19},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'page' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":74,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":78},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'storageKey' is defined but never used. Allowed unused args must match /^_/u.","line":5,"column":80,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":90}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { test, expect } from './playwright-fixtures';\r\nimport { ensureAppView, retryClick } from './helpers/retryHelpers';\r\nimport applyAiStub from './helpers/aiStub';\r\n\r\ntest('Admin redemption flow ΓÇö mark reward as fulfilled @smoke', async ({ page, storageKey }) => {\r\n  });","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\e2e\\register_shim.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\functions\\aiProxy.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\generateId.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\googleWorkspace.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\importExport.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\piiConsentFlow.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\promptSanitizer.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\setupTests.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\test-utils\\appStateTestUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\unit\\SopVault.test.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\unit\\generateId.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\useAIPromptSafety.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPiiModalOpen' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":44},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'piiMatches' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":16,"column":46,"nodeType":null,"messageId":"unusedVar","endLine":16,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'s' is defined but never used. Allowed unused args must match /^_/u.","line":31,"column":33,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":34}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi } from 'vitest';\r\nimport { renderHook } from '@testing-library/react';\r\nimport React from 'react';\r\nimport { act, waitFor } from '@testing-library/react';\r\nimport useAIPromptSafety from '../hooks/useAIPromptSafety';\r\nimport { FeatureFlagsProvider } from '@contexts/FeatureFlagsContext';\r\nimport { AIProtectionProvider } from '@contexts/AIProtectionContext';\r\n\r\ndescribe('useAIPromptSafety', () => {\r\n  it('detects PII and opens modal flow', async () => {\r\n    const wrapper = ({ children }: any) => (\r\n      React.createElement(FeatureFlagsProvider, null,\r\n        React.createElement(AIProtectionProvider, null, children))\r\n    );\r\n    const { result } = renderHook(() => useAIPromptSafety(), { wrapper });\r\n    const { checkAndExecute, isPiiModalOpen, piiMatches } = result.current;\r\n\r\n    // When PII is present, the function should not execute and the hook should present matches\r\n    await act(async () => {\r\n      await checkAndExecute('My email is test@example.com', async () => 'ok');\r\n    });\r\n    // After running, the test instance should reflect PII detection\r\n    expect(result.current.isPiiModalOpen).toBe(true);\r\n    expect(result.current.piiMatches.length).toBeGreaterThan(0);\r\n  });\r\n\r\n  it('executes action if consent already given', async () => {\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useAIPromptSafety(), { wrapper });\r\n\r\n    const mockFn = vi.fn(async (s: string) => 'ok');\r\n\r\n    // Simulate user having granted AI consent\r\n    localStorage.setItem('wonky-sprout-ai-consent-dont-show-again', 'true');\r\n\r\n    await act(async () => {\r\n      await result.current.checkAndExecute('My email is test@example.com', mockFn);\r\n    });\r\n\r\n    expect(result.current.isPiiModalOpen).toBe(true);\r\n    // After calling handlePiiConfirm the pending action should execute\r\n    await act(async () => {\r\n      result.current.handlePiiConfirm();\r\n    });\r\n    await waitFor(() => expect(result.current.isPiiModalOpen).toBe(false));\r\n    // Note: confirming consent should eventually run the pending action (see useAIConsent). On CI the flow is async and may require further mocking.\r\n  });\r\n\r\n  it('allows clean input', async () => {\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useAIPromptSafety(), { wrapper });\r\n    const { checkAndExecute } = result.current;\r\n\r\n    const res = await checkAndExecute('Short prompt', async (s) => `processed:${s}`);\r\n    expect(res).toBe('processed:Short prompt');\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\useApplyNeuroPrefs.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'render' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":16},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fireEvent' is defined but never used. Allowed unused vars must match /^_/u.","line":2,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":27},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'AppStateProvider' is defined but never used. Allowed unused vars must match /^_/u.","line":4,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":26},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'NeuroPrefsProvider' is defined but never used. Allowed unused vars must match /^_/u.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":28},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TogglePrefsButton' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":8,"column":7,"nodeType":null,"messageId":"unusedVar","endLine":8,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'removeSpy' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":27,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":27,"endColumn":20}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { render, fireEvent, renderHook } from '@testing-library/react';\r\nimport { describe, it, expect, vi, afterEach } from 'vitest';\r\nimport { AppStateProvider } from '@contexts/AppStateContext';\r\nimport { NeuroPrefsProvider, useNeuroPrefs } from '@contexts/NeurodivergentPreferencesContext';\r\nimport { useApplyNeuroPrefs } from '@hooks/useApplyNeuroPrefs';\r\n\r\nconst TogglePrefsButton: React.FC = () => {\r\n  useApplyNeuroPrefs();\r\n  const { prefs, setPrefs } = useNeuroPrefs();\r\n  return (\r\n    <button\r\n      onClick={() => setPrefs({ simplifiedUi: !prefs.simplifiedUi, largerText: !prefs.largerText })}\r\n      data-testid=\"toggle\"\r\n    >Toggle</button>\r\n  );\r\n};\r\n\r\ndescribe('useApplyNeuroPrefs', () => {\r\n  afterEach(() => {\r\n    vi.restoreAllMocks();\r\n    document.documentElement.className = '';\r\n  });\r\n\r\n  it('Toggling preferences updates document classes', () => {\r\n    const addSpy = vi.spyOn(document.documentElement.classList, 'add');\r\n    const removeSpy = vi.spyOn(document.documentElement.classList, 'remove');\r\n\r\n    const prefs = {\r\n      simplifiedUi: true,\r\n      reduceAnimations: false,\r\n      largerText: false,\r\n      focusModeDuration: 15,\r\n      microStepsMode: true,\r\n      assistTone: 'concise',\r\n      autoAdvanceSteps: false\r\n    };\r\n\r\n    renderHook(() => useApplyNeuroPrefs(prefs));\r\n\r\n    expect(addSpy).toHaveBeenCalledWith(expect.stringMatching(/simplified/));\r\n    // Optionally: expect(removeSpy).toHaveBeenCalled();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\useLiveSession.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'React' is defined but never used. Allowed unused vars must match /^_/u.","line":3,"column":8,"nodeType":null,"messageId":"unusedVar","endLine":3,"endColumn":13},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'x' is defined but never used. Allowed unused args must match /^_/u.","line":53,"column":97,"nodeType":null,"messageId":"unusedVar","endLine":53,"endColumn":98}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach } from 'vitest';\r\nimport { renderHook } from '@testing-library/react';\r\nimport React /* @__PURE__ */ from 'react';\r\nimport { act } from '@testing-library/react';\r\n// Import `useLiveSession` dynamically after mocking `@google/genai` to ensure\r\n// the module uses the mocked GoogleGenAI constructor.\r\n\r\ndescribe('useLiveSession Playwright stub guard', () => {\r\n  beforeEach(() => {\r\n    vi.resetModules();\r\n    // Ensure no pre-existing flag\r\n    try { delete (global as any).__PLAYWRIGHT_AI_STUB__; } catch { /* ignore */ }\r\n  });\r\n\r\n  it('returns a fake session and avoids vendor network calls when __PLAYWRIGHT_AI_STUB__ is set', async () => {\r\n    (global as any).__PLAYWRIGHT_AI_STUB__ = true;\r\n    const onMessage = vi.fn();\r\n\r\n    const { useLiveSession } = await import('../hooks/useLiveSession');\r\n    const { result } = renderHook(() => useLiveSession({ onMessage, config: { model: 'x', config: {} } }));\r\n\r\n    await act(async () => {\r\n      await result.current.startSession();\r\n    });\r\n\r\n    // Because we resolve a fake session, status should be listening and methods must be callable\r\n    expect(result.current.status === 'listening' || result.current.status === 'connecting' || result.current.status === 'idle').toBeTruthy();\r\n\r\n    // calling sendToolResponse should not throw\r\n    await act(async () => {\r\n      result.current.sendToolResponse({ fake: true });\r\n    });\r\n\r\n    // stopSession should not throw\r\n    await act(async () => {\r\n      result.current.stopSession();\r\n    });\r\n  });\r\n\r\n  it('uses GoogleGenAI.live.connect when not stubbed', async () => {\r\n    // Provide a fake audio environment to avoid calling actual browser APIs\r\n    (global as any).navigator = (global as any).navigator || {};\r\n    (global as any).navigator.mediaDevices = { getUserMedia: vi.fn().mockResolvedValue({ getTracks: () => [] }) };\r\n\r\n    // Minimal AudioContext stub used by the hook\r\n    (global as any).AudioContext = class {\r\n      state = 'running';\r\n      destination = {};\r\n      constructor() {}\r\n      resume() { return Promise.resolve(); }\r\n      createMediaStreamSource() { return { connect: () => {}, disconnect: () => {} }; }\r\n      createScriptProcessor() { return { connect: () => {}, disconnect: () => {}, onaudioprocess: null }; }\r\n      createAnalyser() { return { fftSize: 512, frequencyBinCount: 256, getByteTimeDomainData: (x:any)=>{} }; }\r\n    } as any;\r\n\r\n    // Provide the mocked google client via a global to avoid hoisting issues with vi.mock\r\n    (global as any).__testGoogleMock = { live: { connect: vi.fn().mockResolvedValue({ sendRealtimeInput: vi.fn(), sendToolResponse: vi.fn(), close: vi.fn() }) } };\r\n    vi.mock('@google/genai', () => ({ GoogleGenAI: function GoogleGenAI() { return (global as any).__testGoogleMock; } }));\r\n\r\n    const onMessage = vi.fn();\r\n    const { useLiveSession } = await import('../hooks/useLiveSession');\r\n    const { result } = renderHook(() => useLiveSession({ onMessage, config: { model: 'x', config: {} } }));\r\n\r\n    await act(async () => {\r\n      await result.current.startSession();\r\n    });\r\n\r\n    expect((global as any).__testGoogleMock.live.connect).toHaveBeenCalled();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\useLocalStorage.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\tests\\useSafeAI.test.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'afterEach' is defined but never used. Allowed unused vars must match /^_/u.","line":1,"column":48,"nodeType":null,"messageId":"unusedVar","endLine":1,"endColumn":57},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'res' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":31,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":14},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'generate' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":44,"column":13,"nodeType":null,"messageId":"unusedVar","endLine":44,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'controller' is assigned a value but never used. Allowed unused vars must match /^_/u.","line":115,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":115,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { describe, it, expect, vi, beforeEach, afterEach } from 'vitest';\r\nimport { renderHook } from '@testing-library/react';\r\nimport React from 'react';\r\nimport { act } from '@testing-library/react';\r\nimport useSafeAI from '../hooks/useSafeAI';\r\nimport { FeatureFlagsProvider } from '@contexts/FeatureFlagsContext';\r\nimport * as telemetry from '../utils/telemetry';\r\n\r\nvi.mock('../hooks/useAIPromptSafety', () => ({\r\n  default: () => ({ checkAndExecute: (prompt: any, fn: any) => fn(prompt) })\r\n}));\r\nlet googleMock: any;\r\n\r\ndescribe('useSafeAI telemetry & failures', () => {\r\n  beforeEach(() => {\r\n    vi.resetModules();\r\n  });\r\n\r\n  it('logs ai_call_success on successful call', async () => {\r\n    googleMock = {\r\n      models: { generateContent: vi.fn().mockResolvedValue({ text: 'hello' }) },\r\n    };\r\n    vi.mock('@google/genai', () => ({ GoogleGenAI: function GoogleGenAI() { return googleMock; } }));\r\n\r\n    const spy = vi.spyOn(telemetry, 'logTelemetry');\r\n\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n\r\n    const res = await act(async () => await generate('test prompt'));\r\n    expect(spy).toHaveBeenCalledWith('ai_call_success', expect.any(Object));\r\n  });\r\n\r\n  it('logs json parse failure when JSON expected but invalid', async () => {\r\n    googleMock = {\r\n      models: { generateContent: vi.fn().mockResolvedValue({ text: 'notjson' }) },\r\n    };\r\n    vi.mock('@google/genai', () => ({ GoogleGenAI: function GoogleGenAI() { return googleMock; } }));\r\n\r\n    const spy = vi.spyOn(telemetry, 'logTelemetry');\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n\r\n    await expect(result.current.generate('test', { responseMimeType: 'application/json' })).rejects.toThrow();\r\n    expect(spy).toHaveBeenCalledWith('ai_call_json_parse_failure', expect.any(Object));\r\n  });\r\n\r\n  it('logs ai_call_error on timeout', async () => {\r\n    vi.useFakeTimers();\r\n\r\n    googleMock = {\r\n      models: {\r\n        generateContent: vi.fn((opts: any) =>\r\n          new Promise((_, reject) => {\r\n            if (opts?.signal) {\r\n              opts.signal.addEventListener('abort', () => reject(new Error('aborted')));\r\n            }\r\n          })\r\n        ),\r\n      },\r\n    };\r\n    vi.mock('@google/genai', () => ({ GoogleGenAI: function GoogleGenAI() { return googleMock; } }));\r\n\r\n    const spy = vi.spyOn(telemetry, 'logTelemetry');\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n\r\n    const promise = generate('timeout-promt', { timeoutMs: 10 });\r\n    act(() => {\r\n      vi.advanceTimersByTime(50);\r\n    });\r\n\r\n    await expect(promise).rejects.toThrow();\r\n    expect(spy).toHaveBeenCalledWith('ai_call_error', expect.any(Object));\r\n\r\n    vi.useRealTimers();\r\n  });\r\n\r\n  it('respects external abort signal', async () => {\r\n    googleMock = {\r\n      models: {\r\n        generateContent: vi.fn((opts: any) =>\r\n          new Promise((_, reject) => {\r\n            if (opts?.signal) {\r\n              opts.signal.addEventListener('abort', () => reject(new Error('aborted')));\r\n            }\r\n          })\r\n        ),\r\n      },\r\n    };\r\n    vi.mock('@google/genai', () => ({ GoogleGenAI: function GoogleGenAI() { return googleMock; } }));\r\n\r\n    const spy = vi.spyOn(telemetry, 'logTelemetry');\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n    const controller = new AbortController();\r\n\r\n    const promise = generate('abort-test', { signal: controller.signal });\r\n    controller.abort();\r\n\r\n    await expect(promise).rejects.toThrow();\r\n    expect(spy).toHaveBeenCalledWith('ai_call_error', expect.any(Object));\r\n  });\r\n\r\n  it('returns a manual fallback when AI is disabled', async () => {\r\n    // Simulate user turning AI off in localStorage\r\n    localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false }));\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n    const controller = new AbortController();\r\n    const res = await generate('some prompt');\r\n    expect(res.source).toBe('manual');\r\n  });\r\n  it('returns structured placeholders when JSON is requested and AI is disabled', async () => {\r\n    localStorage.setItem('wonky_flags', JSON.stringify({ aiEnabled: false }));\r\n    const wrapper = ({ children }: any) => React.createElement(FeatureFlagsProvider, null, children);\r\n    const { result } = renderHook(() => useSafeAI(), { wrapper });\r\n    const { generate } = result.current;\r\n    const res = await generate('a prompt', { responseMimeType: 'application/json', responseSchema: { properties: { wins: {}, friction: {} } } });\r\n    expect(res.source).toBe('manual');\r\n    expect('wins' in res.json).toBe(true);\r\n    expect(res.json.wins).toContain('NO_AI');\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\useAIConsent.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\audioUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\habitUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\piiScanner.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\secureMarkdownRenderer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\telemetry.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\telemetryBackend.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\webVitals.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\utils\\win.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\wonky-sprout-os\\vitest.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
